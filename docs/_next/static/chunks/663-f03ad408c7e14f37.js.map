{"version":3,"file":"static/chunks/663-f03ad408c7e14f37.js","mappings":"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","sources":["webpack://_N_E/./src/components/board/states.ts","webpack://_N_E/./src/components/board/squareRenderer.tsx","webpack://_N_E/./src/components/board/evaluationBar.tsx","webpack://_N_E/./src/components/board/capturedPieces.tsx","webpack://_N_E/./src/components/board/playerHeader.tsx","webpack://_N_E/./src/components/board/index.tsx","webpack://_N_E/./src/lib/firebase.ts","webpack://_N_E/./src/components/slider.tsx","webpack://_N_E/./src/hooks/usePlayersData.ts","webpack://_N_E/./src/hooks/useScreenSize.ts","webpack://_N_E/./src/lib/sounds.ts","webpack://_N_E/./src/hooks/useChessActions.ts","webpack://_N_E/./src/hooks/useEngine.ts","webpack://_N_E/./src/hooks/useAtomLocalStorage.ts"],"sourcesContent":["import { PIECE_SETS } from \"@/constants\";\r\nimport { atomWithStorage } from \"jotai/utils\";\r\n\r\nexport const pieceSetAtom = atomWithStorage<(typeof PIECE_SETS)[number]>(\r\n  \"pieceSet\",\r\n  \"merida\"\r\n);\r\nexport const boardHueAtom = atomWithStorage(\"boardHue\", 185);\r\n","import { CurrentPosition } from \"@/types/eval\";\nimport { MoveClassification } from \"@/types/enums\";\nimport { PrimitiveAtom, atom, useAtomValue } from \"jotai\";\nimport Image from \"next/image\";\nimport { CSSProperties, forwardRef, useMemo } from \"react\";\nimport { CustomSquareProps, Square } from \"react-chessboard/dist/chessboard/types\";\nimport { CLASSIFICATION_COLORS } from \"@/constants\";\nimport { boardHueAtom } from \"./states\";\nexport interface Props {\n  currentPositionAtom: PrimitiveAtom<CurrentPosition>;\n  clickedSquaresAtom: PrimitiveAtom<Square[]>;\n  playableSquaresAtom: PrimitiveAtom<Square[]>;\n  showPlayerMoveIconAtom?: PrimitiveAtom<boolean>;\n  boardSize: number;\n}\nexport function getSquareRenderer({\n  currentPositionAtom,\n  clickedSquaresAtom,\n  playableSquaresAtom,\n  showPlayerMoveIconAtom = atom(false),\n  boardSize\n}: Props) {\n  const squareRenderer = forwardRef<HTMLDivElement, CustomSquareProps>((props, ref) => {\n    const {\n      children,\n      square,\n      style\n    } = props;\n    const showPlayerMoveIcon = useAtomValue(showPlayerMoveIconAtom);\n    const position = useAtomValue(currentPositionAtom);\n    const clickedSquares = useAtomValue(clickedSquaresAtom);\n    const playableSquares = useAtomValue(playableSquaresAtom);\n    const boardHue = useAtomValue(boardHueAtom);\n    const fromSquare = position.lastMove?.from;\n    const toSquare = position.lastMove?.to;\n    const moveClassification = position?.eval?.moveClassification;\n    const highlightSquareStyle: CSSProperties | undefined = useMemo(() => clickedSquares.includes(square) ? rightClickSquareStyle : fromSquare === square || toSquare === square ? previousMoveSquareStyle(moveClassification) : undefined, [clickedSquares, square, fromSquare, toSquare, moveClassification]);\n    const playableSquareStyle: CSSProperties | undefined = useMemo(() => playableSquares.includes(square) ? playableSquareStyles : undefined, [playableSquares, square]);\n    return <div ref={ref} style={{\n      ...style,\n      position: \"relative\",\n      filter: boardHue ? `hue-rotate(-${boardHue}deg)` : undefined\n    }}>\r\n          {children}\r\n          {highlightSquareStyle && <div style={highlightSquareStyle} />}\r\n          {playableSquareStyle && <div style={playableSquareStyle} />}\r\n          {moveClassification && showPlayerMoveIcon && square === toSquare && <Image src={`icons/${moveClassification}.png`} alt=\"move-icon\" width={Math.min(40, boardSize * 0.06)} height={Math.min(40, boardSize * 0.06)} style={{\n        position: \"absolute\",\n        top: Math.max(-13.5, boardSize * -0.03) + \"px\",\n        right: Math.max(-13.5, boardSize * -0.03) + \"px\",\n        zIndex: 100\n      }} />}\r\n        </div>;\n  });\n  squareRenderer.displayName = \"SquareRenderer\";\n  return squareRenderer;\n}\nconst rightClickSquareStyle: CSSProperties = {\n  position: \"absolute\",\n  width: \"100%\",\n  height: \"100%\",\n  backgroundColor: \"#eb6150\",\n  opacity: \"0.8\"\n};\nconst playableSquareStyles: CSSProperties = {\n  position: \"absolute\",\n  width: \"100%\",\n  height: \"100%\",\n  backgroundColor: \"rgba(0,0,0,.14)\",\n  padding: \"35%\",\n  backgroundClip: \"content-box\",\n  borderRadius: \"50%\",\n  boxSizing: \"border-box\"\n};\nconst previousMoveSquareStyle = (moveClassification?: MoveClassification): CSSProperties => ({\n  position: \"absolute\",\n  width: \"100%\",\n  height: \"100%\",\n  backgroundColor: moveClassification ? CLASSIFICATION_COLORS[moveClassification] : \"#fad541\",\n  opacity: 0.5\n});","import { Box, Grid2 as Grid, Typography } from \"@mui/material\";\nimport { PrimitiveAtom, atom, useAtomValue } from \"jotai\";\nimport { useEffect, useState } from \"react\";\nimport { getEvaluationBarValue } from \"@/lib/chess\";\nimport { Color } from \"@/types/enums\";\nimport { CurrentPosition } from \"@/types/eval\";\ninterface Props {\n  height: number;\n  boardOrientation?: Color;\n  currentPositionAtom?: PrimitiveAtom<CurrentPosition>;\n}\nexport default function EvaluationBar({\n  height,\n  boardOrientation,\n  currentPositionAtom = atom({})\n}: Props) {\n  const [evalBar, setEvalBar] = useState({\n    whiteBarPercentage: 50,\n    label: \"0.0\"\n  });\n  const position = useAtomValue(currentPositionAtom);\n  useEffect(() => {\n    const bestLine = position?.eval?.lines[0];\n    if (!position.eval || !bestLine || bestLine.depth < 6) return;\n    const evalBar = getEvaluationBarValue(position.eval);\n    setEvalBar(evalBar);\n  }, [position]);\n  return <Grid container justifyContent=\"center\" alignItems=\"center\" width={{\n    xs: \"1.6rem\",\n    sm: \"2rem\"\n  }} height={height} border=\"1px solid black\" borderRadius={{\n    xs: \"3px\",\n    sm: \"5px\"\n  }} data-sentry-element=\"Grid\" data-sentry-component=\"EvaluationBar\" data-sentry-source-file=\"evaluationBar.tsx\">\r\n      <Box sx={{\n      backgroundColor: boardOrientation === Color.White ? \"#424242\" : \"white\",\n      transition: \"height 1s\"\n    }} height={`${boardOrientation === Color.White ? 100 - evalBar.whiteBarPercentage : evalBar.whiteBarPercentage}%`} width=\"100%\" borderRadius={evalBar.whiteBarPercentage === 100 ? {\n      xs: \"3px\",\n      sm: \"5px\"\n    } : {\n      xs: \"3px 3px 0 0\",\n      sm: \"5px 5px 0 0\"\n    }} data-sentry-element=\"Box\" data-sentry-source-file=\"evaluationBar.tsx\">\r\n        <Typography color={boardOrientation === Color.White ? \"white\" : \"black\"} textAlign=\"center\" width=\"100%\" fontSize={{\n        xs: \"0.9rem\",\n        sm: \"1rem\"\n      }} data-sentry-element=\"Typography\" data-sentry-source-file=\"evaluationBar.tsx\">\r\n          {evalBar.whiteBarPercentage < 50 && boardOrientation === Color.White || evalBar.whiteBarPercentage >= 50 && boardOrientation === Color.Black ? evalBar.label : \"\"}\r\n        </Typography>\r\n      </Box>\r\n\r\n      <Box sx={{\n      backgroundColor: boardOrientation === Color.White ? \"white\" : \"#424242\",\n      transition: \"height 1s\"\n    }} height={`${boardOrientation === Color.White ? evalBar.whiteBarPercentage : 100 - evalBar.whiteBarPercentage}%`} width=\"100%\" display=\"flex\" alignItems=\"flex-end\" borderRadius={evalBar.whiteBarPercentage === 100 ? {\n      xs: \"3px\",\n      sm: \"5px\"\n    } : {\n      xs: \"0 0 3px 3px\",\n      sm: \"0 0 5px 5px\"\n    }} data-sentry-element=\"Box\" data-sentry-source-file=\"evaluationBar.tsx\">\r\n        <Typography color={boardOrientation === Color.White ? \"black\" : \"white\"} textAlign=\"center\" width=\"100%\" fontSize={{\n        xs: \"0.9rem\",\n        sm: \"1rem\"\n      }} data-sentry-element=\"Typography\" data-sentry-source-file=\"evaluationBar.tsx\">\r\n          {evalBar.whiteBarPercentage >= 50 && boardOrientation === Color.White || evalBar.whiteBarPercentage < 50 && boardOrientation === Color.Black ? evalBar.label : \"\"}\r\n        </Typography>\r\n      </Box>\r\n    </Grid>;\n}","import { getCapturedPieces, getMaterialDifference } from \"@/lib/chess\";\nimport { Color } from \"@/types/enums\";\nimport { Box, Grid2 as Grid, Stack, Typography } from \"@mui/material\";\nimport { ReactElement, useMemo } from \"react\";\nexport interface Props {\n  fen: string;\n  color: Color;\n}\nconst PIECE_SCALE = 0.55;\nexport default function CapturedPieces({\n  fen,\n  color\n}: Props) {\n  const piecesComponents = useMemo(() => {\n    const capturedPieces = getCapturedPieces(fen, color);\n    return capturedPieces.map(({\n      piece,\n      count\n    }) => getCapturedPiecesComponents(piece, count));\n  }, [fen, color]);\n  const materialDiff = useMemo(() => {\n    const materialDiff = getMaterialDifference(fen);\n    return color === Color.White ? materialDiff : -materialDiff;\n  }, [fen, color]);\n  return <Grid container alignItems=\"end\" spacing={0.7} size=\"auto\" marginLeft={`-${0.3 * PIECE_SCALE}rem`} data-sentry-element=\"Grid\" data-sentry-component=\"CapturedPieces\" data-sentry-source-file=\"capturedPieces.tsx\">\r\n      <Stack direction=\"row\" spacing={0.1} data-sentry-element=\"Stack\" data-sentry-source-file=\"capturedPieces.tsx\">\r\n        {piecesComponents}\r\n      </Stack>\r\n\r\n      {materialDiff > 0 && <Typography lineHeight={`${PIECE_SCALE * 1.5}rem`} fontSize={`${PIECE_SCALE * 1.5}rem`} marginLeft={0.3}>\r\n          +{materialDiff}\r\n        </Typography>}\r\n    </Grid>;\n}\nconst getCapturedPiecesComponents = (pieceSymbol: string, pieceCount: number | undefined): ReactElement | null => {\n  if (!pieceCount) return null;\n  return <Stack direction=\"row\" key={pieceSymbol} spacing={`-${1.2 * PIECE_SCALE}rem`} data-sentry-element=\"Stack\" data-sentry-component=\"getCapturedPiecesComponents\" data-sentry-source-file=\"capturedPieces.tsx\">\r\n      {new Array(pieceCount).fill(0).map((_, index) => <Box key={`${pieceSymbol}-${index}`} width={`${2 * PIECE_SCALE}rem`} height={`${2 * PIECE_SCALE}rem`} sx={{\n      backgroundImage: `url(piece/cardinal/${pieceSymbol}.svg)`,\n      backgroundRepeat: \"no-repeat\"\n    }} />)}\r\n    </Stack>;\n};","import { Color } from \"@/types/enums\";\nimport { Player } from \"@/types/game\";\nimport { Avatar, Grid2 as Grid, Stack, Typography } from \"@mui/material\";\nimport CapturedPieces from \"./capturedPieces\";\nimport { PrimitiveAtom, useAtomValue } from \"jotai\";\nimport { Chess } from \"chess.js\";\nimport { useMemo } from \"react\";\nimport { getPaddedNumber } from \"@/lib/helpers\";\nexport interface Props {\n  player: Player;\n  color: Color;\n  gameAtom: PrimitiveAtom<Chess>;\n}\nexport default function PlayerHeader({\n  color,\n  player,\n  gameAtom\n}: Props) {\n  const game = useAtomValue(gameAtom);\n  const gameFen = game.fen();\n  const clock = useMemo(() => {\n    const turn = game.turn();\n    if (turn === color) {\n      const history = game.history({\n        verbose: true\n      });\n      const previousFen = history.at(-1)?.before;\n      const comment = game.getComments().find(({\n        fen\n      }) => fen === previousFen)?.comment;\n      return getClock(comment);\n    }\n    const comment = game.getComment();\n    return getClock(comment);\n  }, [game, color]);\n  return <Grid container justifyContent=\"space-between\" alignItems=\"center\" size={12} data-sentry-element=\"Grid\" data-sentry-component=\"PlayerHeader\" data-sentry-source-file=\"playerHeader.tsx\">\r\n      <Stack direction=\"row\" data-sentry-element=\"Stack\" data-sentry-source-file=\"playerHeader.tsx\">\r\n        <Avatar src={player.avatarUrl} alt={player.name} variant=\"circular\" sx={{\n        width: 40,\n        height: 40,\n        backgroundColor: color === Color.White ? \"white\" : \"black\",\n        color: color === Color.White ? \"black\" : \"white\",\n        border: \"1px solid black\"\n      }} data-sentry-element=\"Avatar\" data-sentry-source-file=\"playerHeader.tsx\">\r\n          {player.name[0].toUpperCase()}\r\n        </Avatar>\r\n\r\n        <Stack marginLeft={1} data-sentry-element=\"Stack\" data-sentry-source-file=\"playerHeader.tsx\">\r\n          <Stack direction=\"row\" data-sentry-element=\"Stack\" data-sentry-source-file=\"playerHeader.tsx\">\r\n            <Typography fontSize=\"0.9rem\" data-sentry-element=\"Typography\" data-sentry-source-file=\"playerHeader.tsx\">{player.name}</Typography>\r\n\r\n            {player.rating && <Typography marginLeft={0.5} fontSize=\"0.9rem\" fontWeight=\"200\">\r\n                ({player.rating})\r\n              </Typography>}\r\n          </Stack>\r\n\r\n          <CapturedPieces fen={gameFen} color={color} data-sentry-element=\"CapturedPieces\" data-sentry-source-file=\"playerHeader.tsx\" />\r\n        </Stack>\r\n      </Stack>\r\n\r\n      {clock && <Typography align=\"center\" sx={{\n      backgroundColor: color === Color.White ? \"white\" : \"black\",\n      color: color === Color.White ? \"black\" : \"white\"\n    }} borderRadius=\"5px\" padding={0.8} border=\"1px solid #424242\" width=\"5rem\" textAlign=\"right\">\r\n          {clock.hours ? `${clock.hours}:` : \"\"}\r\n          {getPaddedNumber(clock.minutes)}:{getPaddedNumber(clock.seconds)}\r\n          {clock.hours || clock.minutes || clock.seconds > 20 ? \"\" : `.${clock.tenths}`}\r\n        </Typography>}\r\n    </Grid>;\n}\nconst getClock = (comment: string | undefined) => {\n  if (!comment) return undefined;\n  const match = comment.match(/\\[%clk (\\d+):(\\d+):(\\d+)(?:\\.(\\d*))?\\]/);\n  if (!match) return undefined;\n  return {\n    hours: parseInt(match[1]),\n    minutes: parseInt(match[2]),\n    seconds: parseInt(match[3]),\n    tenths: match[4] ? parseInt(match[4]) : 0\n  };\n};","import { Box, Grid2 as Grid } from \"@mui/material\";\nimport { Chessboard } from \"react-chessboard\";\nimport { PrimitiveAtom, atom, useAtomValue, useSetAtom } from \"jotai\";\nimport { Arrow, CustomPieces, CustomSquareRenderer, Piece, PromotionPieceOption, Square } from \"react-chessboard/dist/chessboard/types\";\nimport { useChessActions } from \"@/hooks/useChessActions\";\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport { Color, MoveClassification } from \"@/types/enums\";\nimport { Chess } from \"chess.js\";\nimport { getSquareRenderer } from \"./squareRenderer\";\nimport { CurrentPosition } from \"@/types/eval\";\nimport EvaluationBar from \"./evaluationBar\";\nimport { CLASSIFICATION_COLORS } from \"@/constants\";\nimport { Player } from \"@/types/game\";\nimport PlayerHeader from \"./playerHeader\";\nimport { boardHueAtom, pieceSetAtom } from \"./states\";\nimport tinycolor from \"tinycolor2\";\nexport interface Props {\n  id: string;\n  canPlay?: Color | boolean;\n  gameAtom: PrimitiveAtom<Chess>;\n  boardSize?: number;\n  whitePlayer: Player;\n  blackPlayer: Player;\n  boardOrientation?: Color;\n  currentPositionAtom?: PrimitiveAtom<CurrentPosition>;\n  showBestMoveArrow?: boolean;\n  showPlayerMoveIconAtom?: PrimitiveAtom<boolean>;\n  showEvaluationBar?: boolean;\n}\nexport default function Board({\n  id: boardId,\n  canPlay,\n  gameAtom,\n  boardSize,\n  whitePlayer,\n  blackPlayer,\n  boardOrientation = Color.White,\n  currentPositionAtom = atom({}),\n  showBestMoveArrow = false,\n  showPlayerMoveIconAtom,\n  showEvaluationBar = false\n}: Props) {\n  const boardRef = useRef<HTMLDivElement>(null);\n  const game = useAtomValue(gameAtom);\n  const {\n    playMove\n  } = useChessActions(gameAtom);\n  const clickedSquaresAtom = useMemo(() => atom<Square[]>([]), []);\n  const setClickedSquares = useSetAtom(clickedSquaresAtom);\n  const playableSquaresAtom = useMemo(() => atom<Square[]>([]), []);\n  const setPlayableSquares = useSetAtom(playableSquaresAtom);\n  const position = useAtomValue(currentPositionAtom);\n  const [showPromotionDialog, setShowPromotionDialog] = useState(false);\n  const [moveClickFrom, setMoveClickFrom] = useState<Square | null>(null);\n  const [moveClickTo, setMoveClickTo] = useState<Square | null>(null);\n  const pieceSet = useAtomValue(pieceSetAtom);\n  const boardHue = useAtomValue(boardHueAtom);\n  const gameFen = game.fen();\n  useEffect(() => {\n    setClickedSquares([]);\n  }, [gameFen, setClickedSquares]);\n  const isPiecePlayable = useCallback(({\n    piece\n  }: {\n    piece: string;\n  }): boolean => {\n    if (game.isGameOver() || !canPlay) return false;\n    if (canPlay === true || canPlay === piece[0]) return true;\n    return false;\n  }, [canPlay, game]);\n  const onPieceDrop = useCallback((source: Square, target: Square, piece: string): boolean => {\n    if (!isPiecePlayable({\n      piece\n    })) return false;\n    const result = playMove({\n      from: source,\n      to: target,\n      promotion: piece[1]?.toLowerCase() ?? \"q\"\n    });\n    return !!result;\n  }, [isPiecePlayable, playMove]);\n  const resetMoveClick = useCallback((square?: Square | null) => {\n    setMoveClickFrom(square ?? null);\n    setMoveClickTo(null);\n    setShowPromotionDialog(false);\n    if (square) {\n      const moves = game.moves({\n        square,\n        verbose: true\n      });\n      setPlayableSquares(moves.map(m => m.to));\n    } else {\n      setPlayableSquares([]);\n    }\n  }, [setMoveClickFrom, setMoveClickTo, setPlayableSquares, game]);\n  const handleSquareLeftClick = useCallback((square: Square, piece?: string) => {\n    setClickedSquares([]);\n    if (!moveClickFrom) {\n      if (piece && !isPiecePlayable({\n        piece\n      })) return;\n      resetMoveClick(square);\n      return;\n    }\n    const validMoves = game.moves({\n      square: moveClickFrom,\n      verbose: true\n    });\n    const move = validMoves.find(m => m.to === square);\n    if (!move) {\n      resetMoveClick(square);\n      return;\n    }\n    setMoveClickTo(square);\n    if (move.piece === \"p\" && (move.color === \"w\" && square[1] === \"8\" || move.color === \"b\" && square[1] === \"1\")) {\n      setShowPromotionDialog(true);\n      return;\n    }\n    const result = playMove({\n      from: moveClickFrom,\n      to: square\n    });\n    resetMoveClick(result ? undefined : square);\n  }, [game, isPiecePlayable, moveClickFrom, playMove, resetMoveClick, setClickedSquares]);\n  const handleSquareRightClick = useCallback((square: Square) => {\n    setClickedSquares(prev => prev.includes(square) ? prev.filter(s => s !== square) : [...prev, square]);\n  }, [setClickedSquares]);\n  const handlePieceDragBegin = useCallback((_: string, square: Square) => {\n    resetMoveClick(square);\n  }, [resetMoveClick]);\n  const handlePieceDragEnd = useCallback(() => {\n    resetMoveClick();\n  }, [resetMoveClick]);\n  const onPromotionPieceSelect = useCallback((piece?: PromotionPieceOption, from?: Square, to?: Square) => {\n    if (!piece) return false;\n    const promotionPiece = piece[1]?.toLowerCase() ?? \"q\";\n    if (moveClickFrom && moveClickTo) {\n      const result = playMove({\n        from: moveClickFrom,\n        to: moveClickTo,\n        promotion: promotionPiece\n      });\n      resetMoveClick();\n      return !!result;\n    }\n    if (from && to) {\n      const result = playMove({\n        from,\n        to,\n        promotion: promotionPiece\n      });\n      resetMoveClick();\n      return !!result;\n    }\n    resetMoveClick(moveClickFrom);\n    return false;\n  }, [moveClickFrom, moveClickTo, playMove, resetMoveClick]);\n  const customArrows: Arrow[] = useMemo(() => {\n    const bestMove = position?.lastEval?.bestMove;\n    const moveClassification = position?.eval?.moveClassification;\n    if (bestMove && showBestMoveArrow && moveClassification !== MoveClassification.Best && moveClassification !== MoveClassification.Opening && moveClassification !== MoveClassification.Forced && moveClassification !== MoveClassification.Perfect) {\n      const bestMoveArrow = [bestMove.slice(0, 2), bestMove.slice(2, 4), tinycolor(CLASSIFICATION_COLORS[MoveClassification.Best]).spin(-boardHue).toHexString()] as Arrow;\n      return [bestMoveArrow];\n    }\n    return [];\n  }, [position, showBestMoveArrow, boardHue]);\n  const SquareRenderer: CustomSquareRenderer = useMemo(() => {\n    return getSquareRenderer({\n      currentPositionAtom: currentPositionAtom,\n      clickedSquaresAtom,\n      playableSquaresAtom,\n      showPlayerMoveIconAtom,\n      boardSize: boardSize || 400\n    });\n  }, [currentPositionAtom, clickedSquaresAtom, playableSquaresAtom, showPlayerMoveIconAtom, boardSize]);\n  const customPieces = useMemo(() => PIECE_CODES.reduce<CustomPieces>((acc, piece) => {\n    acc[piece] = ({\n      squareWidth\n    }) => <Box width={squareWidth} height={squareWidth} sx={{\n      backgroundImage: `url(piece/${pieceSet}/${piece}.svg)`,\n      backgroundSize: \"contain\"\n    }} />;\n    return acc;\n  }, {}), [pieceSet]);\n  const customBoardStyle = useMemo(() => {\n    const commonBoardStyle = {\n      borderRadius: \"5px\",\n      boxShadow: \"0 2px 10px rgba(0, 0, 0, 0.5)\"\n    };\n    if (boardHue) {\n      return {\n        ...commonBoardStyle,\n        filter: `hue-rotate(${boardHue}deg)`\n      };\n    }\n    return commonBoardStyle;\n  }, [boardHue]);\n  return <Grid container justifyContent=\"center\" alignItems=\"center\" wrap=\"nowrap\" width={boardSize} data-sentry-element=\"Grid\" data-sentry-component=\"Board\" data-sentry-source-file=\"index.tsx\">\r\n      {showEvaluationBar && <EvaluationBar height={boardRef?.current?.offsetHeight || boardSize || 400} boardOrientation={boardOrientation} currentPositionAtom={currentPositionAtom} />}\r\n\r\n      <Grid container rowGap={1.5} justifyContent=\"center\" alignItems=\"center\" paddingLeft={{\n      xs: 0.5,\n      sm: showEvaluationBar ? 2 : 0\n    }} size=\"grow\" data-sentry-element=\"Grid\" data-sentry-source-file=\"index.tsx\">\r\n        <PlayerHeader color={boardOrientation === Color.White ? Color.Black : Color.White} gameAtom={gameAtom} player={boardOrientation === Color.White ? blackPlayer : whitePlayer} data-sentry-element=\"PlayerHeader\" data-sentry-source-file=\"index.tsx\" />\r\n\r\n        <Grid container justifyContent=\"center\" alignItems=\"center\" ref={boardRef} size={12} data-sentry-element=\"Grid\" data-sentry-source-file=\"index.tsx\">\r\n          <Chessboard id={`${boardId}-${canPlay}`} position={gameFen} onPieceDrop={onPieceDrop} boardOrientation={boardOrientation === Color.White ? \"white\" : \"black\"} customBoardStyle={customBoardStyle} customArrows={customArrows} isDraggablePiece={isPiecePlayable} customSquare={SquareRenderer} onSquareClick={handleSquareLeftClick} onSquareRightClick={handleSquareRightClick} onPieceDragBegin={handlePieceDragBegin} onPieceDragEnd={handlePieceDragEnd} onPromotionPieceSelect={onPromotionPieceSelect} showPromotionDialog={showPromotionDialog} promotionToSquare={moveClickTo} animationDuration={200} customPieces={customPieces} data-sentry-element=\"Chessboard\" data-sentry-source-file=\"index.tsx\" />\r\n        </Grid>\r\n\r\n        <PlayerHeader color={boardOrientation} gameAtom={gameAtom} player={boardOrientation === Color.White ? whitePlayer : blackPlayer} data-sentry-element=\"PlayerHeader\" data-sentry-source-file=\"index.tsx\" />\r\n      </Grid>\r\n    </Grid>;\n}\nexport const PIECE_CODES = [\"wP\", \"wB\", \"wN\", \"wR\", \"wQ\", \"wK\", \"bP\", \"bB\", \"bN\", \"bR\", \"bQ\", \"bK\"] as const satisfies Piece[];","import { FirebaseOptions, initializeApp } from \"firebase/app\";\r\nimport { getAnalytics, isSupported, logEvent } from \"firebase/analytics\";\r\n\r\nconst firebaseConfig: FirebaseOptions | undefined = process.env\r\n  .NEXT_PUBLIC_FIREBASE_PROJECT_ID\r\n  ? {\r\n      apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\r\n      authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\r\n      projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\r\n      storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\r\n      messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\r\n      appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\r\n      measurementId: process.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID,\r\n    }\r\n  : undefined;\r\n\r\nconst app = firebaseConfig ? initializeApp(firebaseConfig) : undefined;\r\n\r\nisSupported().then((supported) => {\r\n  if (supported && app) {\r\n    getAnalytics(app);\r\n  }\r\n});\r\n\r\nexport const logAnalyticsEvent = async (\r\n  eventName: string,\r\n  eventParams?: Record<string, unknown>\r\n) => {\r\n  if (window.location.hostname === \"localhost\") return;\r\n\r\n  const supported = await isSupported();\r\n  if (!supported || !app) return;\r\n\r\n  const analytics = getAnalytics(app);\r\n  logEvent(analytics, eventName, eventParams);\r\n};\r\n","import { Icon } from \"@iconify/react\";\nimport { ClickAwayListener, Grid2 as Grid, IconButton, Slider as MuiSlider, Popover, Stack, styled, Typography, TypographyProps } from \"@mui/material\";\nimport { MouseEvent, useState } from \"react\";\nexport interface Props {\n  value: number;\n  setValue: (value: number) => void;\n  min: number;\n  max: number;\n  label: string;\n  size?: number;\n  marksFilter?: number;\n  step?: number;\n  infoContent?: TypographyProps[\"children\"];\n}\nexport default function Slider({\n  min,\n  max,\n  label,\n  value,\n  setValue,\n  size,\n  marksFilter,\n  step = 1,\n  infoContent\n}: Props) {\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n  const handleOpenPopover = (event: MouseEvent<HTMLElement>) => {\n    setAnchorEl(event.currentTarget);\n  };\n  const handleClosePopover = () => {\n    setAnchorEl(null);\n  };\n  return <Grid container justifyContent=\"center\" alignItems=\"center\" size={size ?? 11} data-sentry-element=\"Grid\" data-sentry-component=\"Slider\" data-sentry-source-file=\"slider.tsx\">\r\n      <Stack direction=\"row\" width=\"100%\" data-sentry-element=\"Stack\" data-sentry-source-file=\"slider.tsx\">\r\n        <Typography id={`input-${label}`} variant=\"body2\" data-sentry-element=\"Typography\" data-sentry-source-file=\"slider.tsx\">\r\n          {step === 1 && marksFilter ? label : `${label}: ${value}`}\r\n        </Typography>\r\n\r\n        {!!infoContent && <>\r\n            <ClickAwayListener onClickAway={handleClosePopover}>\r\n              <IconButton size=\"medium\" aria-owns={anchorEl ? \"mouse-over-popover\" : undefined} aria-haspopup=\"true\" onClick={handleOpenPopover} onMouseEnter={handleOpenPopover} onMouseLeave={handleClosePopover} sx={{\n            ml: 1,\n            padding: 0\n          }} aria-label=\"Help about number of threads\">\r\n                <Icon icon=\"mdi:info-outline\" width=\"1.1rem\" />\r\n              </IconButton>\r\n            </ClickAwayListener>\r\n\r\n            <Popover id=\"mouse-over-popover\" open={!!anchorEl} anchorEl={anchorEl} onClose={handleClosePopover} anchorOrigin={{\n          vertical: \"bottom\",\n          horizontal: \"center\"\n        }} transformOrigin={{\n          vertical: \"top\",\n          horizontal: \"center\"\n        }} sx={{\n          pointerEvents: \"none\"\n        }} disableRestoreFocus>\r\n              <Typography variant=\"body2\" sx={{\n            padding: 2,\n            maxWidth: 500\n          }}>\r\n                {infoContent}\r\n              </Typography>\r\n            </Popover>\r\n          </>}\r\n      </Stack>\r\n\r\n      <CustomSlider min={min} max={max} marks={marksFilter ? Array.from({\n      length: max - min + 1\n    }, (_, i) => ({\n      value: i + min,\n      label: `${i + min}`\n    })).filter((_, i) => i % marksFilter === 0) : undefined} step={step} valueLabelDisplay=\"off\" value={value} onChange={(_, value) => setValue(value as number)} aria-labelledby={`input-${label}`} data-sentry-element=\"CustomSlider\" data-sentry-source-file=\"slider.tsx\" />\r\n    </Grid>;\n}\nconst CustomSlider = styled(MuiSlider)(() => ({\n  \".MuiSlider-markLabel\": {\n    fontSize: \"0.8rem\",\n    lineHeight: \"0.8rem\"\n  },\n  \".MuiSlider-thumb\": {\n    width: \"18px\",\n    height: \"18px\"\n  },\n  marginBottom: \"1rem\"\n}));","import { Chess } from \"chess.js\";\r\nimport { PrimitiveAtom, useAtomValue } from \"jotai\";\r\nimport { useGameDatabase } from \"./useGameDatabase\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { getChessComUserAvatar } from \"@/lib/chessCom\";\r\nimport { Player } from \"@/types/game\";\r\n\r\nexport const usePlayersData = (\r\n  gameAtom: PrimitiveAtom<Chess>\r\n): { white: Player; black: Player } => {\r\n  const game = useAtomValue(gameAtom);\r\n  const { gameFromUrl } = useGameDatabase();\r\n  const headers = game.getHeaders();\r\n\r\n  const headersWhiteName =\r\n    headers.White && headers.White !== \"?\" ? headers.White : undefined;\r\n  const headersBlackName =\r\n    headers.Black && headers.Black !== \"?\" ? headers.Black : undefined;\r\n\r\n  const whiteName = gameFromUrl?.white?.name || headersWhiteName || \"White\";\r\n  const blackName = gameFromUrl?.black?.name || headersBlackName || \"Black\";\r\n\r\n  const whiteElo =\r\n    gameFromUrl?.white?.rating || Number(headers.WhiteElo) || undefined;\r\n  const blackElo =\r\n    gameFromUrl?.black?.rating || Number(headers.BlackElo) || undefined;\r\n\r\n  const siteHeader = gameFromUrl?.site || headers.Site || \"unknown\";\r\n  const isChessCom = siteHeader.toLowerCase().includes(\"chess.com\");\r\n\r\n  const whiteAvatarUrl = usePlayerAvatarUrl(\r\n    whiteName,\r\n    isChessCom && !!whiteName && whiteName !== \"White\"\r\n  );\r\n\r\n  const blackAvatarUrl = usePlayerAvatarUrl(\r\n    blackName,\r\n    isChessCom && !!blackName && blackName !== \"Black\"\r\n  );\r\n\r\n  return {\r\n    white: {\r\n      name: whiteName,\r\n      rating: whiteElo,\r\n      avatarUrl: whiteAvatarUrl ?? undefined,\r\n    },\r\n    black: {\r\n      name: blackName,\r\n      rating: blackElo,\r\n      avatarUrl: blackAvatarUrl ?? undefined,\r\n    },\r\n  };\r\n};\r\n\r\nconst usePlayerAvatarUrl = (\r\n  playerName: string,\r\n  enabled: boolean\r\n): string | null | undefined => {\r\n  const { data: avatarUrl } = useQuery({\r\n    queryKey: [\"CCAvatar\", playerName],\r\n    enabled,\r\n    queryFn: () => getChessComUserAvatar(playerName),\r\n    staleTime: 1000 * 60 * 60, // 1 hour\r\n    gcTime: 1000 * 60 * 60 * 24, // 1 day\r\n  });\r\n\r\n  return avatarUrl;\r\n};\r\n","import { useEffect, useState } from \"react\";\r\n\r\nexport const useScreenSize = () => {\r\n  const [screenSize, setScreenSize] = useState({\r\n    width: document?.querySelector(\".MuiGrid2-root\")?.clientWidth ?? 500,\r\n    height: window ? window.innerHeight - 120 : 500,\r\n  });\r\n\r\n  useEffect(() => {\r\n    const mainDiv = document?.querySelector(\".MuiGrid2-root\");\r\n    if (!mainDiv) return;\r\n\r\n    const observer = new ResizeObserver(() =>\r\n      setScreenSize((prev) => ({ ...prev, width: mainDiv.clientWidth }))\r\n    );\r\n    observer.observe(mainDiv);\r\n\r\n    return () => {\r\n      observer.disconnect();\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      setScreenSize((prev) => ({\r\n        ...prev,\r\n        height: window.innerHeight - 100,\r\n      }));\r\n    };\r\n\r\n    window.addEventListener(\"resize\", handleResize);\r\n\r\n    return () => {\r\n      window.removeEventListener(\"resize\", handleResize);\r\n    };\r\n  }, []);\r\n\r\n  return screenSize;\r\n};\r\n","import { Move } from \"chess.js\";\r\n\r\nlet audioContext: AudioContext | null = null;\r\nlet timeout: NodeJS.Timeout | null = null;\r\nconst soundsCache = new Map<string, AudioBuffer>();\r\n\r\ntype Sound = \"move\" | \"capture\" | \"illegalMove\";\r\nconst soundUrls: Record<Sound, string> = {\r\n  move: \"sounds/move.mp3\",\r\n  capture: \"sounds/capture.mp3\",\r\n  illegalMove: \"sounds/error.mp3\",\r\n};\r\nexport const play = async (sound: Sound) => {\r\n  if (timeout) clearTimeout(timeout);\r\n\r\n  timeout = setTimeout(async () => {\r\n    if (!audioContext) audioContext = new AudioContext();\r\n    if (audioContext.state === \"suspended\") await audioContext.resume();\r\n\r\n    let audioBuffer = soundsCache.get(soundUrls[sound]);\r\n    if (!audioBuffer) {\r\n      const res = await fetch(soundUrls[sound]);\r\n      const buffer = await audioContext.decodeAudioData(\r\n        await res.arrayBuffer()\r\n      );\r\n      audioBuffer = buffer;\r\n      soundsCache.set(soundUrls[sound], buffer);\r\n    }\r\n\r\n    const audioSrc = audioContext.createBufferSource();\r\n    audioSrc.buffer = audioBuffer;\r\n    const volume = audioContext.createGain();\r\n    volume.gain.value = 0.3;\r\n    audioSrc.connect(volume);\r\n    volume.connect(audioContext.destination);\r\n    audioSrc.start();\r\n  }, 1);\r\n};\r\n\r\nexport const playCaptureSound = () => play(\"capture\");\r\nexport const playIllegalMoveSound = () => play(\"illegalMove\");\r\nexport const playMoveSound = () => play(\"move\");\r\n\r\nexport const playSoundFromMove = (move: Move | null) => {\r\n  if (!move) return playIllegalMoveSound();\r\n  if (move.captured) return playCaptureSound();\r\n  return playMoveSound();\r\n};\r\n","import { getGameFromPgn, setGameHeaders } from \"@/lib/chess\";\r\nimport { playIllegalMoveSound, playSoundFromMove } from \"@/lib/sounds\";\r\nimport { Player } from \"@/types/game\";\r\nimport { Chess, Move, DEFAULT_POSITION } from \"chess.js\";\r\nimport { PrimitiveAtom, useAtom } from \"jotai\";\r\nimport { useCallback } from \"react\";\r\n\r\nexport interface resetGameParams {\r\n  fen?: string;\r\n  white?: Player;\r\n  black?: Player;\r\n  noHeaders?: boolean;\r\n}\r\n\r\nexport const useChessActions = (chessAtom: PrimitiveAtom<Chess>) => {\r\n  const [game, setGame] = useAtom(chessAtom);\r\n\r\n  const setPgn = useCallback(\r\n    (pgn: string) => {\r\n      const newGame = new Chess();\r\n      newGame.loadPgn(pgn);\r\n      setGame(newGame);\r\n    },\r\n    [setGame]\r\n  );\r\n\r\n  const reset = useCallback(\r\n    (params?: resetGameParams) => {\r\n      const newGame = new Chess(params?.fen);\r\n      if (!params?.noHeaders) setGameHeaders(newGame, params);\r\n      setGame(newGame);\r\n    },\r\n    [setGame]\r\n  );\r\n\r\n  const copyGame = useCallback(() => {\r\n    const newGame = new Chess();\r\n\r\n    if (game.history().length === 0) {\r\n      const pgnSplitted = game.pgn().split(\"]\");\r\n      if (\r\n        [\"1-0\", \"0-1\", \"1/2-1/2\", \"*\"].includes(\r\n          pgnSplitted.at(-1)?.trim() ?? \"\"\r\n        )\r\n      ) {\r\n        newGame.loadPgn(pgnSplitted.slice(0, -1).join(\"]\") + \"]\");\r\n        return newGame;\r\n      }\r\n    }\r\n\r\n    newGame.loadPgn(game.pgn());\r\n    return newGame;\r\n  }, [game]);\r\n\r\n  const resetToStartingPosition = useCallback(\r\n    (pgn?: string) => {\r\n      const newGame = pgn ? getGameFromPgn(pgn) : copyGame();\r\n      newGame.load(newGame.getHeaders().FEN || DEFAULT_POSITION, {\r\n        preserveHeaders: true,\r\n      });\r\n      setGame(newGame);\r\n    },\r\n    [copyGame, setGame]\r\n  );\r\n\r\n  const playMove = useCallback(\r\n    (params: {\r\n      from: string;\r\n      to: string;\r\n      promotion?: string;\r\n      comment?: string;\r\n    }): Move | null => {\r\n      const newGame = copyGame();\r\n\r\n      try {\r\n        const { comment, ...move } = params;\r\n        const result = newGame.move(move);\r\n        if (comment) newGame.setComment(comment);\r\n\r\n        setGame(newGame);\r\n        playSoundFromMove(result);\r\n        return result;\r\n      } catch {\r\n        playIllegalMoveSound();\r\n        return null;\r\n      }\r\n    },\r\n    [copyGame, setGame]\r\n  );\r\n\r\n  const addMoves = useCallback(\r\n    (moves: string[]) => {\r\n      const newGame = copyGame();\r\n\r\n      let lastMove: Move | null = null;\r\n      for (const move of moves) {\r\n        lastMove = newGame.move(move);\r\n      }\r\n      setGame(newGame);\r\n      if (lastMove) playSoundFromMove(lastMove);\r\n    },\r\n    [copyGame, setGame]\r\n  );\r\n\r\n  const undoMove = useCallback(() => {\r\n    const newGame = copyGame();\r\n    const move = newGame.undo();\r\n    if (move) playSoundFromMove(move);\r\n    setGame(newGame);\r\n  }, [copyGame, setGame]);\r\n\r\n  const goToMove = useCallback(\r\n    (moveIdx: number, fullGame: Chess) => {\r\n      if (moveIdx < 0) return;\r\n\r\n      const newGame = new Chess();\r\n      newGame.loadPgn(fullGame.pgn());\r\n\r\n      const movesNb = fullGame.history().length;\r\n      if (moveIdx > movesNb) return;\r\n\r\n      let lastMove: Move | null = {} as Move;\r\n      for (let i = movesNb; i > moveIdx; i--) {\r\n        lastMove = newGame.undo();\r\n      }\r\n\r\n      setGame(newGame);\r\n      playSoundFromMove(lastMove);\r\n    },\r\n    [setGame]\r\n  );\r\n\r\n  return {\r\n    setPgn,\r\n    reset,\r\n    playMove,\r\n    undoMove,\r\n    goToMove,\r\n    resetToStartingPosition,\r\n    addMoves,\r\n  };\r\n};\r\n","import { isWasmSupported } from \"@/lib/engine/shared\";\r\nimport { Stockfish11 } from \"@/lib/engine/stockfish11\";\r\nimport { Stockfish16 } from \"@/lib/engine/stockfish16\";\r\nimport { Stockfish16_1 } from \"@/lib/engine/stockfish16_1\";\r\nimport { Stockfish17 } from \"@/lib/engine/stockfish17\";\r\nimport { Stockfish17_1 } from \"@/lib/engine/stockfish17_1\";\r\nimport { UciEngine } from \"@/lib/engine/uciEngine\";\r\nimport { EngineName } from \"@/types/enums\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nexport const useEngine = (engineName: EngineName | undefined) => {\r\n  const [engine, setEngine] = useState<UciEngine | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (!engineName) return;\r\n\r\n    if (engineName !== EngineName.Stockfish11 && !isWasmSupported()) {\r\n      return;\r\n    }\r\n\r\n    pickEngine(engineName).then((newEngine) => {\r\n      setEngine((prev) => {\r\n        prev?.shutdown();\r\n        return newEngine;\r\n      });\r\n    });\r\n  }, [engineName]);\r\n\r\n  return engine;\r\n};\r\n\r\nconst pickEngine = (engine: EngineName): Promise<UciEngine> => {\r\n  switch (engine) {\r\n    case EngineName.Stockfish17_1:\r\n      return Stockfish17_1.create(false);\r\n    case EngineName.Stockfish17_1Lite:\r\n      return Stockfish17_1.create(true);\r\n    case EngineName.Stockfish17:\r\n      return Stockfish17.create(false);\r\n    case EngineName.Stockfish17Lite:\r\n      return Stockfish17.create(true);\r\n    case EngineName.Stockfish16_1:\r\n      return Stockfish16_1.create(false);\r\n    case EngineName.Stockfish16_1Lite:\r\n      return Stockfish16_1.create(true);\r\n    case EngineName.Stockfish16:\r\n      return Stockfish16.create(false);\r\n    case EngineName.Stockfish16NNUE:\r\n      return Stockfish16.create(true);\r\n    case EngineName.Stockfish11:\r\n      return Stockfish11.create();\r\n  }\r\n};\r\n","import { PrimitiveAtom, SetStateAction, useAtom } from \"jotai\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nexport function useAtomLocalStorage<T>(\r\n  key: string,\r\n  atom: PrimitiveAtom<T>\r\n): [T, (value: SetStateAction<T>) => void] {\r\n  const [keyTemp, setKeyTemp] = useState(\"\");\r\n  const [storedValue, setStoredValue] = useAtom(atom);\r\n\r\n  useEffect(() => {\r\n    setKeyTemp(key);\r\n    const item = window.localStorage.getItem(key);\r\n    if (!item) return;\r\n    const value = parseJSON<T>(item);\r\n    if (value) setStoredValue(value);\r\n  }, [key, setStoredValue]);\r\n\r\n  useEffect(() => {\r\n    if (keyTemp !== key) return;\r\n    window.localStorage.setItem(key, JSON.stringify(storedValue));\r\n  }, [key, keyTemp, storedValue]);\r\n\r\n  return [storedValue, setStoredValue];\r\n}\r\n\r\nfunction parseJSON<T>(value: string): T | undefined {\r\n  return value === \"undefined\" ? undefined : JSON.parse(value);\r\n}\r\n"],"names":["pieceSetAtom","atomWithStorage","rightClickSquareStyle","position","width","height","backgroundColor","opacity","playableSquareStyles","padding","backgroundClip","borderRadius","boxSizing","previousMoveSquareStyle","moveClassification","CLASSIFICATION_COLORS","EvaluationBar","boardOrientation","currentPositionAtom","atom","evalBar","setEvalBar","useState","whiteBarPercentage","label","useAtomValue","useEffect","bestLine","eval","lines","depth","getEvaluationBarValue","Grid","container","justifyContent","alignItems","xs","sm","border","data-sentry-element","data-sentry-component","data-sentry-source-file","Box","sx","Color","White","transition","Typography","color","textAlign","fontSize","Black","display","CapturedPieces","fen","piecesComponents","useMemo","getCapturedPieces","map","piece","count","getCapturedPiecesComponents","materialDiff","getMaterialDifference","spacing","size","marginLeft","PIECE_SCALE","Stack","direction","lineHeight","pieceSymbol","pieceCount","Array","fill","_","index","backgroundImage","backgroundRepeat","PlayerHeader","player","gameAtom","game","gameFen","clock","turn","history","previousFen","verbose","at","before","getClock","comment","getComments","find","getComment","Avatar","src","avatarUrl","alt","name","variant","toUpperCase","rating","fontWeight","align","hours","getPaddedNumber","minutes","seconds","tenths","match","undefined","parseInt","Board","boardRef","id","boardId","canPlay","boardSize","whitePlayer","blackPlayer","showBestMoveArrow","showPlayerMoveIconAtom","showEvaluationBar","useRef","playMove","useChessActions","clickedSquaresAtom","setClickedSquares","useSetAtom","playableSquaresAtom","setPlayableSquares","showPromotionDialog","setShowPromotionDialog","moveClickFrom","setMoveClickFrom","moveClickTo","setMoveClickTo","pieceSet","boardHue","boardHueAtom","isPiecePlayable","useCallback","isGameOver","onPieceDrop","source","target","from","to","promotion","toLowerCase","resetMoveClick","square","moves","m","handleSquareLeftClick","move","handleSquareRightClick","prev","includes","filter","s","handlePieceDragBegin","handlePieceDragEnd","onPromotionPieceSelect","promotionPiece","result","customArrows","bestMove","lastEval","MoveClassification","Best","Opening","Forced","Perfect","slice","tinycolor","spin","toHexString","SquareRenderer","getSquareRenderer","squareRenderer","forwardRef","props","ref","children","style","showPlayerMoveIcon","clickedSquares","playableSquares","fromSquare","lastMove","toSquare","highlightSquareStyle","playableSquareStyle","div","Image","Math","min","top","max","right","zIndex","displayName","customPieces","PIECE_CODES","reduce","acc","squareWidth","backgroundSize","customBoardStyle","commonBoardStyle","boxShadow","wrap","current","offsetHeight","rowGap","paddingLeft","Chessboard","isDraggablePiece","customSquare","onSquareClick","onSquareRightClick","onPieceDragBegin","onPieceDragEnd","promotionToSquare","animationDuration","firebaseConfig","process","env","NEXT_PUBLIC_FIREBASE_PROJECT_ID","apiKey","NEXT_PUBLIC_FIREBASE_API_KEY","authDomain","NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN","projectId","storageBucket","NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET","messagingSenderId","NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID","appId","NEXT_PUBLIC_FIREBASE_APP_ID","measurementId","NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID","app","initializeApp","isSupported","then","supported","getAnalytics","logAnalyticsEvent","eventName","eventParams","window","location","hostname","analytics","logEvent","Slider","value","setValue","marksFilter","step","infoContent","anchorEl","setAnchorEl","handleOpenPopover","event","currentTarget","handleClosePopover","ClickAwayListener","onClickAway","IconButton","aria-owns","aria-haspopup","onClick","onMouseEnter","onMouseLeave","ml","aria-label","Icon","icon","Popover","open","onClose","anchorOrigin","vertical","horizontal","transformOrigin","pointerEvents","disableRestoreFocus","maxWidth","CustomSlider","marks","length","i","valueLabelDisplay","onChange","aria-labelledby","styled","MuiSlider","marginBottom","usePlayersData","gameFromUrl","useGameDatabase","headers","getHeaders","headersWhiteName","headersBlackName","whiteName","white","blackName","black","whiteElo","Number","WhiteElo","blackElo","BlackElo","isChessCom","site","Site","whiteAvatarUrl","usePlayerAvatarUrl","blackAvatarUrl","playerName","enabled","data","useQuery","queryKey","queryFn","getChessComUserAvatar","staleTime","gcTime","useScreenSize","document","screenSize","setScreenSize","querySelector","clientWidth","innerHeight","mainDiv","observer","ResizeObserver","observe","disconnect","handleResize","addEventListener","removeEventListener","audioContext","timeout","soundsCache","Map","soundUrls","capture","illegalMove","play","sound","clearTimeout","setTimeout","AudioContext","state","resume","audioBuffer","get","res","fetch","buffer","decodeAudioData","arrayBuffer","set","audioSrc","createBufferSource","volume","createGain","gain","connect","destination","start","playCaptureSound","playMoveSound","playIllegalMoveSound","setGame","useAtom","chessAtom","setPgn","pgn","newGame","Chess","loadPgn","reset","params","noHeaders","setGameHeaders","copyGame","pgnSplitted","split","trim","join","resetToStartingPosition","getGameFromPgn","load","FEN","DEFAULT_POSITION","preserveHeaders","setComment","playSoundFromMove","addMoves","undoMove","undo","goToMove","moveIdx","fullGame","movesNb","useEngine","engine","setEngine","engineName","EngineName","Stockfish11","isWasmSupported","pickEngine","shutdown","newEngine","Stockfish17_1","create","Stockfish17_1Lite","Stockfish17","Stockfish17Lite","Stockfish16_1","Stockfish16_1Lite","Stockfish16","Stockfish16NNUE","useAtomLocalStorage","key","keyTemp","setKeyTemp","storedValue","setStoredValue","item","localStorage","getItem","parseJSON","JSON","parse","setItem","stringify"],"sourceRoot":""}