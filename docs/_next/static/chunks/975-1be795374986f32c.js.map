{"version":3,"file":"static/chunks/975-1be795374986f32c.js","mappings":"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","sources":["webpack://_N_E/./src/components/board/states.ts","webpack://_N_E/./src/components/board/endIcon.tsx","webpack://_N_E/./src/components/board/squareRenderer.tsx","webpack://_N_E/./src/components/board/evaluationBar.tsx","webpack://_N_E/./src/components/board/capturedPieces.tsx","webpack://_N_E/./src/components/board/playerHeader.tsx","webpack://_N_E/./src/components/board/index.tsx","webpack://_N_E/./src/lib/firebase.ts","webpack://_N_E/./src/components/slider.tsx","webpack://_N_E/./src/hooks/usePlayersData.ts","webpack://_N_E/./src/hooks/useScreenSize.ts","webpack://_N_E/./src/lib/sounds.ts","webpack://_N_E/./src/hooks/useChessActions.ts","webpack://_N_E/./src/hooks/useEngine.ts","webpack://_N_E/./src/hooks/useAtomLocalStorage.ts"],"sourcesContent":["import { PIECE_SETS } from \"@/constants\";\r\nimport { atomWithStorage } from \"jotai/utils\";\r\n\r\nexport const pieceSetAtom = atomWithStorage<(typeof PIECE_SETS)[number]>(\r\n  \"pieceSet\",\r\n  \"merida\"\r\n);\r\nexport const boardHueAtom = atomWithStorage(\"boardHue\", 185);\r\n","import Image from \"next/image\";\ninterface Props {\n  backgroundColor: string;\n  boardSize: number;\n  iconSrc: string;\n}\nexport default function EndIcon(props: Props) {\n  return <>\r\n        {/*background layer */}\r\n        <div className=\"fade-out-bg\" style={{\n      position: \"absolute\",\n      inset: 0,\n      // fills the entire square\n      backgroundColor: props.backgroundColor,\n      zIndex: 90\n    }} />\r\n\r\n        {/* Checkmate icon */}\r\n        <Image className=\"move-up-right-shrink\" src={props.iconSrc} alt=\"end icon\" width={props.boardSize / 8} height={props.boardSize / 8} style={{\n      position: \"absolute\",\n      zIndex: 100\n    }} data-sentry-element=\"Image\" data-sentry-source-file=\"endIcon.tsx\" />\r\n    </>;\n}","import { CurrentPosition } from \"@/types/eval\";\nimport { MoveClassification } from \"@/types/enums\";\nimport { PrimitiveAtom, atom, useAtomValue } from \"jotai\";\nimport Image from \"next/image\";\nimport { CSSProperties, forwardRef, useMemo } from \"react\";\nimport { CustomSquareProps, Square } from \"react-chessboard/dist/chessboard/types\";\nimport { CLASSIFICATION_COLORS } from \"@/constants\";\nimport { boardHueAtom } from \"./states\";\n\n//For game end markers\nimport { boardAtom } from \"@/sections/analysis/states\";\nimport { Color } from \"@/types/enums\";\nimport EndIcon from \"./endIcon\";\nexport interface Props {\n  currentPositionAtom: PrimitiveAtom<CurrentPosition>;\n  clickedSquaresAtom: PrimitiveAtom<Square[]>;\n  playableSquaresAtom: PrimitiveAtom<Square[]>;\n  showPlayerMoveIconAtom?: PrimitiveAtom<boolean>;\n  boardSize: number;\n}\nexport function getSquareRenderer({\n  currentPositionAtom,\n  clickedSquaresAtom,\n  playableSquaresAtom,\n  showPlayerMoveIconAtom = atom(false),\n  boardSize\n}: Props) {\n  const squareRenderer = forwardRef<HTMLDivElement, CustomSquareProps>((props, ref) => {\n    const {\n      children,\n      square,\n      style\n    } = props;\n    const showPlayerMoveIcon = useAtomValue(showPlayerMoveIconAtom);\n    const position = useAtomValue(currentPositionAtom);\n    const clickedSquares = useAtomValue(clickedSquaresAtom);\n    const playableSquares = useAtomValue(playableSquaresAtom);\n    const boardHue = useAtomValue(boardHueAtom);\n    const fromSquare = position.lastMove?.from;\n    const toSquare = position.lastMove?.to;\n    const moveClassification = position?.eval?.moveClassification;\n    const board = useAtomValue(boardAtom);\n    const highlightSquareStyle: CSSProperties | undefined = useMemo(() => clickedSquares.includes(square) ? rightClickSquareStyle : fromSquare === square || toSquare === square ? previousMoveSquareStyle(moveClassification) : undefined, [clickedSquares, square, fromSquare, toSquare, moveClassification]);\n    const playableSquareStyle: CSSProperties | undefined = useMemo(() => playableSquares.includes(square) ? playableSquareStyles : undefined, [playableSquares, square]);\n    const whiteKing: Square = board.findPiece({\n      color: \"w\",\n      type: \"k\"\n    })[0];\n    const blackKing: Square = board.findPiece({\n      color: \"b\",\n      type: \"k\"\n    })[0];\n    return <div ref={ref} style={{\n      ...style,\n      position: \"relative\",\n      filter: boardHue ? `hue-rotate(-${boardHue}deg)` : undefined\n    }}>\r\n          {children}\r\n          {highlightSquareStyle && <div style={highlightSquareStyle} />}\r\n          {playableSquareStyle && <div style={playableSquareStyle} />}\r\n          {moveClassification && showPlayerMoveIcon && square === toSquare && <Image src={`icons/${moveClassification}.png`} alt=\"move-icon\" width={Math.min(40, boardSize * 0.06)} height={Math.min(40, boardSize * 0.06)} style={{\n        position: \"absolute\",\n        top: Math.max(-13.5, boardSize * -0.03) + \"px\",\n        right: Math.max(-13.5, boardSize * -0.03) + \"px\",\n        zIndex: 100\n      }} />}\r\n\r\n          {/*Renders white king corresponding icon in the event of checkmate*/}\r\n          {board.isCheckmate() && square === whiteKing && <EndIcon iconSrc={board.turn() === Color.White ? \"icons/checkmate.webp\" : \"icons/winner.webp\"} backgroundColor={board.turn() === Color.White ? \"red\" : \"limegreen\"} boardSize={boardSize} />}\r\n\r\n          {/*Renders black king corresponding icon in the event of checkmate*/}\r\n          {board.isCheckmate() && square === blackKing && <EndIcon iconSrc={board.turn() === Color.Black ? \"icons/checkmate.webp\" : \"icons/winner.webp\"} backgroundColor={board.turn() === Color.Black ? \"red\" : \"limegreen\"} boardSize={boardSize} />}\r\n\r\n          {/*Renders kings corresponding icon in the event of a draw*/}\r\n          {board.isDraw() && (square === blackKing || square === whiteKing) && <EndIcon iconSrc=\"icons/draw.webp\" backgroundColor=\"skyblue\" boardSize={boardSize} />}\r\n        </div>;\n  });\n  squareRenderer.displayName = \"SquareRenderer\";\n  return squareRenderer;\n}\nconst rightClickSquareStyle: CSSProperties = {\n  position: \"absolute\",\n  width: \"100%\",\n  height: \"100%\",\n  backgroundColor: \"#eb6150\",\n  opacity: \"0.8\"\n};\nconst playableSquareStyles: CSSProperties = {\n  position: \"absolute\",\n  width: \"100%\",\n  height: \"100%\",\n  backgroundColor: \"rgba(0,0,0,.14)\",\n  padding: \"35%\",\n  backgroundClip: \"content-box\",\n  borderRadius: \"50%\",\n  boxSizing: \"border-box\"\n};\nconst previousMoveSquareStyle = (moveClassification?: MoveClassification): CSSProperties => ({\n  position: \"absolute\",\n  width: \"100%\",\n  height: \"100%\",\n  backgroundColor: moveClassification ? CLASSIFICATION_COLORS[moveClassification] : \"#fad541\",\n  opacity: 0.5\n});","import { Box, Grid2 as Grid, Typography } from \"@mui/material\";\nimport { PrimitiveAtom, atom, useAtomValue } from \"jotai\";\nimport { useEffect, useState } from \"react\";\nimport { getEvaluationBarValue } from \"@/lib/chess\";\nimport { Color } from \"@/types/enums\";\nimport { CurrentPosition } from \"@/types/eval\";\ninterface Props {\n  height: number;\n  boardOrientation?: Color;\n  currentPositionAtom?: PrimitiveAtom<CurrentPosition>;\n}\nexport default function EvaluationBar({\n  height,\n  boardOrientation,\n  currentPositionAtom = atom({})\n}: Props) {\n  const [evalBar, setEvalBar] = useState({\n    whiteBarPercentage: 50,\n    label: \"0.0\"\n  });\n  const position = useAtomValue(currentPositionAtom);\n  useEffect(() => {\n    const bestLine = position?.eval?.lines[0];\n    if (!position.eval || !bestLine || bestLine.depth < 6) return;\n    const evalBar = getEvaluationBarValue(position.eval);\n    setEvalBar(evalBar);\n  }, [position]);\n  return <Grid container justifyContent=\"center\" alignItems=\"center\" width={{\n    xs: \"1.6rem\",\n    sm: \"2rem\"\n  }} height={height} border=\"1px solid black\" borderRadius={{\n    xs: \"3px\",\n    sm: \"5px\"\n  }} data-sentry-element=\"Grid\" data-sentry-component=\"EvaluationBar\" data-sentry-source-file=\"evaluationBar.tsx\">\r\n      <Box sx={{\n      backgroundColor: boardOrientation === Color.White ? \"#424242\" : \"white\",\n      transition: \"height 1s\"\n    }} height={`${boardOrientation === Color.White ? 100 - evalBar.whiteBarPercentage : evalBar.whiteBarPercentage}%`} width=\"100%\" borderRadius={evalBar.whiteBarPercentage === 100 ? {\n      xs: \"3px\",\n      sm: \"5px\"\n    } : {\n      xs: \"3px 3px 0 0\",\n      sm: \"5px 5px 0 0\"\n    }} data-sentry-element=\"Box\" data-sentry-source-file=\"evaluationBar.tsx\">\r\n        <Typography color={boardOrientation === Color.White ? \"white\" : \"black\"} textAlign=\"center\" width=\"100%\" fontSize={{\n        xs: \"0.9rem\",\n        sm: \"1rem\"\n      }} data-sentry-element=\"Typography\" data-sentry-source-file=\"evaluationBar.tsx\">\r\n          {evalBar.whiteBarPercentage < 50 && boardOrientation === Color.White || evalBar.whiteBarPercentage >= 50 && boardOrientation === Color.Black ? evalBar.label : \"\"}\r\n        </Typography>\r\n      </Box>\r\n\r\n      <Box sx={{\n      backgroundColor: boardOrientation === Color.White ? \"white\" : \"#424242\",\n      transition: \"height 1s\"\n    }} height={`${boardOrientation === Color.White ? evalBar.whiteBarPercentage : 100 - evalBar.whiteBarPercentage}%`} width=\"100%\" display=\"flex\" alignItems=\"flex-end\" borderRadius={evalBar.whiteBarPercentage === 100 ? {\n      xs: \"3px\",\n      sm: \"5px\"\n    } : {\n      xs: \"0 0 3px 3px\",\n      sm: \"0 0 5px 5px\"\n    }} data-sentry-element=\"Box\" data-sentry-source-file=\"evaluationBar.tsx\">\r\n        <Typography color={boardOrientation === Color.White ? \"black\" : \"white\"} textAlign=\"center\" width=\"100%\" fontSize={{\n        xs: \"0.9rem\",\n        sm: \"1rem\"\n      }} data-sentry-element=\"Typography\" data-sentry-source-file=\"evaluationBar.tsx\">\r\n          {evalBar.whiteBarPercentage >= 50 && boardOrientation === Color.White || evalBar.whiteBarPercentage < 50 && boardOrientation === Color.Black ? evalBar.label : \"\"}\r\n        </Typography>\r\n      </Box>\r\n    </Grid>;\n}","import { getCapturedPieces, getMaterialDifference } from \"@/lib/chess\";\nimport { Color } from \"@/types/enums\";\nimport { Box, Grid2 as Grid, Stack, Typography } from \"@mui/material\";\nimport { ReactElement, useMemo } from \"react\";\nexport interface Props {\n  fen: string;\n  color: Color;\n}\nconst PIECE_SCALE = 0.55;\nexport default function CapturedPieces({\n  fen,\n  color\n}: Props) {\n  const piecesComponents = useMemo(() => {\n    const capturedPieces = getCapturedPieces(fen, color);\n    return capturedPieces.map(({\n      piece,\n      count\n    }) => getCapturedPiecesComponents(piece, count));\n  }, [fen, color]);\n  const materialDiff = useMemo(() => {\n    const materialDiff = getMaterialDifference(fen);\n    return color === Color.White ? materialDiff : -materialDiff;\n  }, [fen, color]);\n  return <Grid container alignItems=\"end\" spacing={0.7} size=\"auto\" marginLeft={`-${0.3 * PIECE_SCALE}rem`} data-sentry-element=\"Grid\" data-sentry-component=\"CapturedPieces\" data-sentry-source-file=\"capturedPieces.tsx\">\r\n      <Stack direction=\"row\" spacing={0.1} data-sentry-element=\"Stack\" data-sentry-source-file=\"capturedPieces.tsx\">\r\n        {piecesComponents}\r\n      </Stack>\r\n\r\n      {materialDiff > 0 && <Typography lineHeight={`${PIECE_SCALE * 1.5}rem`} fontSize={`${PIECE_SCALE * 1.5}rem`} marginLeft={0.3}>\r\n          +{materialDiff}\r\n        </Typography>}\r\n    </Grid>;\n}\nconst getCapturedPiecesComponents = (pieceSymbol: string, pieceCount: number | undefined): ReactElement | null => {\n  if (!pieceCount) return null;\n  return <Stack direction=\"row\" key={pieceSymbol} spacing={`-${1.2 * PIECE_SCALE}rem`} data-sentry-element=\"Stack\" data-sentry-component=\"getCapturedPiecesComponents\" data-sentry-source-file=\"capturedPieces.tsx\">\r\n      {new Array(pieceCount).fill(0).map((_, index) => <Box key={`${pieceSymbol}-${index}`} width={`${2 * PIECE_SCALE}rem`} height={`${2 * PIECE_SCALE}rem`} sx={{\n      backgroundImage: `url(piece/cardinal/${pieceSymbol}.svg)`,\n      backgroundRepeat: \"no-repeat\"\n    }} />)}\r\n    </Stack>;\n};","import { Color } from \"@/types/enums\";\nimport { Player } from \"@/types/game\";\nimport { Avatar, Grid2 as Grid, Stack, Typography } from \"@mui/material\";\nimport CapturedPieces from \"./capturedPieces\";\nimport { PrimitiveAtom, useAtomValue } from \"jotai\";\nimport { Chess } from \"chess.js\";\nimport { useMemo } from \"react\";\nimport { getPaddedNumber } from \"@/lib/helpers\";\nexport interface Props {\n  player: Player;\n  color: Color;\n  gameAtom: PrimitiveAtom<Chess>;\n}\nexport default function PlayerHeader({\n  color,\n  player,\n  gameAtom\n}: Props) {\n  const game = useAtomValue(gameAtom);\n  const gameFen = game.fen();\n  const clock = useMemo(() => {\n    const turn = game.turn();\n    if (turn === color) {\n      const history = game.history({\n        verbose: true\n      });\n      const previousFen = history.at(-1)?.before;\n      const comment = game.getComments().find(({\n        fen\n      }) => fen === previousFen)?.comment;\n      return getClock(comment);\n    }\n    const comment = game.getComment();\n    return getClock(comment);\n  }, [game, color]);\n  return <Grid container justifyContent=\"space-between\" alignItems=\"center\" size={12} data-sentry-element=\"Grid\" data-sentry-component=\"PlayerHeader\" data-sentry-source-file=\"playerHeader.tsx\">\r\n      <Stack direction=\"row\" data-sentry-element=\"Stack\" data-sentry-source-file=\"playerHeader.tsx\">\r\n        <Avatar src={player.avatarUrl} alt={player.name} variant=\"circular\" sx={{\n        width: 40,\n        height: 40,\n        backgroundColor: color === Color.White ? \"white\" : \"black\",\n        color: color === Color.White ? \"black\" : \"white\",\n        border: \"1px solid black\"\n      }} data-sentry-element=\"Avatar\" data-sentry-source-file=\"playerHeader.tsx\">\r\n          {player.name[0].toUpperCase()}\r\n        </Avatar>\r\n\r\n        <Stack marginLeft={1} data-sentry-element=\"Stack\" data-sentry-source-file=\"playerHeader.tsx\">\r\n          <Stack direction=\"row\" data-sentry-element=\"Stack\" data-sentry-source-file=\"playerHeader.tsx\">\r\n            <Typography fontSize=\"0.9rem\" data-sentry-element=\"Typography\" data-sentry-source-file=\"playerHeader.tsx\">{player.name}</Typography>\r\n\r\n            {player.rating && <Typography marginLeft={0.5} fontSize=\"0.9rem\" fontWeight=\"200\">\r\n                ({player.rating})\r\n              </Typography>}\r\n          </Stack>\r\n\r\n          <CapturedPieces fen={gameFen} color={color} data-sentry-element=\"CapturedPieces\" data-sentry-source-file=\"playerHeader.tsx\" />\r\n        </Stack>\r\n      </Stack>\r\n\r\n      {clock && <Typography align=\"center\" sx={{\n      backgroundColor: color === Color.White ? \"white\" : \"black\",\n      color: color === Color.White ? \"black\" : \"white\"\n    }} borderRadius=\"5px\" padding={0.8} border=\"1px solid #424242\" width=\"5rem\" textAlign=\"right\">\r\n          {clock.hours ? `${clock.hours}:` : \"\"}\r\n          {getPaddedNumber(clock.minutes)}:{getPaddedNumber(clock.seconds)}\r\n          {clock.hours || clock.minutes || clock.seconds > 20 ? \"\" : `.${clock.tenths}`}\r\n        </Typography>}\r\n    </Grid>;\n}\nconst getClock = (comment: string | undefined) => {\n  if (!comment) return undefined;\n  const match = comment.match(/\\[%clk (\\d+):(\\d+):(\\d+)(?:\\.(\\d*))?\\]/);\n  if (!match) return undefined;\n  return {\n    hours: parseInt(match[1]),\n    minutes: parseInt(match[2]),\n    seconds: parseInt(match[3]),\n    tenths: match[4] ? parseInt(match[4]) : 0\n  };\n};","import { Box, Grid2 as Grid } from \"@mui/material\";\nimport { Chessboard } from \"react-chessboard\";\nimport { PrimitiveAtom, atom, useAtomValue, useSetAtom } from \"jotai\";\nimport { Arrow, CustomPieces, CustomSquareRenderer, Piece, PromotionPieceOption, Square } from \"react-chessboard/dist/chessboard/types\";\nimport { useChessActions } from \"@/hooks/useChessActions\";\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport { Color, MoveClassification } from \"@/types/enums\";\nimport { Chess } from \"chess.js\";\nimport { getSquareRenderer } from \"./squareRenderer\";\nimport { CurrentPosition } from \"@/types/eval\";\nimport EvaluationBar from \"./evaluationBar\";\nimport { CLASSIFICATION_COLORS } from \"@/constants\";\nimport { Player } from \"@/types/game\";\nimport PlayerHeader from \"./playerHeader\";\nimport { boardHueAtom, pieceSetAtom } from \"./states\";\nimport tinycolor from \"tinycolor2\";\nexport interface Props {\n  id: string;\n  canPlay?: Color | boolean;\n  gameAtom: PrimitiveAtom<Chess>;\n  boardSize?: number;\n  whitePlayer: Player;\n  blackPlayer: Player;\n  boardOrientation?: Color;\n  currentPositionAtom?: PrimitiveAtom<CurrentPosition>;\n  showBestMoveArrow?: boolean;\n  showPlayerMoveIconAtom?: PrimitiveAtom<boolean>;\n  showEvaluationBar?: boolean;\n}\nexport default function Board({\n  id: boardId,\n  canPlay,\n  gameAtom,\n  boardSize,\n  whitePlayer,\n  blackPlayer,\n  boardOrientation = Color.White,\n  currentPositionAtom = atom({}),\n  showBestMoveArrow = false,\n  showPlayerMoveIconAtom,\n  showEvaluationBar = false\n}: Props) {\n  const boardRef = useRef<HTMLDivElement>(null);\n  const game = useAtomValue(gameAtom);\n  const {\n    playMove\n  } = useChessActions(gameAtom);\n  const clickedSquaresAtom = useMemo(() => atom<Square[]>([]), []);\n  const setClickedSquares = useSetAtom(clickedSquaresAtom);\n  const playableSquaresAtom = useMemo(() => atom<Square[]>([]), []);\n  const setPlayableSquares = useSetAtom(playableSquaresAtom);\n  const position = useAtomValue(currentPositionAtom);\n  const [showPromotionDialog, setShowPromotionDialog] = useState(false);\n  const [moveClickFrom, setMoveClickFrom] = useState<Square | null>(null);\n  const [moveClickTo, setMoveClickTo] = useState<Square | null>(null);\n  const pieceSet = useAtomValue(pieceSetAtom);\n  const boardHue = useAtomValue(boardHueAtom);\n  const gameFen = game.fen();\n  useEffect(() => {\n    setClickedSquares([]);\n  }, [gameFen, setClickedSquares]);\n  const isPiecePlayable = useCallback(({\n    piece\n  }: {\n    piece: string;\n  }): boolean => {\n    if (game.isGameOver() || !canPlay) return false;\n    if (canPlay === true || canPlay === piece[0]) return true;\n    return false;\n  }, [canPlay, game]);\n  const onPieceDrop = useCallback((source: Square, target: Square, piece: string): boolean => {\n    if (!isPiecePlayable({\n      piece\n    })) return false;\n    const result = playMove({\n      from: source,\n      to: target,\n      promotion: piece[1]?.toLowerCase() ?? \"q\"\n    });\n    return !!result;\n  }, [isPiecePlayable, playMove]);\n  const resetMoveClick = useCallback((square?: Square | null) => {\n    setMoveClickFrom(square ?? null);\n    setMoveClickTo(null);\n    setShowPromotionDialog(false);\n    if (square) {\n      const moves = game.moves({\n        square,\n        verbose: true\n      });\n      setPlayableSquares(moves.map(m => m.to));\n    } else {\n      setPlayableSquares([]);\n    }\n  }, [setMoveClickFrom, setMoveClickTo, setPlayableSquares, game]);\n  const handleSquareLeftClick = useCallback((square: Square, piece?: string) => {\n    setClickedSquares([]);\n    if (!moveClickFrom) {\n      if (piece && !isPiecePlayable({\n        piece\n      })) return;\n      resetMoveClick(square);\n      return;\n    }\n    const validMoves = game.moves({\n      square: moveClickFrom,\n      verbose: true\n    });\n    const move = validMoves.find(m => m.to === square);\n    if (!move) {\n      resetMoveClick(square);\n      return;\n    }\n    setMoveClickTo(square);\n    if (move.piece === \"p\" && (move.color === \"w\" && square[1] === \"8\" || move.color === \"b\" && square[1] === \"1\")) {\n      setShowPromotionDialog(true);\n      return;\n    }\n    const result = playMove({\n      from: moveClickFrom,\n      to: square\n    });\n    resetMoveClick(result ? undefined : square);\n  }, [game, isPiecePlayable, moveClickFrom, playMove, resetMoveClick, setClickedSquares]);\n  const handleSquareRightClick = useCallback((square: Square) => {\n    setClickedSquares(prev => prev.includes(square) ? prev.filter(s => s !== square) : [...prev, square]);\n  }, [setClickedSquares]);\n  const handlePieceDragBegin = useCallback((_: string, square: Square) => {\n    resetMoveClick(square);\n  }, [resetMoveClick]);\n  const handlePieceDragEnd = useCallback(() => {\n    resetMoveClick();\n  }, [resetMoveClick]);\n  const onPromotionPieceSelect = useCallback((piece?: PromotionPieceOption, from?: Square, to?: Square) => {\n    if (!piece) return false;\n    const promotionPiece = piece[1]?.toLowerCase() ?? \"q\";\n    if (moveClickFrom && moveClickTo) {\n      const result = playMove({\n        from: moveClickFrom,\n        to: moveClickTo,\n        promotion: promotionPiece\n      });\n      resetMoveClick();\n      return !!result;\n    }\n    if (from && to) {\n      const result = playMove({\n        from,\n        to,\n        promotion: promotionPiece\n      });\n      resetMoveClick();\n      return !!result;\n    }\n    resetMoveClick(moveClickFrom);\n    return false;\n  }, [moveClickFrom, moveClickTo, playMove, resetMoveClick]);\n  const customArrows: Arrow[] = useMemo(() => {\n    const bestMove = position?.lastEval?.bestMove;\n    const moveClassification = position?.eval?.moveClassification;\n    if (bestMove && showBestMoveArrow && moveClassification !== MoveClassification.Best && moveClassification !== MoveClassification.Opening && moveClassification !== MoveClassification.Forced && moveClassification !== MoveClassification.Perfect) {\n      const bestMoveArrow = [bestMove.slice(0, 2), bestMove.slice(2, 4), tinycolor(CLASSIFICATION_COLORS[MoveClassification.Best]).spin(-boardHue).toHexString()] as Arrow;\n      return [bestMoveArrow];\n    }\n    return [];\n  }, [position, showBestMoveArrow, boardHue]);\n  const SquareRenderer: CustomSquareRenderer = useMemo(() => {\n    return getSquareRenderer({\n      currentPositionAtom: currentPositionAtom,\n      clickedSquaresAtom,\n      playableSquaresAtom,\n      showPlayerMoveIconAtom,\n      boardSize: boardSize || 400\n    });\n  }, [currentPositionAtom, clickedSquaresAtom, playableSquaresAtom, showPlayerMoveIconAtom, boardSize]);\n  const customPieces = useMemo(() => PIECE_CODES.reduce<CustomPieces>((acc, piece) => {\n    acc[piece] = ({\n      squareWidth\n    }) => <Box width={squareWidth} height={squareWidth} sx={{\n      backgroundImage: `url(piece/${pieceSet}/${piece}.svg)`,\n      backgroundSize: \"contain\"\n    }} />;\n    return acc;\n  }, {}), [pieceSet]);\n  const customBoardStyle = useMemo(() => {\n    const commonBoardStyle = {\n      borderRadius: \"5px\",\n      boxShadow: \"0 2px 10px rgba(0, 0, 0, 0.5)\"\n    };\n    if (boardHue) {\n      return {\n        ...commonBoardStyle,\n        filter: `hue-rotate(${boardHue}deg)`\n      };\n    }\n    return commonBoardStyle;\n  }, [boardHue]);\n  return <Grid container justifyContent=\"center\" alignItems=\"center\" wrap=\"nowrap\" width={boardSize} data-sentry-element=\"Grid\" data-sentry-component=\"Board\" data-sentry-source-file=\"index.tsx\">\r\n      {showEvaluationBar && <EvaluationBar height={boardRef?.current?.offsetHeight || boardSize || 400} boardOrientation={boardOrientation} currentPositionAtom={currentPositionAtom} />}\r\n\r\n      <Grid container rowGap={1.5} justifyContent=\"center\" alignItems=\"center\" paddingLeft={{\n      xs: 0.5,\n      sm: showEvaluationBar ? 2 : 0\n    }} size=\"grow\" data-sentry-element=\"Grid\" data-sentry-source-file=\"index.tsx\">\r\n        <PlayerHeader color={boardOrientation === Color.White ? Color.Black : Color.White} gameAtom={gameAtom} player={boardOrientation === Color.White ? blackPlayer : whitePlayer} data-sentry-element=\"PlayerHeader\" data-sentry-source-file=\"index.tsx\" />\r\n\r\n        <Grid container justifyContent=\"center\" alignItems=\"center\" ref={boardRef} size={12} data-sentry-element=\"Grid\" data-sentry-source-file=\"index.tsx\">\r\n          <Chessboard id={`${boardId}-${canPlay}`} position={gameFen} onPieceDrop={onPieceDrop} boardOrientation={boardOrientation === Color.White ? \"white\" : \"black\"} customBoardStyle={customBoardStyle} customArrows={customArrows} isDraggablePiece={isPiecePlayable} customSquare={SquareRenderer} onSquareClick={handleSquareLeftClick} onSquareRightClick={handleSquareRightClick} onPieceDragBegin={handlePieceDragBegin} onPieceDragEnd={handlePieceDragEnd} onPromotionPieceSelect={onPromotionPieceSelect} showPromotionDialog={showPromotionDialog} promotionToSquare={moveClickTo} animationDuration={200} customPieces={customPieces} data-sentry-element=\"Chessboard\" data-sentry-source-file=\"index.tsx\" />\r\n        </Grid>\r\n\r\n        <PlayerHeader color={boardOrientation} gameAtom={gameAtom} player={boardOrientation === Color.White ? whitePlayer : blackPlayer} data-sentry-element=\"PlayerHeader\" data-sentry-source-file=\"index.tsx\" />\r\n      </Grid>\r\n    </Grid>;\n}\nexport const PIECE_CODES = [\"wP\", \"wB\", \"wN\", \"wR\", \"wQ\", \"wK\", \"bP\", \"bB\", \"bN\", \"bR\", \"bQ\", \"bK\"] as const satisfies Piece[];","import { FirebaseOptions, initializeApp } from \"firebase/app\";\r\nimport { getAnalytics, isSupported, logEvent } from \"firebase/analytics\";\r\n\r\nconst firebaseConfig: FirebaseOptions | undefined = process.env\r\n  .NEXT_PUBLIC_FIREBASE_PROJECT_ID\r\n  ? {\r\n      apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\r\n      authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\r\n      projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\r\n      storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\r\n      messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\r\n      appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\r\n      measurementId: process.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID,\r\n    }\r\n  : undefined;\r\n\r\nconst app = firebaseConfig ? initializeApp(firebaseConfig) : undefined;\r\n\r\nisSupported().then((supported) => {\r\n  if (supported && app) {\r\n    getAnalytics(app);\r\n  }\r\n});\r\n\r\nexport const logAnalyticsEvent = async (\r\n  eventName: string,\r\n  eventParams?: Record<string, unknown>\r\n) => {\r\n  if (window.location.hostname === \"localhost\") return;\r\n\r\n  const supported = await isSupported();\r\n  if (!supported || !app) return;\r\n\r\n  const analytics = getAnalytics(app);\r\n  logEvent(analytics, eventName, eventParams);\r\n};\r\n","import { Icon } from \"@iconify/react\";\nimport { ClickAwayListener, Grid2 as Grid, IconButton, Slider as MuiSlider, Popover, Stack, styled, Typography, TypographyProps } from \"@mui/material\";\nimport { MouseEvent, useState } from \"react\";\nexport interface Props {\n  value: number;\n  setValue: (value: number) => void;\n  min: number;\n  max: number;\n  label: string;\n  size?: number;\n  marksFilter?: number;\n  step?: number;\n  infoContent?: TypographyProps[\"children\"];\n}\nexport default function Slider({\n  min,\n  max,\n  label,\n  value,\n  setValue,\n  size,\n  marksFilter,\n  step = 1,\n  infoContent\n}: Props) {\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n  const handleOpenPopover = (event: MouseEvent<HTMLElement>) => {\n    setAnchorEl(event.currentTarget);\n  };\n  const handleClosePopover = () => {\n    setAnchorEl(null);\n  };\n  return <Grid container justifyContent=\"center\" alignItems=\"center\" size={size ?? 11} data-sentry-element=\"Grid\" data-sentry-component=\"Slider\" data-sentry-source-file=\"slider.tsx\">\r\n      <Stack direction=\"row\" width=\"100%\" data-sentry-element=\"Stack\" data-sentry-source-file=\"slider.tsx\">\r\n        <Typography id={`input-${label}`} variant=\"body2\" data-sentry-element=\"Typography\" data-sentry-source-file=\"slider.tsx\">\r\n          {step === 1 && marksFilter ? label : `${label}: ${value}`}\r\n        </Typography>\r\n\r\n        {!!infoContent && <>\r\n            <ClickAwayListener onClickAway={handleClosePopover}>\r\n              <IconButton size=\"medium\" aria-owns={anchorEl ? \"mouse-over-popover\" : undefined} aria-haspopup=\"true\" onClick={handleOpenPopover} onMouseEnter={handleOpenPopover} onMouseLeave={handleClosePopover} sx={{\n            ml: 1,\n            padding: 0\n          }} aria-label=\"Help about number of threads\">\r\n                <Icon icon=\"mdi:info-outline\" width=\"1.1rem\" />\r\n              </IconButton>\r\n            </ClickAwayListener>\r\n\r\n            <Popover id=\"mouse-over-popover\" open={!!anchorEl} anchorEl={anchorEl} onClose={handleClosePopover} anchorOrigin={{\n          vertical: \"bottom\",\n          horizontal: \"center\"\n        }} transformOrigin={{\n          vertical: \"top\",\n          horizontal: \"center\"\n        }} sx={{\n          pointerEvents: \"none\"\n        }} disableRestoreFocus>\r\n              <Typography variant=\"body2\" sx={{\n            padding: 2,\n            maxWidth: 500\n          }}>\r\n                {infoContent}\r\n              </Typography>\r\n            </Popover>\r\n          </>}\r\n      </Stack>\r\n\r\n      <CustomSlider min={min} max={max} marks={marksFilter ? Array.from({\n      length: max - min + 1\n    }, (_, i) => ({\n      value: i + min,\n      label: `${i + min}`\n    })).filter((_, i) => i % marksFilter === 0) : undefined} step={step} valueLabelDisplay=\"off\" value={value} onChange={(_, value) => setValue(value as number)} aria-labelledby={`input-${label}`} data-sentry-element=\"CustomSlider\" data-sentry-source-file=\"slider.tsx\" />\r\n    </Grid>;\n}\nconst CustomSlider = styled(MuiSlider)(() => ({\n  \".MuiSlider-markLabel\": {\n    fontSize: \"0.8rem\",\n    lineHeight: \"0.8rem\"\n  },\n  \".MuiSlider-thumb\": {\n    width: \"18px\",\n    height: \"18px\"\n  },\n  marginBottom: \"1rem\"\n}));","import { Chess } from \"chess.js\";\r\nimport { PrimitiveAtom, useAtomValue } from \"jotai\";\r\nimport { useGameDatabase } from \"./useGameDatabase\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { getChessComUserAvatar } from \"@/lib/chessCom\";\r\nimport { Player } from \"@/types/game\";\r\n\r\nexport const usePlayersData = (\r\n  gameAtom: PrimitiveAtom<Chess>\r\n): { white: Player; black: Player } => {\r\n  const game = useAtomValue(gameAtom);\r\n  const { gameFromUrl } = useGameDatabase();\r\n  const headers = game.getHeaders();\r\n\r\n  const headersWhiteName =\r\n    headers.White && headers.White !== \"?\" ? headers.White : undefined;\r\n  const headersBlackName =\r\n    headers.Black && headers.Black !== \"?\" ? headers.Black : undefined;\r\n\r\n  const whiteName = gameFromUrl?.white?.name || headersWhiteName || \"White\";\r\n  const blackName = gameFromUrl?.black?.name || headersBlackName || \"Black\";\r\n\r\n  const whiteElo =\r\n    gameFromUrl?.white?.rating || Number(headers.WhiteElo) || undefined;\r\n  const blackElo =\r\n    gameFromUrl?.black?.rating || Number(headers.BlackElo) || undefined;\r\n\r\n  const siteHeader = gameFromUrl?.site || headers.Site || \"unknown\";\r\n  const isChessCom = siteHeader.toLowerCase().includes(\"chess.com\");\r\n\r\n  const whiteAvatarUrl = usePlayerAvatarUrl(\r\n    whiteName,\r\n    isChessCom && !!whiteName && whiteName !== \"White\"\r\n  );\r\n\r\n  const blackAvatarUrl = usePlayerAvatarUrl(\r\n    blackName,\r\n    isChessCom && !!blackName && blackName !== \"Black\"\r\n  );\r\n\r\n  return {\r\n    white: {\r\n      name: whiteName,\r\n      rating: whiteElo,\r\n      avatarUrl: whiteAvatarUrl ?? undefined,\r\n    },\r\n    black: {\r\n      name: blackName,\r\n      rating: blackElo,\r\n      avatarUrl: blackAvatarUrl ?? undefined,\r\n    },\r\n  };\r\n};\r\n\r\nconst usePlayerAvatarUrl = (\r\n  playerName: string,\r\n  enabled: boolean\r\n): string | null | undefined => {\r\n  const { data: avatarUrl } = useQuery({\r\n    queryKey: [\"CCAvatar\", playerName],\r\n    enabled,\r\n    queryFn: () => getChessComUserAvatar(playerName),\r\n    staleTime: 1000 * 60 * 60, // 1 hour\r\n    gcTime: 1000 * 60 * 60 * 24, // 1 day\r\n  });\r\n\r\n  return avatarUrl;\r\n};\r\n","import { useEffect, useState } from \"react\";\r\n\r\nexport const useScreenSize = () => {\r\n  const [screenSize, setScreenSize] = useState({\r\n    width: document?.querySelector(\".MuiGrid2-root\")?.clientWidth ?? 500,\r\n    height: window ? window.innerHeight - 120 : 500,\r\n  });\r\n\r\n  useEffect(() => {\r\n    const mainDiv = document?.querySelector(\".MuiGrid2-root\");\r\n    if (!mainDiv) return;\r\n\r\n    const observer = new ResizeObserver(() =>\r\n      setScreenSize((prev) => ({ ...prev, width: mainDiv.clientWidth }))\r\n    );\r\n    observer.observe(mainDiv);\r\n\r\n    return () => {\r\n      observer.disconnect();\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      setScreenSize((prev) => ({\r\n        ...prev,\r\n        height: window.innerHeight - 100,\r\n      }));\r\n    };\r\n\r\n    window.addEventListener(\"resize\", handleResize);\r\n\r\n    return () => {\r\n      window.removeEventListener(\"resize\", handleResize);\r\n    };\r\n  }, []);\r\n\r\n  return screenSize;\r\n};\r\n","import { Move } from \"chess.js\";\r\n\r\nlet audioContext: AudioContext | null = null;\r\nlet timeout: NodeJS.Timeout | null = null;\r\nconst soundsCache = new Map<string, AudioBuffer>();\r\n\r\ntype Sound = \"move\" | \"capture\" | \"illegalMove\";\r\nconst soundUrls: Record<Sound, string> = {\r\n  move: \"sounds/move.mp3\",\r\n  capture: \"sounds/capture.mp3\",\r\n  illegalMove: \"sounds/error.mp3\",\r\n};\r\nexport const play = async (sound: Sound) => {\r\n  if (timeout) clearTimeout(timeout);\r\n\r\n  timeout = setTimeout(async () => {\r\n    if (!audioContext) audioContext = new AudioContext();\r\n    if (audioContext.state === \"suspended\") await audioContext.resume();\r\n\r\n    let audioBuffer = soundsCache.get(soundUrls[sound]);\r\n    if (!audioBuffer) {\r\n      const res = await fetch(soundUrls[sound]);\r\n      const buffer = await audioContext.decodeAudioData(\r\n        await res.arrayBuffer()\r\n      );\r\n      audioBuffer = buffer;\r\n      soundsCache.set(soundUrls[sound], buffer);\r\n    }\r\n\r\n    const audioSrc = audioContext.createBufferSource();\r\n    audioSrc.buffer = audioBuffer;\r\n    const volume = audioContext.createGain();\r\n    volume.gain.value = 0.3;\r\n    audioSrc.connect(volume);\r\n    volume.connect(audioContext.destination);\r\n    audioSrc.start();\r\n  }, 1);\r\n};\r\n\r\nexport const playCaptureSound = () => play(\"capture\");\r\nexport const playIllegalMoveSound = () => play(\"illegalMove\");\r\nexport const playMoveSound = () => play(\"move\");\r\n\r\nexport const playSoundFromMove = (move: Move | null) => {\r\n  if (!move) return playIllegalMoveSound();\r\n  if (move.captured) return playCaptureSound();\r\n  return playMoveSound();\r\n};\r\n","import { getGameFromPgn, setGameHeaders } from \"@/lib/chess\";\r\nimport { playIllegalMoveSound, playSoundFromMove } from \"@/lib/sounds\";\r\nimport { Player } from \"@/types/game\";\r\nimport { Chess, Move, DEFAULT_POSITION } from \"chess.js\";\r\nimport { PrimitiveAtom, useAtom } from \"jotai\";\r\nimport { useCallback } from \"react\";\r\n\r\nexport interface resetGameParams {\r\n  fen?: string;\r\n  white?: Player;\r\n  black?: Player;\r\n  noHeaders?: boolean;\r\n}\r\n\r\nexport const useChessActions = (chessAtom: PrimitiveAtom<Chess>) => {\r\n  const [game, setGame] = useAtom(chessAtom);\r\n\r\n  const setPgn = useCallback(\r\n    (pgn: string) => {\r\n      const newGame = new Chess();\r\n      newGame.loadPgn(pgn);\r\n      setGame(newGame);\r\n    },\r\n    [setGame]\r\n  );\r\n\r\n  const reset = useCallback(\r\n    (params?: resetGameParams) => {\r\n      const newGame = new Chess(params?.fen);\r\n      if (!params?.noHeaders) setGameHeaders(newGame, params);\r\n      setGame(newGame);\r\n    },\r\n    [setGame]\r\n  );\r\n\r\n  const copyGame = useCallback(() => {\r\n    const newGame = new Chess();\r\n\r\n    if (game.history().length === 0) {\r\n      const pgnSplitted = game.pgn().split(\"]\");\r\n      if (\r\n        [\"1-0\", \"0-1\", \"1/2-1/2\", \"*\"].includes(\r\n          pgnSplitted.at(-1)?.trim() ?? \"\"\r\n        )\r\n      ) {\r\n        newGame.loadPgn(pgnSplitted.slice(0, -1).join(\"]\") + \"]\");\r\n        return newGame;\r\n      }\r\n    }\r\n\r\n    newGame.loadPgn(game.pgn());\r\n    return newGame;\r\n  }, [game]);\r\n\r\n  const resetToStartingPosition = useCallback(\r\n    (pgn?: string) => {\r\n      const newGame = pgn ? getGameFromPgn(pgn) : copyGame();\r\n      newGame.load(newGame.getHeaders().FEN || DEFAULT_POSITION, {\r\n        preserveHeaders: true,\r\n      });\r\n      setGame(newGame);\r\n    },\r\n    [copyGame, setGame]\r\n  );\r\n\r\n  const playMove = useCallback(\r\n    (params: {\r\n      from: string;\r\n      to: string;\r\n      promotion?: string;\r\n      comment?: string;\r\n    }): Move | null => {\r\n      const newGame = copyGame();\r\n\r\n      try {\r\n        const { comment, ...move } = params;\r\n        const result = newGame.move(move);\r\n        if (comment) newGame.setComment(comment);\r\n\r\n        setGame(newGame);\r\n        playSoundFromMove(result);\r\n        return result;\r\n      } catch {\r\n        playIllegalMoveSound();\r\n        return null;\r\n      }\r\n    },\r\n    [copyGame, setGame]\r\n  );\r\n\r\n  const addMoves = useCallback(\r\n    (moves: string[]) => {\r\n      const newGame = copyGame();\r\n\r\n      let lastMove: Move | null = null;\r\n      for (const move of moves) {\r\n        lastMove = newGame.move(move);\r\n      }\r\n      setGame(newGame);\r\n      if (lastMove) playSoundFromMove(lastMove);\r\n    },\r\n    [copyGame, setGame]\r\n  );\r\n\r\n  const undoMove = useCallback(() => {\r\n    const newGame = copyGame();\r\n    const move = newGame.undo();\r\n    if (move) playSoundFromMove(move);\r\n    setGame(newGame);\r\n  }, [copyGame, setGame]);\r\n\r\n  const goToMove = useCallback(\r\n    (moveIdx: number, fullGame: Chess) => {\r\n      if (moveIdx < 0) return;\r\n\r\n      const newGame = new Chess();\r\n      newGame.loadPgn(fullGame.pgn());\r\n\r\n      const movesNb = fullGame.history().length;\r\n      if (moveIdx > movesNb) return;\r\n\r\n      let lastMove: Move | null = {} as Move;\r\n      for (let i = movesNb; i > moveIdx; i--) {\r\n        lastMove = newGame.undo();\r\n      }\r\n\r\n      setGame(newGame);\r\n      playSoundFromMove(lastMove);\r\n    },\r\n    [setGame]\r\n  );\r\n\r\n  return {\r\n    setPgn,\r\n    reset,\r\n    playMove,\r\n    undoMove,\r\n    goToMove,\r\n    resetToStartingPosition,\r\n    addMoves,\r\n  };\r\n};\r\n","import { isWasmSupported } from \"@/lib/engine/shared\";\r\nimport { Stockfish11 } from \"@/lib/engine/stockfish11\";\r\nimport { Stockfish16 } from \"@/lib/engine/stockfish16\";\r\nimport { Stockfish16_1 } from \"@/lib/engine/stockfish16_1\";\r\nimport { Stockfish17 } from \"@/lib/engine/stockfish17\";\r\nimport { Stockfish17_1 } from \"@/lib/engine/stockfish17_1\";\r\nimport { UciEngine } from \"@/lib/engine/uciEngine\";\r\nimport { EngineName } from \"@/types/enums\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nexport const useEngine = (engineName: EngineName | undefined) => {\r\n  const [engine, setEngine] = useState<UciEngine | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (!engineName) return;\r\n\r\n    if (engineName !== EngineName.Stockfish11 && !isWasmSupported()) {\r\n      return;\r\n    }\r\n\r\n    pickEngine(engineName).then((newEngine) => {\r\n      setEngine((prev) => {\r\n        prev?.shutdown();\r\n        return newEngine;\r\n      });\r\n    });\r\n  }, [engineName]);\r\n\r\n  return engine;\r\n};\r\n\r\nconst pickEngine = (engine: EngineName): Promise<UciEngine> => {\r\n  switch (engine) {\r\n    case EngineName.Stockfish17_1:\r\n      return Stockfish17_1.create(false);\r\n    case EngineName.Stockfish17_1Lite:\r\n      return Stockfish17_1.create(true);\r\n    case EngineName.Stockfish17:\r\n      return Stockfish17.create(false);\r\n    case EngineName.Stockfish17Lite:\r\n      return Stockfish17.create(true);\r\n    case EngineName.Stockfish16_1:\r\n      return Stockfish16_1.create(false);\r\n    case EngineName.Stockfish16_1Lite:\r\n      return Stockfish16_1.create(true);\r\n    case EngineName.Stockfish16:\r\n      return Stockfish16.create(false);\r\n    case EngineName.Stockfish16NNUE:\r\n      return Stockfish16.create(true);\r\n    case EngineName.Stockfish11:\r\n      return Stockfish11.create();\r\n  }\r\n};\r\n","import { PrimitiveAtom, SetStateAction, useAtom } from \"jotai\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nexport function useAtomLocalStorage<T>(\r\n  key: string,\r\n  atom: PrimitiveAtom<T>\r\n): [T, (value: SetStateAction<T>) => void] {\r\n  const [keyTemp, setKeyTemp] = useState(\"\");\r\n  const [storedValue, setStoredValue] = useAtom(atom);\r\n\r\n  useEffect(() => {\r\n    setKeyTemp(key);\r\n    const item = window.localStorage.getItem(key);\r\n    if (!item) return;\r\n    const value = parseJSON<T>(item);\r\n    if (value) setStoredValue(value);\r\n  }, [key, setStoredValue]);\r\n\r\n  useEffect(() => {\r\n    if (keyTemp !== key) return;\r\n    window.localStorage.setItem(key, JSON.stringify(storedValue));\r\n  }, [key, keyTemp, storedValue]);\r\n\r\n  return [storedValue, setStoredValue];\r\n}\r\n\r\nfunction parseJSON<T>(value: string): T | undefined {\r\n  return value === \"undefined\" ? undefined : JSON.parse(value);\r\n}\r\n"],"names":["pieceSetAtom","atomWithStorage","EndIcon","props","div","className","style","position","inset","backgroundColor","zIndex","Image","src","iconSrc","alt","width","boardSize","height","data-sentry-element","data-sentry-source-file","rightClickSquareStyle","opacity","playableSquareStyles","padding","backgroundClip","borderRadius","boxSizing","previousMoveSquareStyle","moveClassification","CLASSIFICATION_COLORS","EvaluationBar","boardOrientation","currentPositionAtom","atom","evalBar","setEvalBar","useState","whiteBarPercentage","label","useAtomValue","useEffect","bestLine","eval","lines","depth","getEvaluationBarValue","Grid","container","justifyContent","alignItems","xs","sm","border","data-sentry-component","Box","sx","Color","White","transition","Typography","color","textAlign","fontSize","Black","display","CapturedPieces","fen","piecesComponents","useMemo","getCapturedPieces","map","piece","count","getCapturedPiecesComponents","materialDiff","getMaterialDifference","spacing","size","marginLeft","PIECE_SCALE","Stack","direction","lineHeight","pieceSymbol","pieceCount","fill","_","index","backgroundImage","backgroundRepeat","PlayerHeader","player","gameAtom","game","gameFen","clock","turn","history","previousFen","verbose","at","before","getClock","comment","getComments","find","getComment","Avatar","avatarUrl","name","variant","toUpperCase","rating","fontWeight","align","hours","getPaddedNumber","minutes","seconds","tenths","undefined","match","parseInt","Board","boardRef","id","boardId","canPlay","whitePlayer","blackPlayer","showBestMoveArrow","showPlayerMoveIconAtom","showEvaluationBar","useRef","playMove","useChessActions","clickedSquaresAtom","setClickedSquares","useSetAtom","playableSquaresAtom","setPlayableSquares","showPromotionDialog","setShowPromotionDialog","moveClickFrom","setMoveClickFrom","moveClickTo","setMoveClickTo","pieceSet","boardHue","boardHueAtom","isPiecePlayable","useCallback","isGameOver","onPieceDrop","source","target","from","to","promotion","toLowerCase","resetMoveClick","square","moves","m","handleSquareLeftClick","move","handleSquareRightClick","prev","includes","filter","s","handlePieceDragBegin","handlePieceDragEnd","onPromotionPieceSelect","promotionPiece","result","customArrows","bestMove","lastEval","MoveClassification","Best","Opening","Forced","Perfect","slice","tinycolor","spin","toHexString","SquareRenderer","getSquareRenderer","squareRenderer","forwardRef","ref","children","showPlayerMoveIcon","clickedSquares","playableSquares","fromSquare","lastMove","toSquare","board","boardAtom","highlightSquareStyle","playableSquareStyle","whiteKing","findPiece","type","blackKing","Math","min","top","max","right","isCheckmate","isDraw","displayName","customPieces","PIECE_CODES","reduce","acc","squareWidth","backgroundSize","customBoardStyle","commonBoardStyle","boxShadow","wrap","current","offsetHeight","rowGap","paddingLeft","Chessboard","isDraggablePiece","customSquare","onSquareClick","onSquareRightClick","onPieceDragBegin","onPieceDragEnd","promotionToSquare","animationDuration","firebaseConfig","process","env","NEXT_PUBLIC_FIREBASE_PROJECT_ID","apiKey","NEXT_PUBLIC_FIREBASE_API_KEY","authDomain","NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN","projectId","storageBucket","NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET","messagingSenderId","NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID","appId","NEXT_PUBLIC_FIREBASE_APP_ID","measurementId","NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID","app","initializeApp","isSupported","then","supported","getAnalytics","logAnalyticsEvent","eventName","eventParams","window","location","hostname","analytics","logEvent","Slider","value","setValue","marksFilter","step","infoContent","anchorEl","setAnchorEl","handleOpenPopover","event","currentTarget","handleClosePopover","ClickAwayListener","onClickAway","IconButton","aria-owns","aria-haspopup","onClick","onMouseEnter","onMouseLeave","ml","aria-label","Icon","icon","Popover","open","onClose","anchorOrigin","vertical","horizontal","transformOrigin","pointerEvents","disableRestoreFocus","maxWidth","CustomSlider","marks","Array","length","i","valueLabelDisplay","onChange","aria-labelledby","styled","MuiSlider","marginBottom","usePlayersData","gameFromUrl","useGameDatabase","headers","getHeaders","headersWhiteName","headersBlackName","whiteName","white","blackName","black","whiteElo","Number","WhiteElo","blackElo","BlackElo","isChessCom","siteHeader","site","Site","whiteAvatarUrl","usePlayerAvatarUrl","blackAvatarUrl","playerName","enabled","data","useQuery","queryKey","queryFn","getChessComUserAvatar","staleTime","gcTime","useScreenSize","document","screenSize","setScreenSize","querySelector","clientWidth","innerHeight","mainDiv","observer","ResizeObserver","observe","disconnect","handleResize","addEventListener","removeEventListener","audioContext","timeout","soundsCache","Map","soundUrls","capture","illegalMove","play","sound","clearTimeout","setTimeout","AudioContext","state","resume","audioBuffer","get","res","fetch","buffer","decodeAudioData","arrayBuffer","set","audioSrc","createBufferSource","volume","createGain","gain","connect","destination","start","playCaptureSound","playMoveSound","playIllegalMoveSound","setGame","useAtom","chessAtom","setPgn","newGame","Chess","loadPgn","pgn","reset","params","noHeaders","setGameHeaders","copyGame","pgnSplitted","split","trim","join","resetToStartingPosition","getGameFromPgn","load","FEN","DEFAULT_POSITION","preserveHeaders","setComment","playSoundFromMove","addMoves","undoMove","undo","goToMove","moveIdx","fullGame","movesNb","useEngine","engine","setEngine","engineName","EngineName","Stockfish11","isWasmSupported","shutdown","newEngine","Stockfish17_1","create","Stockfish17_1Lite","Stockfish17","Stockfish17Lite","Stockfish16_1","Stockfish16_1Lite","Stockfish16","Stockfish16NNUE","useAtomLocalStorage","key","keyTemp","setKeyTemp","storedValue","setStoredValue","item","localStorage","getItem","parseJSON","JSON","parse","setItem","stringify"],"sourceRoot":""}