!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="833632f0-79f4-42e0-9c9a-1303c2dee6ee",e._sentryDebugIdIdentifier="sentry-dbid-833632f0-79f4-42e0-9c9a-1303c2dee6ee")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[624],{3830:(e,t,r)=>{r.d(t,{U:()=>i,_:()=>n});var a=r(42200);let n=(0,a.tG)("pieceSet","merida"),i=(0,a.tG)("boardHue",185)},12839:(e,t,r)=>{r.d(t,{R:()=>u});var a=r(87376),n=r(99523),i=r(99542),o=r(85278),l=r(89099),s=r(14232);let c=(0,i.eU)([]),d=(0,i.eU)(!1),u=e=>{let[t,r]=(0,s.useState)(null),[i,u]=(0,o.fp)(c),[m,h]=(0,o.fp)(d),[f,v]=(0,s.useState)(void 0);(0,s.useEffect)(()=>{void 0!==e&&h(e)},[e,h]),(0,s.useEffect)(()=>{(async()=>{r(await (0,n.P2)("games",1,{upgrade(e){e.createObjectStore("games",{keyPath:"id",autoIncrement:!0})}}))})()},[]);let g=(0,s.useCallback)(async()=>{t&&m&&u(await t.getAll("games"))},[t,m,u]);(0,s.useEffect)(()=>{g()},[g]);let p=(0,s.useCallback)(async e=>{if(!t)throw Error("Database not initialized");let r=(0,a.mi)(e),n=await t.add("games",r);return g(),n},[t,g]),x=(0,s.useCallback)(async(e,r)=>{if(!t)throw Error("Database not initialized");let a=await t.get("games",e);if(!a)throw Error("Game not found");await t.put("games",{...a,eval:r}),g()},[t,g]),y=(0,s.useCallback)(async e=>{if(t)return t.get("games",e)},[t]),b=(0,s.useCallback)(async e=>{if(!t)throw Error("Database not initialized");await t.delete("games",e),g()},[t,g]),{gameId:w}=(0,l.useRouter)().query;return(0,s.useEffect)(()=>{"string"==typeof w?y(parseInt(w)).then(e=>{v(e)}):v(void 0)},[w,v,y]),{addGame:p,setGameEval:x,getGame:y,deleteGame:b,games:i,isReady:null!==t,gameFromUrl:f}}},15888:(e,t,r)=>{r.d(t,{h:()=>Q});var a=r(37876),n=r(62034),i=r(59434),o=r(57065),l=r(99542),s=r(85278),c=r(72359),d=r(14232),u=r(48232),m=r(54587),h=r.n(m),f=r(23993),v=r(3830),g=r(31086);function p(e){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fade-out-bg",style:{position:"absolute",inset:0,backgroundColor:e.backgroundColor,zIndex:90}}),(0,a.jsx)(h(),{className:"move-up-right-shrink",src:e.iconSrc,alt:"end icon",width:e.boardSize/8,height:e.boardSize/8,style:{position:"absolute",zIndex:100},"data-sentry-element":"Image","data-sentry-source-file":"endIcon.tsx"})]})}var x=r(1588);let y={position:"absolute",width:"100%",height:"100%",backgroundColor:"#eb6150",opacity:"0.8"},b={position:"absolute",width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,.14)",padding:"35%",backgroundClip:"content-box",borderRadius:"50%",boxSizing:"border-box"},w=e=>({position:"absolute",width:"100%",height:"100%",backgroundColor:e?f.k_[e]:"#fad541",opacity:.5});var k=r(92003),S=r(87376);function C(e){let{height:t,boardOrientation:r,currentPositionAtom:o=(0,l.eU)({})}=e,[c,m]=(0,d.useState)({whiteBarPercentage:50,label:"0.0"}),h=(0,s.md)(o);return(0,d.useEffect)(()=>{var e;let t=null==h?void 0:null===(e=h.eval)||void 0===e?void 0:e.lines[0];h.eval&&t&&!(t.depth<6)&&m((0,S.nY)(h.eval))},[h]),(0,a.jsxs)(i.A,{container:!0,justifyContent:"center",alignItems:"center",width:{xs:"1.6rem",sm:"2rem"},height:t,border:"1px solid black",borderRadius:{xs:"3px",sm:"5px"},"data-sentry-element":"Grid","data-sentry-component":"EvaluationBar","data-sentry-source-file":"evaluationBar.tsx",children:[(0,a.jsx)(n.A,{sx:{backgroundColor:r===u.Q1.White?"#424242":"white",transition:"height 1s"},height:"".concat(r===u.Q1.White?100-c.whiteBarPercentage:c.whiteBarPercentage,"%"),width:"100%",borderRadius:100===c.whiteBarPercentage?{xs:"3px",sm:"5px"}:{xs:"3px 3px 0 0",sm:"5px 5px 0 0"},"data-sentry-element":"Box","data-sentry-source-file":"evaluationBar.tsx",children:(0,a.jsx)(k.A,{color:r===u.Q1.White?"white":"black",textAlign:"center",width:"100%",fontSize:{xs:"0.9rem",sm:"1rem"},"data-sentry-element":"Typography","data-sentry-source-file":"evaluationBar.tsx",children:c.whiteBarPercentage<50&&r===u.Q1.White||c.whiteBarPercentage>=50&&r===u.Q1.Black?c.label:""})}),(0,a.jsx)(n.A,{sx:{backgroundColor:r===u.Q1.White?"white":"#424242",transition:"height 1s"},height:"".concat(r===u.Q1.White?c.whiteBarPercentage:100-c.whiteBarPercentage,"%"),width:"100%",display:"flex",alignItems:"flex-end",borderRadius:100===c.whiteBarPercentage?{xs:"3px",sm:"5px"}:{xs:"0 0 3px 3px",sm:"0 0 5px 5px"},"data-sentry-element":"Box","data-sentry-source-file":"evaluationBar.tsx",children:(0,a.jsx)(k.A,{color:r===u.Q1.White?"black":"white",textAlign:"center",width:"100%",fontSize:{xs:"0.9rem",sm:"1rem"},"data-sentry-element":"Typography","data-sentry-source-file":"evaluationBar.tsx",children:c.whiteBarPercentage>=50&&r===u.Q1.White||c.whiteBarPercentage<50&&r===u.Q1.Black?c.label:""})})]})}var E=r(42993),A=r(92705);function j(e){let{fen:t,color:r}=e,n=(0,d.useMemo)(()=>(0,S.Kz)(t,r).map(e=>{let{piece:t,count:r}=e;return B(t,r)}),[t,r]),o=(0,d.useMemo)(()=>{let e=(0,S.LR)(t);return r===u.Q1.White?e:-e},[t,r]);return(0,a.jsxs)(i.A,{container:!0,alignItems:"end",spacing:.7,size:"auto",marginLeft:"-".concat(.165,"rem"),"data-sentry-element":"Grid","data-sentry-component":"CapturedPieces","data-sentry-source-file":"capturedPieces.tsx",children:[(0,a.jsx)(E.A,{direction:"row",spacing:.1,"data-sentry-element":"Stack","data-sentry-source-file":"capturedPieces.tsx",children:n}),o>0&&(0,a.jsxs)(k.A,{lineHeight:"".concat(.8250000000000001,"rem"),fontSize:"".concat(.8250000000000001,"rem"),marginLeft:.3,children:["+",o]})]})}let B=(e,t)=>t?(0,a.jsx)(E.A,{direction:"row",spacing:"-".concat(.66,"rem"),"data-sentry-element":"Stack","data-sentry-component":"getCapturedPiecesComponents","data-sentry-source-file":"capturedPieces.tsx",children:Array(t).fill(0).map((t,r)=>(0,a.jsx)(n.A,{width:"".concat(1.1,"rem"),height:"".concat(1.1,"rem"),sx:{backgroundImage:"url(".concat(x.o,"/piece/cardinal/").concat(e,".svg)"),backgroundRepeat:"no-repeat"}},"".concat(e,"-").concat(r)))},e):null;var I=r(94309);function P(e){let{color:t,player:r,gameAtom:n}=e,o=(0,s.md)(n),l=o.fen(),c=(0,d.useMemo)(()=>{if(o.turn()===t){var e,r;let t=null===(e=o.history({verbose:!0}).at(-1))||void 0===e?void 0:e.before;return _(null===(r=o.getComments().find(e=>{let{fen:r}=e;return r===t}))||void 0===r?void 0:r.comment)}return _(o.getComment())},[o,t]);return(0,a.jsxs)(i.A,{container:!0,justifyContent:"space-between",alignItems:"center",size:12,"data-sentry-element":"Grid","data-sentry-component":"PlayerHeader","data-sentry-source-file":"playerHeader.tsx",children:[(0,a.jsxs)(E.A,{direction:"row","data-sentry-element":"Stack","data-sentry-source-file":"playerHeader.tsx",children:[(0,a.jsx)(A.A,{src:r.avatarUrl,alt:r.name,variant:"circular",sx:{width:40,height:40,backgroundColor:t===u.Q1.White?"white":"black",color:t===u.Q1.White?"black":"white",border:"1px solid black"},"data-sentry-element":"Avatar","data-sentry-source-file":"playerHeader.tsx",children:r.name[0].toUpperCase()}),(0,a.jsxs)(E.A,{marginLeft:1,"data-sentry-element":"Stack","data-sentry-source-file":"playerHeader.tsx",children:[(0,a.jsxs)(E.A,{direction:"row","data-sentry-element":"Stack","data-sentry-source-file":"playerHeader.tsx",children:[(0,a.jsx)(k.A,{fontSize:"0.9rem","data-sentry-element":"Typography","data-sentry-source-file":"playerHeader.tsx",children:r.name}),r.rating&&(0,a.jsxs)(k.A,{marginLeft:.5,fontSize:"0.9rem",fontWeight:"200",children:["(",r.rating,")"]})]}),(0,a.jsx)(j,{fen:l,color:t,"data-sentry-element":"CapturedPieces","data-sentry-source-file":"playerHeader.tsx"})]})]}),c&&(0,a.jsxs)(k.A,{align:"center",sx:{backgroundColor:t===u.Q1.White?"white":"black",color:t===u.Q1.White?"black":"white"},borderRadius:"5px",padding:.8,border:"1px solid #424242",width:"5rem",textAlign:"right",children:[c.hours?"".concat(c.hours,":"):"",(0,I.Yn)(c.minutes),":",(0,I.Yn)(c.seconds),c.hours||c.minutes||c.seconds>20?"":".".concat(c.tenths)]})]})}let _=e=>{if(!e)return;let t=e.match(/\[%clk (\d+):(\d+):(\d+)(?:\.(\d*))?\]/);if(t)return{hours:parseInt(t[1]),minutes:parseInt(t[2]),seconds:parseInt(t[3]),tenths:t[4]?parseInt(t[4]):0}};var z=r(62465);function Q(e){var t;let{id:r,canPlay:m,gameAtom:k,boardSize:S,whitePlayer:E,blackPlayer:A,boardOrientation:j=u.Q1.White,currentPositionAtom:B=(0,l.eU)({}),showBestMoveArrow:I=!1,showPlayerMoveIconAtom:_,showEvaluationBar:Q=!1}=e,M=(0,d.useRef)(null),R=(0,s.md)(k),{playMove:W}=(0,c.j)(k),D=(0,d.useMemo)(()=>(0,l.eU)([]),[]),N=(0,s.Xr)(D),U=(0,d.useMemo)(()=>(0,l.eU)([]),[]),H=(0,s.Xr)(U),L=(0,s.md)(B),[G,K]=(0,d.useState)(!1),[O,F]=(0,d.useState)(null),[q,X]=(0,d.useState)(null),$=(0,s.md)(v._),J=(0,s.md)(v.U),Y=R.fen();(0,d.useEffect)(()=>{N([])},[Y,N]);let V=(0,d.useCallback)(e=>{let{piece:t}=e;return!R.isGameOver()&&!!m&&(!0===m||m===t[0])},[m,R]),Z=(0,d.useCallback)((e,t,r)=>{var a,n;return!!V({piece:r})&&!!W({from:e,to:t,promotion:null!==(n=null===(a=r[1])||void 0===a?void 0:a.toLowerCase())&&void 0!==n?n:"q"})},[V,W]),ee=(0,d.useCallback)(e=>{F(null!=e?e:null),X(null),K(!1),e?H(R.moves({square:e,verbose:!0}).map(e=>e.to)):H([])},[F,X,H,R]),et=(0,d.useCallback)((e,t)=>{if(N([]),!O){if(t&&!V({piece:t}))return;ee(e);return}let r=R.moves({square:O,verbose:!0}).find(t=>t.to===e);if(!r){ee(e);return}if(X(e),"p"===r.piece&&("w"===r.color&&"8"===e[1]||"b"===r.color&&"1"===e[1])){K(!0);return}ee(W({from:O,to:e})?void 0:e)},[R,V,O,W,ee,N]),er=(0,d.useCallback)(e=>{N(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},[N]),ea=(0,d.useCallback)((e,t)=>{ee(t)},[ee]),en=(0,d.useCallback)(()=>{ee()},[ee]),ei=(0,d.useCallback)((e,t,r)=>{var a,n;if(!e)return!1;let i=null!==(n=null===(a=e[1])||void 0===a?void 0:a.toLowerCase())&&void 0!==n?n:"q";if(O&&q){let e=W({from:O,to:q,promotion:i});return ee(),!!e}if(t&&r){let e=W({from:t,to:r,promotion:i});return ee(),!!e}return ee(O),!1},[O,q,W,ee]),eo=(0,d.useMemo)(()=>{var e,t;let r=null==L?void 0:null===(e=L.lastEval)||void 0===e?void 0:e.bestMove,a=null==L?void 0:null===(t=L.eval)||void 0===t?void 0:t.moveClassification;return r&&I&&a!==u.eK.Best&&a!==u.eK.Opening&&a!==u.eK.Forced&&a!==u.eK.Perfect?[[r.slice(0,2),r.slice(2,4),(0,z.A)(f.k_[u.eK.Best]).spin(-J).toHexString()]]:[]},[L,I,J]),el=(0,d.useMemo)(()=>(function(e){let{currentPositionAtom:t,clickedSquaresAtom:r,playableSquaresAtom:n,showPlayerMoveIconAtom:i=(0,l.eU)(!1),boardSize:o}=e,c=(0,d.forwardRef)((e,l)=>{var c,m,f;let{children:k,square:S,style:C}=e,E=(0,s.md)(i),A=(0,s.md)(t),j=(0,s.md)(r),B=(0,s.md)(n),I=(0,s.md)(v.U),P=null===(c=A.lastMove)||void 0===c?void 0:c.from,_=null===(m=A.lastMove)||void 0===m?void 0:m.to,z=null==A?void 0:null===(f=A.eval)||void 0===f?void 0:f.moveClassification,Q=(0,s.md)(g.Sd),T=(0,d.useMemo)(()=>j.includes(S)?y:P===S||_===S?w(z):void 0,[j,S,P,_,z]),M=(0,d.useMemo)(()=>B.includes(S)?b:void 0,[B,S]),R=Q.findPiece({color:"w",type:"k"})[0],W=Q.findPiece({color:"b",type:"k"})[0];return(0,a.jsxs)("div",{ref:l,style:{...C,position:"relative",filter:I?"hue-rotate(-".concat(I,"deg)"):void 0},children:[k,T&&(0,a.jsx)("div",{style:T}),M&&(0,a.jsx)("div",{style:M}),z&&E&&S===_&&(0,a.jsx)(h(),{src:"".concat(x.o,"/icons/").concat(z,".png"),alt:"move-icon",width:Math.min(40,.06*o),height:Math.min(40,.06*o),style:{position:"absolute",top:Math.max(-13.5,-.03*o)+"px",right:Math.max(-13.5,-.03*o)+"px",zIndex:100}}),Q.isCheckmate()&&S===R&&(0,a.jsx)(p,{iconSrc:Q.turn()===u.Q1.White?"".concat(x.o,"/icons/checkmate.webp"):"".concat(x.o,"/icons/winner.webp"),backgroundColor:Q.turn()===u.Q1.White?"red":"limegreen",boardSize:o}),Q.isCheckmate()&&S===W&&(0,a.jsx)(p,{iconSrc:Q.turn()===u.Q1.Black?"".concat(x.o,"/icons/checkmate.webp"):"".concat(x.o,"/icons/winner.webp"),backgroundColor:Q.turn()===u.Q1.Black?"red":"limegreen",boardSize:o}),Q.isDraw()&&(S===W||S===R)&&(0,a.jsx)(p,{iconSrc:"".concat(x.o,"/icons/draw.webp"),backgroundColor:"skyblue",boardSize:o})]})});return c.displayName="SquareRenderer",c})({currentPositionAtom:B,clickedSquaresAtom:D,playableSquaresAtom:U,showPlayerMoveIconAtom:_,boardSize:S||400}),[B,D,U,_,S]),es=(0,d.useMemo)(()=>T.reduce((e,t)=>(e[t]=e=>{let{squareWidth:r}=e;return(0,a.jsx)(n.A,{width:r,height:r,sx:{backgroundImage:"url(".concat(x.o,"/piece/").concat($,"/").concat(t,".svg)"),backgroundSize:"contain"}})},e),{}),[$]),ec=(0,d.useMemo)(()=>{let e={borderRadius:"5px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.5)"};return J?{...e,filter:"hue-rotate(".concat(J,"deg)")}:e},[J]);return(0,a.jsxs)(i.A,{container:!0,justifyContent:"center",alignItems:"center",wrap:"nowrap",width:S,"data-sentry-element":"Grid","data-sentry-component":"Board","data-sentry-source-file":"index.tsx",children:[Q&&(0,a.jsx)(C,{height:(null==M?void 0:null===(t=M.current)||void 0===t?void 0:t.offsetHeight)||S||400,boardOrientation:j,currentPositionAtom:B}),(0,a.jsxs)(i.A,{container:!0,rowGap:1.5,justifyContent:"center",alignItems:"center",paddingLeft:{xs:.5,sm:2*!!Q},size:"grow","data-sentry-element":"Grid","data-sentry-source-file":"index.tsx",children:[(0,a.jsx)(P,{color:j===u.Q1.White?u.Q1.Black:u.Q1.White,gameAtom:k,player:j===u.Q1.White?A:E,"data-sentry-element":"PlayerHeader","data-sentry-source-file":"index.tsx"}),(0,a.jsx)(i.A,{container:!0,justifyContent:"center",alignItems:"center",ref:M,size:12,"data-sentry-element":"Grid","data-sentry-source-file":"index.tsx",children:(0,a.jsx)(o.Ve,{id:"".concat(r,"-").concat(m),position:Y,onPieceDrop:Z,boardOrientation:j===u.Q1.White?"white":"black",customBoardStyle:ec,customArrows:eo,isDraggablePiece:V,customSquare:el,onSquareClick:et,onSquareRightClick:er,onPieceDragBegin:ea,onPieceDragEnd:en,onPromotionPieceSelect:ei,showPromotionDialog:G,promotionToSquare:q,animationDuration:200,customPieces:es,"data-sentry-element":"Chessboard","data-sentry-source-file":"index.tsx"})}),(0,a.jsx)(P,{color:j,gameAtom:k,player:j===u.Q1.White?E:A,"data-sentry-element":"PlayerHeader","data-sentry-source-file":"index.tsx"})]})]})}let T=["wP","wB","wN","wR","wQ","wK","bP","bB","bN","bR","bQ","bK"]},30333:(e,t,r)=>{r.d(t,{$:()=>s});var a=r(16042),n=r(69114),i=r(65364);let o=i.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID?{apiKey:i.env.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:i.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:i.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,storageBucket:i.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:i.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:i.env.NEXT_PUBLIC_FIREBASE_APP_ID,measurementId:i.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID}:void 0,l=o?(0,a.Wp)(o):void 0;(0,n.TT)().then(e=>{e&&l&&(0,n.P5)(l)});let s=async(e,t)=>{if("localhost"===window.location.hostname||!await (0,n.TT)()||!l)return;let r=(0,n.P5)(l);(0,n.$s)(r,e,t)}},46852:(e,t,r)=>{r.d(t,{A:()=>f});var a=r(37876),n=r(98594),i=r(59434),o=r(42993),l=r(92003),s=r(13679),c=r(71733),d=r(6482),u=r(35268),m=r(19330),h=r(14232);function f(e){let{min:t,max:r,label:u,value:m,setValue:f,size:g,marksFilter:p,step:x=1,infoContent:y}=e,[b,w]=(0,h.useState)(null),k=e=>{w(e.currentTarget)},S=()=>{w(null)};return(0,a.jsxs)(i.A,{container:!0,justifyContent:"center",alignItems:"center",size:null!=g?g:11,"data-sentry-element":"Grid","data-sentry-component":"Slider","data-sentry-source-file":"slider.tsx",children:[(0,a.jsxs)(o.A,{direction:"row",width:"100%","data-sentry-element":"Stack","data-sentry-source-file":"slider.tsx",children:[(0,a.jsx)(l.A,{id:"input-".concat(u),variant:"body2","data-sentry-element":"Typography","data-sentry-source-file":"slider.tsx",children:1===x&&p?u:"".concat(u,": ").concat(m)}),!!y&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.x,{onClickAway:S,children:(0,a.jsx)(c.A,{size:"medium","aria-owns":b?"mouse-over-popover":void 0,"aria-haspopup":"true",onClick:k,onMouseEnter:k,onMouseLeave:S,sx:{ml:1,padding:0},"aria-label":"Help about number of threads",children:(0,a.jsx)(n.In,{icon:"mdi:info-outline",width:"1.1rem"})})}),(0,a.jsx)(d.Ay,{id:"mouse-over-popover",open:!!b,anchorEl:b,onClose:S,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},sx:{pointerEvents:"none"},disableRestoreFocus:!0,children:(0,a.jsx)(l.A,{variant:"body2",sx:{padding:2,maxWidth:500},children:y})})]})]}),(0,a.jsx)(v,{min:t,max:r,marks:p?Array.from({length:r-t+1},(e,r)=>({value:r+t,label:"".concat(r+t)})).filter((e,t)=>t%p==0):void 0,step:x,valueLabelDisplay:"off",value:m,onChange:(e,t)=>f(t),"aria-labelledby":"input-".concat(u),"data-sentry-element":"CustomSlider","data-sentry-source-file":"slider.tsx"})]})}let v=(0,u.Ay)(m.Ay)(()=>({".MuiSlider-markLabel":{fontSize:"0.8rem",lineHeight:"0.8rem"},".MuiSlider-thumb":{width:"18px",height:"18px"},marginBottom:"1rem"}))},55246:(e,t,r)=>{r.d(t,{K:()=>l});var a=r(85278),n=r(12839),i=r(41615),o=r(80721);let l=e=>{var t,r,i,o;let l=(0,a.md)(e),{gameFromUrl:c}=(0,n.R)(),d=l.getHeaders(),u=d.White&&"?"!==d.White?d.White:void 0,m=d.Black&&"?"!==d.Black?d.Black:void 0,h=(null==c?void 0:null===(t=c.white)||void 0===t?void 0:t.name)||u||"White",f=(null==c?void 0:null===(r=c.black)||void 0===r?void 0:r.name)||m||"Black",v=(null==c?void 0:null===(i=c.white)||void 0===i?void 0:i.rating)||Number(d.WhiteElo)||void 0,g=(null==c?void 0:null===(o=c.black)||void 0===o?void 0:o.rating)||Number(d.BlackElo)||void 0,p=((null==c?void 0:c.site)||d.Site||"unknown").toLowerCase().includes("chess.com"),x=s(h,p&&!!h&&"White"!==h),y=s(f,p&&!!f&&"Black"!==f);return{white:{name:h,rating:v,avatarUrl:null!=x?x:void 0},black:{name:f,rating:g,avatarUrl:null!=y?y:void 0}}},s=(e,t)=>{let{data:r}=(0,i.I)({queryKey:["CCAvatar",e],enabled:t,queryFn:()=>(0,o.e)(e),staleTime:36e5,gcTime:864e5});return r}},57705:(e,t,r)=>{r.d(t,{l:()=>n});var a=r(14232);let n=()=>{var e,t,r;let[n,i]=(0,a.useState)({width:null!==(r=null===(t=document)||void 0===t?void 0:null===(e=t.querySelector(".MuiGrid2-root"))||void 0===e?void 0:e.clientWidth)&&void 0!==r?r:500,height:window?window.innerHeight-120:500});return(0,a.useEffect)(()=>{var e;let t=null===(e=document)||void 0===e?void 0:e.querySelector(".MuiGrid2-root");if(!t)return;let r=new ResizeObserver(()=>i(e=>({...e,width:t.clientWidth})));return r.observe(t),()=>{r.disconnect()}},[]),(0,a.useEffect)(()=>{let e=()=>{i(e=>({...e,height:window.innerHeight-100}))};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),n}},59696:(e,t,r)=>{r.d(t,{s:()=>o});var a=r(37876),n=r(77328),i=r.n(n);let o=e=>{let{title:t}=e;return(0,a.jsxs)(i(),{"data-sentry-element":"Head","data-sentry-component":"PageTitle","data-sentry-source-file":"pageTitle.tsx",children:[(0,a.jsx)("title",{children:t}),(0,a.jsx)("meta",{property:"og:title",content:t,"data-sentry-element":"meta","data-sentry-source-file":"pageTitle.tsx"})]})}},72359:(e,t,r)=>{r.d(t,{j:()=>p});var a=r(87376),n=r(1588);let i=null,o=null,l=new Map,s={move:"".concat(n.o,"/sounds/move.mp3"),capture:"".concat(n.o,"/sounds/capture.mp3"),illegalMove:"".concat(n.o,"/sounds/error.mp3")},c=async e=>{o&&clearTimeout(o),o=setTimeout(async()=>{i||(i=new AudioContext),"suspended"===i.state&&await i.resume();let t=l.get(s[e]);if(!t){let r=await fetch(s[e]),a=await i.decodeAudioData(await r.arrayBuffer());t=a,l.set(s[e],a)}let r=i.createBufferSource();r.buffer=t;let a=i.createGain();a.gain.value=.3,r.connect(a),a.connect(i.destination),r.start()},1)},d=()=>c("capture"),u=()=>c("illegalMove"),m=()=>c("move"),h=e=>e?e.captured?d():m():u();var f=r(22277),v=r(85278),g=r(14232);let p=e=>{let[t,r]=(0,v.fp)(e),n=(0,g.useCallback)(e=>{let t=new f.d$;t.loadPgn(e),r(t)},[r]),i=(0,g.useCallback)(e=>{let t=new f.d$(null==e?void 0:e.fen);(null==e?void 0:e.noHeaders)||(0,a.nt)(t,e),r(t)},[r]),o=(0,g.useCallback)(()=>{let e=new f.d$;if(0===t.history().length){var r,a;let n=t.pgn().split("]");if(["1-0","0-1","1/2-1/2","*"].includes(null!==(a=null===(r=n.at(-1))||void 0===r?void 0:r.trim())&&void 0!==a?a:""))return e.loadPgn(n.slice(0,-1).join("]")+"]"),e}return e.loadPgn(t.pgn()),e},[t]),l=(0,g.useCallback)(e=>{let t=e?(0,a.w0)(e):o();t.load(t.getHeaders().FEN||f.OS,{preserveHeaders:!0}),r(t)},[o,r]),s=(0,g.useCallback)(e=>{let t=o();try{let{comment:a,...n}=e,i=t.move(n);return a&&t.setComment(a),r(t),h(i),i}catch(e){return u(),null}},[o,r]),c=(0,g.useCallback)(e=>{let t=o(),a=null;for(let r of e)a=t.move(r);r(t),a&&h(a)},[o,r]);return{setPgn:n,reset:i,playMove:s,undoMove:(0,g.useCallback)(()=>{let e=o(),t=e.undo();t&&h(t),r(e)},[o,r]),goToMove:(0,g.useCallback)((e,t)=>{if(e<0)return;let a=new f.d$;a.loadPgn(t.pgn());let n=t.history().length;if(e>n)return;let i={};for(let t=n;t>e;t--)i=a.undo();r(a),h(i)},[r]),resetToStartingPosition:l,addMoves:c}}},80542:(e,t,r)=>{r.d(t,{K:()=>u});var a=r(3642),n=r(49651),i=r(31662),o=r(98510),l=r(23937),s=r(1129),c=r(48232),d=r(14232);let u=e=>{let[t,r]=(0,d.useState)(null);return(0,d.useEffect)(()=>{e&&(e===c.Qz.Stockfish11||(0,a.TH)())&&m(e).then(e=>{r(t=>(null==t||t.shutdown(),e))})},[e]),t},m=e=>{switch(e){case c.Qz.Stockfish17_1:return s.D.create(!1);case c.Qz.Stockfish17_1Lite:return s.D.create(!0);case c.Qz.Stockfish17:return l.f.create(!1);case c.Qz.Stockfish17Lite:return l.f.create(!0);case c.Qz.Stockfish16_1:return o.m.create(!1);case c.Qz.Stockfish16_1Lite:return o.m.create(!0);case c.Qz.Stockfish16:return i.K.create(!1);case c.Qz.Stockfish16NNUE:return i.K.create(!0);case c.Qz.Stockfish11:return n.T.create()}}},89665:(e,t,r)=>{r.d(t,{v:()=>i});var a=r(85278),n=r(14232);function i(e,t){let[r,i]=(0,n.useState)(""),[o,l]=(0,a.fp)(t);return(0,n.useEffect)(()=>{var t;i(e);let r=window.localStorage.getItem(e);if(!r)return;let a="undefined"===(t=r)?void 0:JSON.parse(t);a&&l(a)},[e,l]),(0,n.useEffect)(()=>{r===e&&window.localStorage.setItem(e,JSON.stringify(o))},[e,r,o]),[o,l]}}}]);