!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="e999cdb8-f0ff-4273-a6de-fbeb3dd4236d",e._sentryDebugIdIdentifier="sentry-dbid-e999cdb8-f0ff-4273-a6de-fbeb3dd4236d")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[271],{12839:(e,t,a)=>{"use strict";a.d(t,{R:()=>u});var n=a(87376),i=a(99523),l=a(99542),r=a(85278),s=a(89099),d=a(14232);let o=(0,l.eU)([]),c=(0,l.eU)(!1),u=e=>{let[t,a]=(0,d.useState)(null),[l,u]=(0,r.fp)(o),[f,h]=(0,r.fp)(c),[m,y]=(0,d.useState)(void 0);(0,d.useEffect)(()=>{void 0!==e&&h(e)},[e,h]),(0,d.useEffect)(()=>{(async()=>{a(await (0,i.P2)("games",1,{upgrade(e){e.createObjectStore("games",{keyPath:"id",autoIncrement:!0})}}))})()},[]);let g=(0,d.useCallback)(async()=>{t&&f&&u(await t.getAll("games"))},[t,f,u]);(0,d.useEffect)(()=>{g()},[g]);let b=(0,d.useCallback)(async e=>{if(!t)throw Error("Database not initialized");let a=(0,n.mi)(e),i=await t.add("games",a);return g(),i},[t,g]),p=(0,d.useCallback)(async(e,a)=>{if(!t)throw Error("Database not initialized");let n=await t.get("games",e);if(!n)throw Error("Game not found");await t.put("games",{...n,eval:a}),g()},[t,g]),w=(0,d.useCallback)(async e=>{if(t)return t.get("games",e)},[t]),v=(0,d.useCallback)(async e=>{if(!t)throw Error("Database not initialized");await t.delete("games",e),g()},[t,g]),{gameId:x}=(0,s.useRouter)().query;return(0,d.useEffect)(()=>{"string"==typeof x?w(parseInt(x)).then(e=>{y(e)}):y(void 0)},[x,y,w]),{addGame:b,setGameEval:p,getGame:w,deleteGame:v,games:l,isReady:null!==t,gameFromUrl:m}}},34160:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var n=a(37876),i=a(59434),l=a(92003),r=a(98594),s=a(22999),d=a(82277),o=a(2629),c=a(14232),u=a(22704),f=a(65397),h=a(50002),m=a(12839),y=a(89099),g=a(59696);let b={...s._,noRowsLabel:"No games found"};function p(){let{games:e,deleteGame:t}=(0,m.R)(!0),a=(0,y.useRouter)();console.log(e);let s=(0,c.useCallback)(e=>async()=>{if("number"!=typeof e)throw Error("Unable to remove game");await t(e)},[t]),p=(0,c.useCallback)(t=>async()=>{var a,n;if("number"!=typeof t)throw Error("Unable to copy game");await (null===(n=navigator.clipboard)||void 0===n?void 0:null===(a=n.writeText)||void 0===a?void 0:a.call(n,e[t-1].pgn))},[e]),w=(0,c.useMemo)(()=>[{field:"event",headerName:"Event",width:150},{field:"site",headerName:"Site",width:150},{field:"date",headerName:"Date",width:150},{field:"round",headerName:"Round",headerAlign:"center",align:"center",width:150},{field:"whiteLabel",headerName:"White",width:200,headerAlign:"center",align:"center",valueGetter:(e,t)=>{var a,n;return"".concat(null!==(a=t.white.name)&&void 0!==a?a:"Unknown"," (").concat(null!==(n=t.white.rating)&&void 0!==n?n:"?",")")}},{field:"result",headerName:"Result",headerAlign:"center",align:"center",width:100},{field:"blackLabel",headerName:"Black",width:200,headerAlign:"center",align:"center",valueGetter:(e,t)=>{var a,n;return"".concat(null!==(a=t.black.name)&&void 0!==a?a:"Unknown"," (").concat(null!==(n=t.black.rating)&&void 0!==n?n:"?",")")}},{field:"eval",headerName:"Evaluation",type:"boolean",headerAlign:"center",align:"center",width:100,valueGetter:(e,t)=>!!t.eval},{field:"openEvaluation",type:"actions",headerName:"Analyze",width:100,cellClassName:"actions",getActions:e=>{let{id:t}=e;return[(0,n.jsx)(d.Z,{icon:(0,n.jsx)(r.In,{icon:"streamline:magnifying-glass-solid",width:"20px"}),label:"Open Evaluation",onClick:()=>a.push({pathname:"/",query:{gameId:t}}),color:"inherit"},"".concat(t,"-open-eval-button"))]}},{field:"delete",type:"actions",headerName:"Delete",width:100,cellClassName:"actions",getActions:e=>{let{id:t}=e;return[(0,n.jsx)(d.Z,{icon:(0,n.jsx)(r.In,{icon:"mdi:delete-outline",color:u.A[400],width:"20px"}),label:"Delete",onClick:s(t),color:"inherit"},"".concat(t,"-delete-button"))]}},{field:"copy pgn",type:"actions",headerName:"Copy pgn",width:100,cellClassName:"actions",getActions:e=>{let{id:t}=e;return[(0,n.jsx)(d.Z,{icon:(0,n.jsx)(r.In,{icon:"ri:clipboard-line",color:f.A[400],width:"20px"}),label:"Copy pgn",onClick:p(t),color:"inherit"},"".concat(t,"-copy-button"))]}}],[s,p,a]);return(0,n.jsxs)(i.A,{container:!0,justifyContent:"center",alignItems:"center",gap:4,marginTop:6,"data-sentry-element":"Grid","data-sentry-component":"GameDatabase","data-sentry-source-file":"database.tsx",children:[(0,n.jsx)(g.s,{title:"Chesskit Game Database","data-sentry-element":"PageTitle","data-sentry-source-file":"database.tsx"}),(0,n.jsx)(i.A,{container:!0,justifyContent:"center",alignItems:"center",size:12,"data-sentry-element":"Grid","data-sentry-source-file":"database.tsx",children:(0,n.jsx)(h.A,{"data-sentry-element":"LoadGameButton","data-sentry-source-file":"database.tsx"})}),(0,n.jsx)(i.A,{container:!0,justifyContent:"center",alignItems:"center",size:12,"data-sentry-element":"Grid","data-sentry-source-file":"database.tsx",children:(0,n.jsxs)(l.A,{variant:"subtitle2","data-sentry-element":"Typography","data-sentry-source-file":"database.tsx",children:["You have ",e.length," game",1!==e.length&&"s"," in your database"]})}),(0,n.jsx)(i.A,{maxWidth:"100%",minWidth:"50px","data-sentry-element":"Grid","data-sentry-source-file":"database.tsx",children:(0,n.jsx)(o.z,{"aria-label":"Games list",rows:e,columns:w,disableColumnMenu:!0,hideFooter:!0,localeText:b,initialState:{sorting:{sortModel:[{field:"date",sort:"desc"}]}},"data-sentry-element":"DataGrid","data-sentry-source-file":"database.tsx"})})]})}},59696:(e,t,a)=>{"use strict";a.d(t,{s:()=>r});var n=a(37876),i=a(77328),l=a.n(i);let r=e=>{let{title:t}=e;return(0,n.jsxs)(l(),{"data-sentry-element":"Head","data-sentry-component":"PageTitle","data-sentry-source-file":"pageTitle.tsx",children:[(0,n.jsx)("title",{children:t}),(0,n.jsx)("meta",{property:"og:title",content:t,"data-sentry-element":"meta","data-sentry-source-file":"pageTitle.tsx"})]})}},94186:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/database",function(){return a(34160)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[311,919,867,961,710,2,636,593,792],()=>t(94186)),_N_E=e.O()}]);