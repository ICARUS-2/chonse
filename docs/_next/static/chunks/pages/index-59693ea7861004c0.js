!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="f2db1eca-3147-412f-899f-643902409466",e._sentryDebugIdIdentifier="sentry-dbid-f2db1eca-3147-412f-899f-643902409466")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{16760:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(64525)}])},64525:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>e5});var a=n(37876),i=n(85278),s=n(31086),r=n(14232),o=n(57705),l=n(48232),d=n(24936),c=n(55246);function m(){let e=(0,o.l)(),t=(0,i.md)(s.MA),n=(0,i.md)(s.XL),{white:m,black:u}=(0,c.K)(s._X),y=(0,r.useMemo)(()=>{var t;let n=e.width,a=e.height;return(null===(t=window)||void 0===t?void 0:t.innerWidth)<1200?Math.min(n,a-150):Math.min(n-700,.92*a)},[e]);return(0,a.jsx)(d.h,{id:"AnalysisBoard",boardSize:y,canPlay:!0,gameAtom:s.Sd,whitePlayer:m,blackPlayer:u,boardOrientation:t?l.Q1.White:l.Q1.Black,currentPositionAtom:s.eU,showBestMoveArrow:n,showPlayerMoveIconAtom:s.a2,showEvaluationBar:!0,"data-sentry-element":"Board","data-sentry-component":"BoardContainer","data-sentry-source-file":"index.tsx"})}var u=n(98594),y=n(59434),x=n(92003),g=n(12839);function h(){let{gameFromUrl:e}=(0,g.R)(),t=(0,i.md)(s._X).getHeaders();if(!(void 0!==e||t.White&&"?"!==t.White))return null;let n=(null==e?void 0:e.termination)||t.Termination||"?",r=n.split(" ").length>2?n:(null==e?void 0:e.result)||t.Result||"?";return(0,a.jsxs)(y.A,{container:!0,justifyContent:"space-evenly",alignItems:"center",rowGap:1,columnGap:3,size:11,"data-sentry-element":"Grid","data-sentry-component":"GamePanel","data-sentry-source-file":"gamePanel.tsx",children:[(0,a.jsx)(y.A,{container:!0,justifyContent:"center",alignItems:"center",size:"grow","data-sentry-element":"Grid","data-sentry-source-file":"gamePanel.tsx",children:(0,a.jsxs)(x.A,{noWrap:!0,fontSize:"0.9rem","data-sentry-element":"Typography","data-sentry-source-file":"gamePanel.tsx",children:["Site : ",(null==e?void 0:e.site)||t.Site||"?"]})}),(0,a.jsx)(y.A,{container:!0,justifyContent:"center",alignItems:"center",size:"grow","data-sentry-element":"Grid","data-sentry-source-file":"gamePanel.tsx",children:(0,a.jsxs)(x.A,{noWrap:!0,fontSize:"0.9rem","data-sentry-element":"Typography","data-sentry-source-file":"gamePanel.tsx",children:["Date : ",(null==e?void 0:e.date)||t.Date||"?"]})}),(0,a.jsx)(y.A,{container:!0,justifyContent:"center",alignItems:"center",size:"grow","data-sentry-element":"Grid","data-sentry-source-file":"gamePanel.tsx",children:(0,a.jsxs)(x.A,{noWrap:!0,fontSize:"0.9rem","data-sentry-element":"Typography","data-sentry-source-file":"gamePanel.tsx",children:["Result : ",r]})})]})}var f=n(80046),p=n(72359),v=n(22277),j=n(89099),w=n(71514);function A(){let e=(0,j.useRouter)(),t=(0,i.md)(s._X),{setPgn:n}=(0,p.j)(s._X),{resetToStartingPosition:o}=(0,p.j)(s.Sd),{gameFromUrl:l}=(0,g.R)(),d=(0,i.Xr)(s.Mx),c=(0,i.Xr)(s.MA),m=(0,i.md)(s.xg),u=(0,r.useMemo)(()=>t.history().join(),[t]),y=(0,r.useCallback)((e,t,a)=>{let i=new v.d$;i.loadPgn(e),u!==i.history().join()&&(o(e),d(a),n(e),c(null==t||t))},[u,o,n,d,c]),{lichessGameId:x,orientation:h}=e.query;(0,r.useEffect)(()=>{let e=async e=>{let t=await (0,w.e1)(e);"string"==typeof t&&y(t,"black"!==h)};if(l){let e="Chesskit.org"!==l.site||"You"!==l.black.name;y(l.pgn,e,l.eval)}else"string"==typeof x&&x&&e(x)},[l,x,h,y]),(0,r.useEffect)(()=>{let e=e=>{try{var t;if(!(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.pgn))return;let{pgn:n,orientation:a}=e.data;y(n,"black"!==a)}catch(e){console.error("Error processing message event:",e)}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[y]);let A=void 0!==l||!!t.getHeaders().White&&"?"!==t.getHeaders().White||t.history().length>0;return m?null:(0,a.jsx)(f.A,{label:A?"Load another game":"Load game",size:"small",setGame:async t=>{await e.replace({query:{},pathname:e.pathname},void 0,{shallow:!0,scroll:!1}),y(t.pgn())},"data-sentry-element":"LoadGameButton","data-sentry-component":"LoadGame","data-sentry-source-file":"loadGame.tsx"})}var b=n(87376),k=n(3801),C=n(80542),S=n(30333),I=n(59668),B=n(81124);let M=e=>{let[t,n]=(0,i.fp)(s.eU),a=(0,i.md)(s.Mx),o=(0,i.md)(s._X),l=(0,i.md)(s.Sd),d=(0,i.md)(s.B2),c=(0,i.md)(s.FR),[m,u]=(0,i.fp)(s.Sp);return(0,r.useEffect)(()=>{var t;let i=l.history({verbose:!0}),s={lastMove:i.at(-1)},r=o.history();if(i.length<=r.length&&r.slice(0,i.length).join()===i.map(e=>e.san).join()&&(s.currentMoveIdx=i.length,a)){let e=i.length;s.eval={...a.positions[e],lines:a.positions[e].lines.slice(0,c)},s.lastEval=e>0?{...a.positions[e-1],lines:a.positions[e-1].lines.slice(0,c)}:void 0}if(!(null===(t=s.eval)||void 0===t?void 0:t.opening))for(let e of i.slice().reverse()){let t=e.after.split(" ")[0],n=B.m.find(e=>e.fen===t);if(n){s.opening=n.name;break}}if(n(s),!s.eval&&(null==e?void 0:e.getIsReady())&&e.name&&!l.isCheckmate()&&!l.isStalemate()){let t=async(t,n)=>{var a,i,s;if(!e.getIsReady())throw Error("Engine not ready");let r=m[t];if(r&&r.engine===e.name&&(null!==(i=null===(a=r.lines)||void 0===a?void 0:a.length)&&void 0!==i?i:0)>=c&&(null!==(s=r.lines[0].depth)&&void 0!==s?s:0)>=d){let e={...r,lines:r.lines.slice(0,c)};return null==n||n(e),e}let o=await e.evaluatePositionWithUpdate({fen:t,depth:d,multiPv:c,setPartialEval:n});return u(n=>({...n,[t]:{...o,engine:e.name}})),o};(async()=>{let e=await t(l.fen(),e=>{n({...s,eval:e})});if(0===i.length)return;let a=(0,b.kf)(l),r=a.fens.slice("w"===l.turn()?-3:-4),o=a.uciMoves.slice("w"===l.turn()?-2:-3),d=await t(r.slice(-2)[0]),c=r.map((t,n)=>n===r.length-2?d:n===r.length-1?e:{lines:[{pv:[],depth:0,multiPv:1,cp:1}]}),m=(0,I.R)(c,o,r);n({...s,eval:m.slice(-1)[0],lastEval:m.slice(-2)[0]})})()}return()=>{(null==e?void 0:e.getIsReady())&&(null==e||e.stopAllCurrentJobs())}},[a,l,o,e,d,c]),t};function G(){let e=(0,i.md)(s.Ju),t=(0,C.K)(e);M(t);let n=(0,i.md)(s.pN),[o,l]=(0,i.fp)(s.xg),d=(0,i.md)(s.B2),m=(0,i.md)(s.FR),{setGameEval:y,gameFromUrl:h}=(0,g.R)(),[f,p]=(0,i.fp)(s.Mx),v=(0,i.md)(s._X),j=(0,i.Xr)(s.Sp),{white:w,black:A}=(0,c.K)(s._X),I=(null==t?void 0:t.getIsReady())&&v.history().length>0&&!o,B=(0,r.useCallback)(async()=>{let a=(0,b.kf)(v);if(!(null==t?void 0:t.getIsReady())||0===a.fens.length||o)return;let i=await t.evaluateGame({...a,depth:d,multiPv:m,setEvaluationProgress:l,playersRatings:{white:null==w?void 0:w.rating,black:null==A?void 0:A.rating},workersNb:n});p(i),l(0),h&&y(h.id,i);let s=a.fens.reduce((t,n,a)=>(t[n]={...i.positions[a],engine:e},t),{});j(e=>({...e,...s})),(0,S.$)("analyze_game",{engine:e,depth:d,multiPv:m,nbPositions:a.fens.length})},[t,e,n,v,d,m,o,l,p,h,y,j,w.rating,A.rating]);return((0,r.useEffect)(()=>{l(0)},[t,l]),(0,r.useEffect)(()=>{!f&&I&&B()},[f,I,B]),o)?null:(0,a.jsx)(k.A,{variant:"contained",size:"small",startIcon:(0,a.jsx)(u.In,{icon:"streamline:magnifying-glass-solid",height:12}),onClick:B,disabled:!I,"data-sentry-element":"LoadingButton","data-sentry-component":"AnalyzeButton","data-sentry-source-file":"analyzeButton.tsx",children:(0,a.jsx)(x.A,{fontSize:"0.9em",fontWeight:"500",lineHeight:"1.4em","data-sentry-element":"Typography","data-sentry-source-file":"analyzeButton.tsx",children:f?"Analyze again":"Analyze"})})}var P=n(23993),z=n(52169),T=n(72607);let E=e=>0===e.value?null:(0,a.jsxs)(y.A,{container:!0,alignItems:"center",justifyContent:"center",wrap:"nowrap",width:"90%",columnGap:2,size:12,"data-sentry-element":"Grid","data-sentry-component":"LinearProgressBar","data-sentry-source-file":"LinearProgressBar.tsx",children:[(0,a.jsx)(x.A,{variant:"caption",align:"center","data-sentry-element":"Typography","data-sentry-source-file":"LinearProgressBar.tsx",children:e.label}),(0,a.jsx)(y.A,{sx:{width:"100%"},"data-sentry-element":"Grid","data-sentry-source-file":"LinearProgressBar.tsx",children:(0,a.jsx)(z.A,{variant:"determinate",...e,sx:e=>({borderRadius:"5px",height:"5px",["&.".concat(T.A.colorPrimary)]:{backgroundColor:e.palette.grey["light"===e.palette.mode?200:700]},["& .".concat(T.A.bar)]:{borderRadius:5,backgroundColor:P.sl}}),"data-sentry-element":"LinearProgress","data-sentry-source-file":"LinearProgressBar.tsx"})}),(0,a.jsx)(y.A,{"data-sentry-element":"Grid","data-sentry-source-file":"LinearProgressBar.tsx",children:(0,a.jsx)(x.A,{variant:"body2",color:"text.secondary","data-sentry-element":"Typography","data-sentry-source-file":"LinearProgressBar.tsx",children:"".concat(Math.round(e.value),"%")})})]});function L(){let e=(0,i.md)(s.xg);return(0,a.jsxs)(y.A,{container:!0,justifyContent:"center",alignItems:"center",rowGap:2,size:12,"data-sentry-element":"Grid","data-sentry-component":"PanelHeader","data-sentry-source-file":"index.tsx",children:[(0,a.jsxs)(y.A,{container:!0,justifyContent:"center",alignItems:"center",columnGap:1,size:12,"data-sentry-element":"Grid","data-sentry-source-file":"index.tsx",children:[(0,a.jsx)(u.In,{icon:"streamline:clipboard-check",height:24,"data-sentry-element":"Icon","data-sentry-source-file":"index.tsx"}),(0,a.jsx)(x.A,{variant:"h5",align:"center","data-sentry-element":"Typography","data-sentry-source-file":"index.tsx",children:"Game Analysis"})]}),(0,a.jsxs)(y.A,{container:!0,justifyContent:"center",alignItems:"center",rowGap:2,columnGap:12,size:12,"data-sentry-element":"Grid","data-sentry-source-file":"index.tsx",children:[(0,a.jsx)(h,{"data-sentry-element":"GamePanel","data-sentry-source-file":"index.tsx"}),(0,a.jsx)(A,{"data-sentry-element":"LoadGame","data-sentry-source-file":"index.tsx"}),(0,a.jsx)(G,{"data-sentry-element":"AnalyzeButton","data-sentry-source-file":"index.tsx"}),(0,a.jsx)(E,{value:e,label:"Analyzing...","data-sentry-element":"LinearProgressBar","data-sentry-source-file":"index.tsx"})]})]})}var R=n(15852),W=n(71733);function D(){let e=(0,i.Xr)(s.MA);return(0,r.useEffect)(()=>{let t=t=>{"f"===t.key&&e(e=>!e)};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}},[e]),(0,a.jsx)(R.A,{title:"Flip board","data-sentry-element":"Tooltip","data-sentry-component":"FlipBoardButton","data-sentry-source-file":"flipBoardButton.tsx",children:(0,a.jsx)(W.A,{onClick:()=>e(e=>!e),sx:{paddingX:1.2,paddingY:.5},"data-sentry-element":"IconButton","data-sentry-source-file":"flipBoardButton.tsx",children:(0,a.jsx)(u.In,{icon:"eva:flip-fill","data-sentry-element":"Icon","data-sentry-source-file":"flipBoardButton.tsx"})})})}function X(){let{playMove:e}=(0,p.j)(s.Sd),t=(0,i.md)(s._X),n=(0,i.md)(s.Sd),o=t.history(),l=n.history(),d=l.length<o.length&&o.slice(0,l.length).join()===l.join(),c=(0,r.useCallback)(()=>{var n;if(!d)return;let a=l.length,i=t.history({verbose:!0})[a],s=null===(n=t.getComments().find(e=>e.fen===i.after))||void 0===n?void 0:n.comment;i&&e({from:i.from,to:i.to,promotion:i.promotion,comment:s})},[d,l,t,e]);return(0,r.useEffect)(()=>{let e=e=>{"ArrowRight"===e.key&&c()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[c]),(0,a.jsx)(R.A,{title:"Go to next move","data-sentry-element":"Tooltip","data-sentry-component":"NextMoveButton","data-sentry-source-file":"nextMoveButton.tsx",children:(0,a.jsx)(y.A,{"data-sentry-element":"Grid","data-sentry-source-file":"nextMoveButton.tsx",children:(0,a.jsx)(W.A,{onClick:()=>c(),disabled:!d,sx:{paddingX:1.2,paddingY:.5},"data-sentry-element":"IconButton","data-sentry-source-file":"nextMoveButton.tsx",children:(0,a.jsx)(u.In,{icon:"ri:arrow-right-s-line",height:30,"data-sentry-element":"Icon","data-sentry-source-file":"nextMoveButton.tsx"})})})})}function K(){let{setPgn:e}=(0,p.j)(s.Sd),t=(0,i.md)(s._X),n=(0,i.md)(s.Sd),o=t.history(),l=n.history()>=o;return(0,r.useEffect)(()=>{let n=n=>{"ArrowUp"!==n.key||l||e(t.pgn())};return window.addEventListener("keydown",n),()=>{window.removeEventListener("keydown",n)}},[l,e,t]),(0,a.jsx)(R.A,{title:"Go to final position","data-sentry-element":"Tooltip","data-sentry-component":"GoToLastPositionButton","data-sentry-source-file":"goToLastPositionButton.tsx",children:(0,a.jsx)(y.A,{"data-sentry-element":"Grid","data-sentry-source-file":"goToLastPositionButton.tsx",children:(0,a.jsx)(W.A,{onClick:()=>{l||e(t.pgn())},disabled:l,sx:{paddingX:1.2,paddingY:.5},"data-sentry-element":"IconButton","data-sentry-source-file":"goToLastPositionButton.tsx",children:(0,a.jsx)(u.In,{icon:"ri:skip-forward-line","data-sentry-element":"Icon","data-sentry-source-file":"goToLastPositionButton.tsx"})})})})}function _(){let e=(0,i.md)(s._X),t=(0,i.md)(s.Sd),n=(0,i.md)(s.Mx),{addGame:r,setGameEval:o,gameFromUrl:l}=(0,g.R)(),d=(0,j.useRouter)(),c=!l&&(t.history().length||e.history().length),m=async()=>{if(!c)return;let a=(0,b.FA)(e,t),i=await r(a);n&&await o(i,n),d.replace({query:{gameId:i},pathname:d.pathname},void 0,{shallow:!0,scroll:!1})};return(0,a.jsx)(a.Fragment,{children:l?(0,a.jsx)(R.A,{title:"Game saved in database",children:(0,a.jsx)(y.A,{children:(0,a.jsx)(W.A,{disabled:!0,sx:{paddingX:1.2,paddingY:.5},children:(0,a.jsx)(u.In,{icon:"ri:folder-check-line"})})})}):(0,a.jsx)(R.A,{title:"Save game",children:(0,a.jsx)(y.A,{children:(0,a.jsx)(W.A,{onClick:m,disabled:!c,sx:{paddingX:1.2,paddingY:.5},children:(0,a.jsx)(u.In,{icon:"ri:save-3-line"})})})})})}function F(){let e=(0,i.md)(s.Sd),{resetToStartingPosition:t,undoMove:n}=(0,p.j)(s.Sd),o=e.history(),l=(0,i.md)(s._X);return(0,r.useEffect)(()=>{let e=e=>{0!==o.length&&("ArrowLeft"===e.key?n():"ArrowDown"===e.key&&t())};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[n,o,t,e]),(0,a.jsxs)(y.A,{container:!0,justifyContent:"center",alignItems:"center",size:12,"data-sentry-element":"Grid","data-sentry-component":"PanelToolBar","data-sentry-source-file":"index.tsx",children:[(0,a.jsx)(D,{"data-sentry-element":"FlipBoardButton","data-sentry-source-file":"index.tsx"}),(0,a.jsx)(R.A,{title:"Reset board","data-sentry-element":"Tooltip","data-sentry-source-file":"index.tsx",children:(0,a.jsx)(y.A,{"data-sentry-element":"Grid","data-sentry-source-file":"index.tsx",children:(0,a.jsx)(W.A,{onClick:()=>t(),disabled:0===o.length,sx:{paddingX:1.2,paddingY:.5},"data-sentry-element":"IconButton","data-sentry-source-file":"index.tsx",children:(0,a.jsx)(u.In,{icon:"ri:skip-back-line","data-sentry-element":"Icon","data-sentry-source-file":"index.tsx"})})})}),(0,a.jsx)(R.A,{title:"Go to previous move","data-sentry-element":"Tooltip","data-sentry-source-file":"index.tsx",children:(0,a.jsx)(y.A,{"data-sentry-element":"Grid","data-sentry-source-file":"index.tsx",children:(0,a.jsx)(W.A,{onClick:()=>n(),disabled:0===o.length,sx:{paddingX:1.2,paddingY:.5},"data-sentry-element":"IconButton","data-sentry-source-file":"index.tsx",children:(0,a.jsx)(u.In,{icon:"ri:arrow-left-s-line",height:30,"data-sentry-element":"Icon","data-sentry-source-file":"index.tsx"})})})}),(0,a.jsx)(X,{"data-sentry-element":"NextMoveButton","data-sentry-source-file":"index.tsx"}),(0,a.jsx)(K,{"data-sentry-element":"GoToLastPositionButton","data-sentry-source-file":"index.tsx"}),(0,a.jsx)(R.A,{title:"Copy pgn","data-sentry-element":"Tooltip","data-sentry-source-file":"index.tsx",children:(0,a.jsx)(y.A,{"data-sentry-element":"Grid","data-sentry-source-file":"index.tsx",children:(0,a.jsx)(W.A,{disabled:0===l.history().length,onClick:()=>{var e,t;null===(t=navigator.clipboard)||void 0===t||null===(e=t.writeText)||void 0===e||e.call(t,l.pgn())},sx:{paddingX:1.2,paddingY:.5},"data-sentry-element":"IconButton","data-sentry-source-file":"index.tsx",children:(0,a.jsx)(u.In,{icon:"ri:clipboard-line","data-sentry-element":"Icon","data-sentry-source-file":"index.tsx"})})})}),(0,a.jsx)(_,{"data-sentry-element":"SaveButton","data-sentry-source-file":"index.tsx"})]})}var H=n(42993);function N(e){let{title:t,whiteValue:n,blackValue:i}=e;return(0,a.jsxs)(H.A,{justifyContent:"center",alignItems:"center",flexDirection:"row",columnGap:{xs:"8vw",md:10},"data-sentry-element":"Stack","data-sentry-component":"PlayersMetric","data-sentry-source-file":"playersMetric.tsx",children:[(0,a.jsx)(O,{value:n,color:"white","data-sentry-element":"ValueBlock","data-sentry-source-file":"playersMetric.tsx"}),(0,a.jsx)(x.A,{align:"center",fontSize:"0.8em",noWrap:!0,"data-sentry-element":"Typography","data-sentry-source-file":"playersMetric.tsx",children:t}),(0,a.jsx)(O,{value:i,color:"black","data-sentry-element":"ValueBlock","data-sentry-source-file":"playersMetric.tsx"})]})}let O=e=>{let{value:t,color:n}=e;return(0,a.jsx)(x.A,{align:"center",sx:{backgroundColor:n,color:"white"===n?"black":"white"},borderRadius:"5px",lineHeight:"1em",fontSize:"0.9em",padding:.8,fontWeight:"500",border:"1px solid #424242",noWrap:!0,"data-sentry-element":"Typography","data-sentry-component":"ValueBlock","data-sentry-source-file":"playersMetric.tsx",children:t})};var Y=n(36110),Q=n(54587),V=n.n(Q),U=n(66703),q=n(62034),J=n(42800),$=n.n(J);function Z(e){let{san:t,color:n,additionalText:i,typographyProps:s,boxProps:o}=e,l="dark"===(0,U.A)().palette.mode,{icon:d,text:c}=(0,r.useMemo)(()=>{let e=t.charAt(0);if(!["K","Q","R","B","N"].includes(e))return{text:t};let a=l?n:"w"===n?"b":"w";return{icon:ee[e][a],text:t.slice(1)}},[t,n,l]);return(0,a.jsxs)(q.A,{component:"span",...o,"data-sentry-element":"Box","data-sentry-component":"PrettyMoveSan","data-sentry-source-file":"index.tsx",children:[d&&(0,a.jsx)(x.A,{component:"span",fontFamily:$().style.fontFamily,...s,children:d}),(0,a.jsxs)(x.A,{component:"span",noWrap:!0,...s,"data-sentry-element":"Typography","data-sentry-source-file":"index.tsx",children:[c,i]})]})}let ee={K:{w:"♚",b:"♔"},Q:{w:"♛",b:"♕"},R:{w:"♜",b:"♖"},B:{w:"♝",b:"♗"},N:{w:"♞",b:"♘"}};function et(){var e,t,n,o,d,c,m,u;let y=(0,i.md)(s.eU),g=(0,i.md)(s.Sd),h=null==y?void 0:null===(e=y.lastEval)||void 0===e?void 0:e.bestMove,f=(0,r.useMemo)(()=>{var e;if(!h)return;let t=null===(e=g.history({verbose:!0}).at(-1))||void 0===e?void 0:e.before;if(t)return(0,b.AC)(t)(h)},[h,g]);if(0===g.history().length)return null;if(!f)return(0,a.jsx)(H.A,{direction:"row",alignItems:"center",columnGap:5,marginTop:.8,children:(0,a.jsx)(Y.A,{variant:"rounded",animation:"wave",width:"12em",sx:{color:"transparent",maxWidth:"7vw"},children:(0,a.jsx)(x.A,{align:"center",fontSize:"0.9rem",children:"placeholder"})})});let p=null===(t=y.eval)||void 0===t?void 0:t.moveClassification,v=p!==l.eK.Best&&p!==l.eK.Opening&&p!==l.eK.Forced&&p!==l.eK.Splendid&&p!==l.eK.Perfect;return(0,a.jsxs)(H.A,{direction:"row",alignItems:"center",justifyContent:"center",columnGap:4,marginTop:.5,flexWrap:"wrap","data-sentry-element":"Stack","data-sentry-component":"MoveInfo","data-sentry-source-file":"moveInfo.tsx",children:[p&&(0,a.jsxs)(H.A,{direction:"row",alignItems:"center",spacing:1,children:[(0,a.jsx)(V(),{src:"/icons/".concat(p,".png"),alt:"move-icon",width:16,height:16,style:{maxWidth:"3.5vw",maxHeight:"3.5vw"}}),(0,a.jsx)(Z,{typographyProps:{fontSize:"0.9rem"},san:null!==(c=null===(n=y.lastMove)||void 0===n?void 0:n.san)&&void 0!==c?c:"",color:null!==(m=null===(o=y.lastMove)||void 0===o?void 0:o.color)&&void 0!==m?m:"w",additionalText:" is "+en[p]})]}),v&&(0,a.jsxs)(H.A,{direction:"row",alignItems:"center",spacing:1,children:[(0,a.jsx)(V(),{src:"/icons/best.png",alt:"move-icon",width:16,height:16,style:{maxWidth:"3.5vw",maxHeight:"3.5vw"}}),(0,a.jsx)(Z,{typographyProps:{fontSize:"0.9rem"},san:f,color:null!==(u=null===(d=y.lastMove)||void 0===d?void 0:d.color)&&void 0!==u?u:"w",additionalText:" was the best move"})]})]})}let en={[l.eK.Opening]:"an opening move",[l.eK.Forced]:"forced",[l.eK.Splendid]:"splendid !!",[l.eK.Perfect]:"the only good move !",[l.eK.Best]:"the best move",[l.eK.Excellent]:"excellent",[l.eK.Okay]:"an okay move",[l.eK.Inaccuracy]:"an inaccuracy",[l.eK.Mistake]:"a mistake",[l.eK.Blunder]:"a blunder"};function ea(){var e;let t=(0,i.md)(s.eU);if(!(null==t?void 0:t.lastMove))return null;let n=(null==t?void 0:null===(e=t.eval)||void 0===e?void 0:e.opening)||t.opening;return n?(0,a.jsx)(y.A,{"data-sentry-element":"Grid","data-sentry-component":"Opening","data-sentry-source-file":"opening.tsx",children:(0,a.jsx)(x.A,{align:"center",fontSize:"0.9rem",maxWidth:"20rem","data-sentry-element":"Typography","data-sentry-source-file":"opening.tsx",children:n})}):(0,a.jsx)(y.A,{justifyItems:"center",alignContent:"center",children:(0,a.jsx)(Y.A,{variant:"rounded",animation:"wave",width:"12em",sx:{color:"transparent",maxWidth:"7vw",maxHeight:"3.5vw"},children:(0,a.jsx)(x.A,{align:"center",fontSize:"0.9rem",children:"placeholder"})})})}var ei=n(60999),es=n(80963);function er(e){let{line:t}=e,n=(0,i.md)(s.Sd),{addMoves:r}=(0,p.j)(s.Sd),o=(0,b.l3)(t),l=void 0!==t.cp&&t.cp<0||void 0!==t.mate&&t.mate<0,d=t.depth<6,c=(0,b.AC)(n.fen()),m=n.turn(),u=e=>e%2==0?m:"w"===m?"b":"w";return(0,a.jsxs)(es.Ay,{disablePadding:!0,"data-sentry-element":"ListItem","data-sentry-component":"LineEvaluation","data-sentry-source-file":"lineEvaluation.tsx",children:[(0,a.jsx)(x.A,{marginRight:1.5,marginY:.3,paddingY:.2,noWrap:!0,overflow:"visible",width:"3.5em",minWidth:"3.5em",textAlign:"center",fontSize:"0.8rem",sx:{backgroundColor:l?"black":"white",color:l?"white":"black"},borderRadius:"5px",border:"1px solid #424242",fontWeight:"500","data-sentry-element":"Typography","data-sentry-source-file":"lineEvaluation.tsx",children:d?(0,a.jsx)(Y.A,{variant:"rounded",animation:"wave",sx:{color:"transparent"},children:"placeholder"}):o}),(0,a.jsx)(x.A,{noWrap:!0,fontSize:"0.9rem","data-sentry-element":"Typography","data-sentry-source-file":"lineEvaluation.tsx",children:d?(0,a.jsx)(Y.A,{variant:"rounded",animation:"wave",width:"20em"}):t.pv.map((e,n)=>{let i=c(e),s=u(n);return(0,a.jsx)(Z,{san:i,color:s,additionalText:n<t.pv.length-1?",":"",boxProps:{onClick:()=>{r(t.pv.slice(0,n+1))},sx:{cursor:"pointer",ml:.5*!!n,transition:"opacity 0.2s ease-in-out","&:hover":{opacity:.5}}}},n)})})]})}function eo(e){var t,n;let r=(0,i.md)(s.Sd),o=(0,i.md)(s.FR),l=(0,i.md)(s.eU),d=Array.from({length:o}).map((e,t)=>({pv:["".concat(t)],depth:0,multiPv:t+1})),c=(null==l?void 0:null===(n=l.eval)||void 0===n?void 0:null===(t=n.lines)||void 0===t?void 0:t.length)?l.eval.lines:d;return r.isCheckmate()?null:(0,a.jsx)(y.A,{container:!0,justifyContent:"center",alignItems:"center",...e,"data-sentry-element":"Grid","data-sentry-component":"EngineLines","data-sentry-source-file":"index.tsx",children:(0,a.jsx)(ei.A,{sx:{width:"95%",padding:0},"data-sentry-element":"List","data-sentry-source-file":"index.tsx",children:c.map(e=>(0,a.jsx)(er,{line:e},e.multiPv))})})}function el(e){let t=(0,i.md)(s.Mx),n=(0,i.md)(s._X),r=(0,i.md)(s.Sd),o=r.history(),l=n.history(),d=o.length>0&&(r.isCheckmate()||r.isDraw()||o.join()===l.join());return(0,a.jsxs)(y.A,{container:!0,size:12,justifyContent:{xs:"center",lg:t?"start":"center"},alignItems:"center",flexWrap:{lg:t?"nowrap":void 0},gap:2,marginY:{lg:t?1:void 0},paddingX:{xs:0,lg:"calc(4% - 2rem)"},...e,sx:e.hidden?{display:"none"}:e.sx,"data-sentry-element":"Grid","data-sentry-component":"AnalysisTab","data-sentry-source-file":"index.tsx",children:[(0,a.jsxs)(H.A,{justifyContent:"center",alignItems:"center",rowGap:1,minWidth:t?"min(25rem, 95vw)":void 0,"data-sentry-element":"Stack","data-sentry-source-file":"index.tsx",children:[t&&(0,a.jsx)(N,{title:"Accuracy",whiteValue:"".concat(t.accuracy.white.toFixed(1)," %"),blackValue:"".concat(t.accuracy.black.toFixed(1)," %")}),(null==t?void 0:t.estimatedElo)&&(0,a.jsx)(N,{title:"Game Rating",whiteValue:Math.round(t.estimatedElo.white),blackValue:Math.round(t.estimatedElo.black)}),(0,a.jsx)(et,{"data-sentry-element":"MoveInfo","data-sentry-source-file":"index.tsx"}),(0,a.jsx)(ea,{"data-sentry-element":"Opening","data-sentry-source-file":"index.tsx"}),d&&(0,a.jsx)(x.A,{align:"center",fontSize:"0.9rem",noWrap:!0,children:"Game is over"})]}),(0,a.jsx)(eo,{size:{lg:t?void 0:12},"data-sentry-element":"EngineLines","data-sentry-source-file":"index.tsx"})]})}var ed=n(94309);function ec(e){let{san:t,moveClassification:n,moveIdx:o,moveColor:l}=e,d=(0,i.md)(s._X),c=(0,i.md)(s.Sd),{goToMove:m}=(0,p.j)(s.Sd),u=(0,i.md)(s.eU),x=em(n),g=(null==u?void 0:u.currentMoveIdx)===o;return(0,r.useEffect)(()=>{if(!g)return;let e=document.getElementById("move-".concat(o));if(!e)return;let t=document.getElementById("moves-panel");t&&(0,ed.cH)(t)&&e.scrollIntoView({behavior:"smooth",block:"center"})},[g,o]),(0,a.jsxs)(y.A,{container:!0,justifyContent:"center",alignItems:"center",gap:1,width:"5rem",wrap:"nowrap",onClick:()=>{!g&&m(o,d.moveNumber()>1?d:c)},paddingY:.5,sx:e=>({cursor:g?void 0:"pointer",backgroundColor:g&&"dark"===e.palette.mode?"#4f4f4f":void 0,border:g&&"light"===e.palette.mode?"1px solid #424242":void 0,borderRadius:1}),id:"move-".concat(o),"data-sentry-element":"Grid","data-sentry-component":"MoveItem","data-sentry-source-file":"moveItem.tsx",children:[x&&(0,a.jsx)(V(),{src:"/icons/".concat(n,".png"),alt:"move-icon",width:14,height:14,style:{maxWidth:"3.5vw",maxHeight:"3.5vw"}}),(0,a.jsx)(Z,{san:t,color:l,typographyProps:{fontSize:"0.9rem"},"data-sentry-element":"PrettyMoveSan","data-sentry-source-file":"moveItem.tsx"})]})}let em=e=>{if(!(!e||eu.includes(e)))return P.k_[e]},eu=[l.eK.Okay,l.eK.Excellent,l.eK.Forced];function ey(e){let{moves:t,moveNb:n}=e;return(0,a.jsxs)(y.A,{container:!0,justifyContent:"space-evenly",alignItems:"center",wrap:"nowrap",size:12,"data-sentry-element":"Grid","data-sentry-component":"MovesLine","data-sentry-source-file":"movesLine.tsx",children:[(0,a.jsxs)(x.A,{width:"2rem",fontSize:"0.9rem","data-sentry-element":"Typography","data-sentry-source-file":"movesLine.tsx",children:[n,"."]}),(0,a.jsx)(ec,{...t[0],moveIdx:(n-1)*2+1,moveColor:"w","data-sentry-element":"MoveItem","data-sentry-source-file":"movesLine.tsx"}),t[1]?(0,a.jsx)(ec,{...t[1],moveIdx:(n-1)*2+2,moveColor:"b"}):(0,a.jsx)(q.A,{width:"5rem"})]})}function ex(){let e=(0,i.md)(s._X),t=(0,i.md)(s.Sd),n=(0,i.md)(s.Mx),o=(0,r.useMemo)(()=>{let a=e.history(),i=t.history(),s=a.length?a:i;if(!s.length)return;let r=[];for(let e=0;e<s.length;e+=2){var o,l;let t=[{san:s[e],moveClassification:a.length?null==n?void 0:null===(o=n.positions[e+1])||void 0===o?void 0:o.moveClassification:void 0}];s[e+1]&&t.push({san:s[e+1],moveClassification:a.length?null==n?void 0:null===(l=n.positions[e+2])||void 0===l?void 0:l.moveClassification:void 0}),r.push(t)}return r},[e,t,n]);return(null==o?void 0:o.length)?(0,a.jsx)(y.A,{container:!0,justifyContent:"center",alignItems:"start",gap:.5,paddingY:1,sx:{scrollbarWidth:"thin",overflowY:"auto"},maxHeight:"100%",size:6,id:"moves-panel","data-sentry-element":"Grid","data-sentry-component":"MovesPanel","data-sentry-source-file":"index.tsx",children:null==o?void 0:o.map((e,t)=>(0,a.jsx)(ey,{moves:e,moveNb:t+1},"".concat(e.map(e=>{let{san:t}=e;return t}).join(),"-").concat(t)))}):null}function eg(e){let{classification:t}=e,n=(0,i.md)(s.Mx),o=(0,i.md)(s.Sd),d=(0,i.md)(s._X),{goToMove:c}=(0,p.j)(s.Sd),m=(0,r.useMemo)(()=>n?n.positions.filter((e,n)=>n%2!=0&&e.moveClassification===t).length:0,[n,t]),u=(0,r.useMemo)(()=>n?n.positions.filter((e,n)=>n%2==0&&e.moveClassification===t).length:0,[n,t]),g=e=>{if(!n||e===l.Q1.White&&!m||e===l.Q1.Black&&!u)return;let a=t=>t%2!=0&&e===l.Q1.White||t%2==0&&e===l.Q1.Black,i=o.history().length,s=n.positions.findIndex((e,n)=>a(n)&&e.moveClassification===t&&n>i);if(s>0)c(s,d);else{let e=n.positions.findIndex((e,n)=>a(n)&&e.moveClassification===t);e>0&&e!==i&&c(e,d)}};return(0,a.jsxs)(y.A,{container:!0,justifyContent:"space-evenly",alignItems:"center",wrap:"nowrap",color:P.k_[t],size:12,"data-sentry-element":"Grid","data-sentry-component":"ClassificationRow","data-sentry-source-file":"classificationRow.tsx",children:[(0,a.jsx)(y.A,{container:!0,justifyContent:"center",alignItems:"center",width:"3rem",style:{cursor:m?"pointer":"default"},onClick:()=>g(l.Q1.White),fontSize:"0.9rem","data-sentry-element":"Grid","data-sentry-source-file":"classificationRow.tsx",children:m}),(0,a.jsxs)(y.A,{container:!0,justifyContent:"start",alignItems:"center",width:"7rem",gap:1,wrap:"nowrap","data-sentry-element":"Grid","data-sentry-source-file":"classificationRow.tsx",children:[(0,a.jsx)(V(),{src:"/icons/".concat(t,".png"),alt:"move-icon",width:18,height:18,style:{maxWidth:"3.5vw",maxHeight:"3.5vw"},"data-sentry-element":"Image","data-sentry-source-file":"classificationRow.tsx"}),(0,a.jsx)(x.A,{align:"center",fontSize:"0.9rem","data-sentry-element":"Typography","data-sentry-source-file":"classificationRow.tsx",children:(0,ed.ZH)(t)})]}),(0,a.jsx)(y.A,{container:!0,justifyContent:"center",alignItems:"center",width:"3rem",style:{cursor:u?"pointer":"default"},onClick:()=>g(l.Q1.Black),fontSize:"0.9rem","data-sentry-element":"Grid","data-sentry-source-file":"classificationRow.tsx",children:u})]})}function eh(){let{white:e,black:t}=(0,c.K)(s._X),n=(0,i.md)(s.Mx);return(null==n?void 0:n.positions.length)?(0,a.jsxs)(y.A,{container:!0,justifyContent:"center",alignItems:"center",rowGap:.7,sx:{scrollbarWidth:"thin",overflowY:"auto"},height:"100%",maxHeight:"22rem",size:6,"data-sentry-element":"Grid","data-sentry-component":"MovesClassificationsRecap","data-sentry-source-file":"index.tsx",children:[(0,a.jsxs)(y.A,{container:!0,alignItems:"center",justifyContent:"space-evenly",wrap:"nowrap",size:12,"data-sentry-element":"Grid","data-sentry-source-file":"index.tsx",children:[(0,a.jsx)(x.A,{width:"12rem",align:"center",noWrap:!0,fontSize:"0.9rem","data-sentry-element":"Typography","data-sentry-source-file":"index.tsx",children:e.name}),(0,a.jsx)(x.A,{width:"7rem","data-sentry-element":"Typography","data-sentry-source-file":"index.tsx"}),(0,a.jsx)(x.A,{width:"12rem",align:"center",noWrap:!0,fontSize:"0.9rem","data-sentry-element":"Typography","data-sentry-source-file":"index.tsx",children:t.name})]}),ef.map(e=>(0,a.jsx)(eg,{classification:e},e))]}):null}let ef=[l.eK.Splendid,l.eK.Perfect,l.eK.Best,l.eK.Excellent,l.eK.Okay,l.eK.Opening,l.eK.Inaccuracy,l.eK.Mistake,l.eK.Blunder];function ep(e){return(0,a.jsxs)(y.A,{container:!0,justifyContent:"center",alignItems:"start",size:12,flexGrow:1,...e,sx:e.hidden?{display:"none"}:{overflow:"hidden",...e.sx},"data-sentry-element":"Grid","data-sentry-component":"ClassificationTab","data-sentry-source-file":"index.tsx",children:[(0,a.jsx)(ex,{"data-sentry-element":"MovesPanel","data-sentry-source-file":"index.tsx"}),(0,a.jsx)(eh,{"data-sentry-element":"MovesClassificationsRecap","data-sentry-source-file":"index.tsx"})]})}var ev=n(59055),ej=n(7579),ew=n(17159),eA=n(71948),eb=n(5940),ek=n(46852),eC=n(79270),eS=n(44395),eI=n(80553),eB=n(18952),eM=n(3061),eG=n(34034),eP=n(6854),ez=n(60230),eT=n(67906),eE=n(28902),eL=n(71918),eR=n(64266),eW=n(89665);function eD(){let[e,t]=(0,eW.v)("show-arrow-best-move",s.XL),[n,i]=(0,eW.v)("show-icon-player-move",s.a2);return(0,a.jsxs)(y.A,{container:!0,justifyContent:"space-evenly",alignItems:"center",size:12,gap:3,"data-sentry-element":"Grid","data-sentry-component":"ArrowOptions","data-sentry-source-file":"arrowOptions.tsx",children:[(0,a.jsx)(eL.A,{control:(0,a.jsx)(eR.A,{checked:e,onChange:(e,n)=>t(n)}),label:"Show engine best move arrow",sx:{marginX:0},"data-sentry-element":"FormControlLabel","data-sentry-source-file":"arrowOptions.tsx"}),(0,a.jsx)(eL.A,{control:(0,a.jsx)(eR.A,{checked:n,onChange:(e,t)=>i(t)}),label:"Show played move icon",sx:{marginX:0},"data-sentry-element":"FormControlLabel","data-sentry-source-file":"arrowOptions.tsx"})]})}var eX=n(3642),eK=n(98510),e_=n(3830),eF=n(99193);function eH(e){let{open:t,onClose:n}=e,[o,d]=(0,eW.v)("engine-depth",s.B2),[c,m]=(0,eW.v)("engine-multi-pv",s.FR),[u,g]=(0,eW.v)("engine-name",s.Ju),[h,f]=(0,i.fp)(e_.U),[p,v]=(0,i.fp)(e_._),[j,w]=(0,i.fp)(s.pN),A="dark"===(0,U.A)().palette.mode;return(0,r.useEffect)(()=>{(0,eX.N9)(u)||(eK.m.isSupported()?g(l.Qz.Stockfish16_1Lite):g(l.Qz.Stockfish11))},[g,u]),(0,a.jsxs)(eC.A,{open:t,onClose:n,maxWidth:"md",fullWidth:!0,"data-sentry-element":"Dialog","data-sentry-component":"EngineSettingsDialog","data-sentry-source-file":"engineSettingsDialog.tsx",children:[(0,a.jsx)(eS.A,{variant:"h5",sx:{paddingBottom:1},"data-sentry-element":"DialogTitle","data-sentry-source-file":"engineSettingsDialog.tsx",children:"Settings"}),(0,a.jsx)(eI.A,{sx:{paddingBottom:0},"data-sentry-element":"DialogContent","data-sentry-source-file":"engineSettingsDialog.tsx",children:(0,a.jsxs)(y.A,{container:!0,justifyContent:"center",alignItems:"center",paddingTop:1,spacing:3,size:12,"data-sentry-element":"Grid","data-sentry-source-file":"engineSettingsDialog.tsx",children:[(0,a.jsx)(y.A,{container:!0,justifyContent:"center",size:{xs:12,sm:7,md:8},"data-sentry-element":"Grid","data-sentry-source-file":"engineSettingsDialog.tsx",children:(0,a.jsxs)(x.A,{variant:"body2","data-sentry-element":"Typography","data-sentry-source-file":"engineSettingsDialog.tsx",children:[P.H[P.T3].small," is the default engine if your device support its requirements. It offers the best balance between speed and strength."," ",P.H[P.RS].small," is the strongest engine available, note that it requires a one time download of"," ",P.H[P.RS].sizeMb,"MB and is much more compute intensive."]})}),(0,a.jsx)(y.A,{container:!0,justifyContent:"center",size:{xs:12,sm:5,md:4},"data-sentry-element":"Grid","data-sentry-source-file":"engineSettingsDialog.tsx",children:(0,a.jsxs)(eB.A,{variant:"outlined","data-sentry-element":"FormControl","data-sentry-source-file":"engineSettingsDialog.tsx",children:[(0,a.jsx)(eM.A,{id:"dialog-select-label","data-sentry-element":"InputLabel","data-sentry-source-file":"engineSettingsDialog.tsx",children:"Engine"}),(0,a.jsx)(eG.A,{labelId:"dialog-select-label",id:"dialog-select",displayEmpty:!0,input:(0,a.jsx)(eP.A,{label:"Engine"}),value:u,onChange:e=>g(e.target.value),sx:{width:280,maxWidth:"100%"},"data-sentry-element":"Select","data-sentry-source-file":"engineSettingsDialog.tsx",children:Object.values(l.Qz).map(e=>(0,a.jsx)(ez.A,{value:e,disabled:!(0,eX.N9)(e),children:P.H[e].full},e))})]})}),(0,a.jsx)(ek.A,{label:"Maximum depth",value:o,setValue:d,min:10,max:30,marksFilter:2,"data-sentry-element":"Slider","data-sentry-source-file":"engineSettingsDialog.tsx"}),(0,a.jsx)(ek.A,{label:"Number of lines",value:c,setValue:m,min:2,max:6,marksFilter:1,size:6,"data-sentry-element":"Slider","data-sentry-source-file":"engineSettingsDialog.tsx"}),(0,a.jsx)(eD,{"data-sentry-element":"ArrowOptions","data-sentry-source-file":"engineSettingsDialog.tsx"}),(0,a.jsx)(y.A,{container:!0,justifyContent:"center",size:{xs:12,sm:8,md:9},"data-sentry-element":"Grid","data-sentry-source-file":"engineSettingsDialog.tsx",children:(0,a.jsx)(ek.A,{label:"Board hue",value:h,setValue:f,min:0,max:360,"data-sentry-element":"Slider","data-sentry-source-file":"engineSettingsDialog.tsx"})}),(0,a.jsx)(y.A,{container:!0,justifyContent:"center",alignItems:"center",size:{xs:12,sm:4,md:3},"data-sentry-element":"Grid","data-sentry-source-file":"engineSettingsDialog.tsx",children:(0,a.jsxs)(eB.A,{variant:"outlined","data-sentry-element":"FormControl","data-sentry-source-file":"engineSettingsDialog.tsx",children:[(0,a.jsx)(eM.A,{id:"dialog-select-label","data-sentry-element":"InputLabel","data-sentry-source-file":"engineSettingsDialog.tsx",children:"Piece set"}),(0,a.jsx)(eG.A,{labelId:"dialog-select-label",id:"dialog-select",displayEmpty:!0,input:(0,a.jsx)(eP.A,{label:"Piece set"}),value:p,onChange:e=>v(e.target.value),sx:{width:200,maxWidth:"100%"},"data-sentry-element":"Select","data-sentry-source-file":"engineSettingsDialog.tsx",children:P.PE.map(e=>(0,a.jsx)(ez.A,{value:e,children:(0,a.jsxs)(q.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,a.jsx)(V(),{loading:"lazy",src:"/piece/".concat(e,"/").concat(A?"w":"b","N.svg"),alt:"".concat(e," knight"),width:24,height:24}),e]})},e))})]})}),(0,a.jsx)(y.A,{container:!0,justifyContent:"center",alignItems:"center",size:{xs:12,md:11},"data-sentry-element":"Grid","data-sentry-source-file":"engineSettingsDialog.tsx",children:(0,a.jsx)(ek.A,{label:"Number of threads",value:j,setValue:w,min:1,max:12,marksFilter:1,infoContent:(0,a.jsxs)(a.Fragment,{children:["More threads means faster analysis, but only if your device can handle them, otherwise it may have the opposite effect. The estimated optimal value for your device is"," ",(0,eF.PN)(),". Due to privacy restrictions in some browsers, this value might be underestimated. Don't hesitate to try different values to find the best one for your device."]}),"data-sentry-element":"Slider","data-sentry-source-file":"engineSettingsDialog.tsx"})})]})}),(0,a.jsx)(eT.A,{sx:{m:1},"data-sentry-element":"DialogActions","data-sentry-source-file":"engineSettingsDialog.tsx",children:(0,a.jsx)(eE.A,{variant:"contained",onClick:n,"data-sentry-element":"Button","data-sentry-source-file":"engineSettingsDialog.tsx",children:"Close"})})]})}function eN(){let[e,t]=(0,r.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eb.A,{title:"Engine settings",color:"secondary",size:"small",sx:{top:"auto",right:16,bottom:16,left:"auto",position:"fixed"},onClick:()=>t(!0),"data-sentry-element":"Fab","data-sentry-source-file":"engineSettingsButton.tsx",children:(0,a.jsx)(u.In,{icon:"mdi:settings",height:20,"data-sentry-element":"Icon","data-sentry-source-file":"engineSettingsButton.tsx"})}),(0,a.jsx)(eH,{open:e,onClose:()=>t(!1),"data-sentry-element":"EngineSettingsDialog","data-sentry-source-file":"engineSettingsButton.tsx"})]})}var eO=n(34007),eY=n(13370),eQ=n(40570),eV=n(25493),eU=n(67362),eq=n(46976),eJ=n(1676);function e$(e){let{active:t,payload:n}=e;if(!t||!(null==n?void 0:n.length))return null;let i=n[0].payload;return(0,a.jsx)("div",{style:{backgroundColor:"#f0f0f0",padding:5,color:"black",opacity:.9,border:"1px solid black",borderRadius:3},"data-sentry-component":"CustomTooltip","data-sentry-source-file":"tooltip.tsx",children:(0,b.l3)(i)})}function eZ(e){let{cx:t,cy:n,r:i,payload:s}=e,r=(null==s?void 0:s.moveClassification)?P.k_[s.moveClassification]:"grey";return(0,a.jsx)("circle",{cx:t,cy:n,r:i,stroke:r,strokeWidth:5,fill:r,fillOpacity:1,"data-sentry-element":"circle","data-sentry-component":"CustomDot","data-sentry-source-file":"dot.tsx"})}function e0(e){var t;let n=(0,i.md)(s.Mx),o=(0,i.md)(s.eU),{goToMove:d}=(0,p.j)(s.Sd),c=(0,i.md)(s._X),m=(0,r.useMemo)(()=>{var e;return null!==(e=null==n?void 0:n.positions.map(e1))&&void 0!==e?e:[]},[n]),u=(0,r.useMemo)(()=>{let e=m.filter(e=>e.moveClassification===l.eK.Best),t=Math.ceil(.15*e.length),n=e.map(e=>e.moveNb);for(let e=n.length-1;e>0;e--){let t=Math.floor(Math.random()*(e+1));[n[e],n[t]]=[n[t],n[e]]}return new Set(n.slice(0,t))},[m]),x=(null===(t=o.eval)||void 0===t?void 0:t.moveClassification)?P.k_[o.eval.moveClassification]:"grey",g=(0,r.useCallback)(e=>{let t=e.payload,n=null==t?void 0:t.moveClassification;return n&&([l.eK.Splendid,l.eK.Perfect,l.eK.Blunder,l.eK.Mistake].includes(n)||n===l.eK.Best&&u.has(t.moveNb))?(0,r.createElement)(eZ,{...e,key:e.key,payload:t}):(0,a.jsx)("svg",{},e.key)},[u]);return n?(0,a.jsx)(y.A,{container:!0,justifyContent:"center",alignItems:"center",minHeight:"min(10rem, 8vh)",height:{xs:"8rem",lg:"none"},maxHeight:"10rem",...e,sx:e.hidden?{display:"none"}:e.sx,size:12,"data-sentry-element":"Grid","data-sentry-component":"GraphTab","data-sentry-source-file":"index.tsx",children:(0,a.jsx)(q.A,{height:"100%",width:{xs:"100%",lg:"90%"},sx:{backgroundColor:"#2e2e2e",borderRadius:"15px",overflow:"hidden"},"data-sentry-element":"Box","data-sentry-source-file":"index.tsx",children:(0,a.jsx)(eO.u,{width:"100%",height:"100%","data-sentry-element":"ResponsiveContainer","data-sentry-source-file":"index.tsx",children:(0,a.jsxs)(eY.Q,{width:500,height:400,data:m,margin:{top:0,left:0,right:0,bottom:0},onClick:e=>{var t,n;let a=null==e?void 0:null===(n=e.activePayload)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.payload;a&&d(a.moveNb,c)},style:{cursor:"pointer"},"data-sentry-element":"AreaChart","data-sentry-source-file":"index.tsx",children:[(0,a.jsx)(eQ.W,{dataKey:"moveNb",hide:!0,stroke:"red","data-sentry-element":"XAxis","data-sentry-source-file":"index.tsx"}),(0,a.jsx)(eV.h,{domain:[0,20],hide:!0,"data-sentry-element":"YAxis","data-sentry-source-file":"index.tsx"}),(0,a.jsx)(eU.m,{content:(0,a.jsx)(e$,{}),isAnimationActive:!1,cursor:{stroke:"grey",strokeWidth:2,strokeOpacity:.3},"data-sentry-element":"Tooltip","data-sentry-source-file":"index.tsx"}),(0,a.jsx)(eq.G,{type:"monotone",dataKey:"value",stroke:"none",fill:"#ffffff",fillOpacity:1,dot:g,activeDot:(0,a.jsx)(eZ,{}),isAnimationActive:!1,"data-sentry-element":"Area","data-sentry-source-file":"index.tsx"}),(0,a.jsx)(eJ.e,{y:10,stroke:"grey",strokeWidth:2,strokeOpacity:.4,"data-sentry-element":"ReferenceLine","data-sentry-source-file":"index.tsx"}),(0,a.jsx)(eJ.e,{x:o.currentMoveIdx,stroke:x,strokeWidth:4,strokeOpacity:.6,"data-sentry-element":"ReferenceLine","data-sentry-source-file":"index.tsx"})]})})})}):null}let e1=(e,t)=>{let n=e.lines[0],a={moveNb:t,value:10,cp:n.cp,mate:n.mate,moveClassification:e.moveClassification};return n.mate?{...a,value:20*(n.mate>0)}:n.cp?{...a,value:Math.max(Math.min(n.cp/100,10),-10)+10}:a};var e2=n(59696);function e5(){let e=(0,U.A)(),[t,n]=(0,r.useState)(0),o=(0,ev.A)(e.breakpoints.up("lg")),l=(0,i.md)(s.Mx),d=(0,i.md)(s._X),c=(0,i.md)(s.Sd),x=d.history().length>0||c.history().length>0;return(0,r.useEffect)(()=>{1!==t||x||n(0),2!==t||l||n(0)},[x,l,t]),(0,a.jsxs)(y.A,{container:!0,gap:4,justifyContent:"space-evenly",alignItems:"start","data-sentry-element":"Grid","data-sentry-component":"GameAnalysis","data-sentry-source-file":"index.tsx",children:[(0,a.jsx)(e2.s,{title:"Chesskit Game Analysis","data-sentry-element":"PageTitle","data-sentry-source-file":"index.tsx"}),(0,a.jsx)(m,{"data-sentry-element":"Board","data-sentry-source-file":"index.tsx"}),(0,a.jsxs)(y.A,{container:!0,justifyContent:"start",alignItems:"center",borderRadius:2,border:1,borderColor:"secondary.main",sx:{backgroundColor:"secondary.main",borderColor:"primary.main",borderWidth:2,boxShadow:"0 2px 10px rgba(0, 0, 0, 0.5)"},padding:2,style:{maxWidth:"1200px"},rowGap:2,height:{xs:1===t?"40rem":"auto",lg:"calc(95vh - 60px)"},display:"flex",flexDirection:"column",flexWrap:"nowrap",size:{xs:12,lg:"grow"},"data-sentry-element":"Grid","data-sentry-source-file":"index.tsx",children:[o?(0,a.jsxs)(q.A,{width:"100%",children:[(0,a.jsx)(L,{},"analysis-panel-header"),(0,a.jsx)(ej.A,{sx:{marginX:"5%",marginTop:2.5}})]}):(0,a.jsx)(F,{},"review-panel-toolbar"),!o&&!l&&(0,a.jsx)(ej.A,{sx:{marginX:"5%"}}),!o&&!l&&(0,a.jsx)(L,{},"analysis-panel-header"),!o&&(0,a.jsx)(q.A,{width:"95%",sx:{borderBottom:1,borderColor:"divider",marginX:{sm:"5%",xs:void 0}},children:(0,a.jsxs)(ew.A,{value:t,onChange:(e,t)=>n(t),"aria-label":"basic tabs example",variant:"fullWidth",sx:{minHeight:0},children:[(0,a.jsx)(eA.A,{label:"Analysis",id:"tab0",icon:(0,a.jsx)(u.In,{icon:"mdi:magnify",height:15}),iconPosition:"start",sx:{textTransform:"none",minHeight:15,padding:"5px 0em 12px"},disableFocusRipple:!0}),(0,a.jsx)(eA.A,{label:"Moves",id:"tab1",icon:(0,a.jsx)(u.In,{icon:"mdi:format-list-bulleted",height:15}),iconPosition:"start",sx:{textTransform:"none",minHeight:15,display:x?void 0:"none",padding:"5px 0em 12px"},disableFocusRipple:!0}),(0,a.jsx)(eA.A,{label:"Graph",id:"tab2",icon:(0,a.jsx)(u.In,{icon:"mdi:chart-line",height:15}),iconPosition:"start",sx:{textTransform:"none",minHeight:15,display:l?void 0:"none",padding:"5px 0em 12px"},disableFocusRipple:!0})]})}),(0,a.jsx)(e0,{role:"tabpanel",hidden:2!==t&&!o,id:"tabContent2","data-sentry-element":"GraphTab","data-sentry-source-file":"index.tsx"}),(0,a.jsx)(el,{role:"tabpanel",hidden:0!==t&&!o,id:"tabContent0","data-sentry-element":"AnalysisTab","data-sentry-source-file":"index.tsx"}),(0,a.jsx)(ep,{role:"tabpanel",hidden:1!==t&&!o,id:"tabContent1","data-sentry-element":"ClassificationTab","data-sentry-source-file":"index.tsx"}),o&&(0,a.jsxs)(q.A,{width:"100%",children:[(0,a.jsx)(ej.A,{sx:{marginX:"5%",marginBottom:1.5}}),(0,a.jsx)(F,{},"review-panel-toolbar")]}),!o&&l&&(0,a.jsxs)(q.A,{width:"100%",children:[(0,a.jsx)(ej.A,{sx:{marginX:"5%",marginBottom:2.5}}),(0,a.jsx)(L,{},"analysis-panel-header")]})]}),(0,a.jsx)(eN,{"data-sentry-element":"EngineSettingsButton","data-sentry-source-file":"index.tsx"})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[774,493,302,867,629,791,663,46,636,593,792],()=>t(16760)),_N_E=e.O()}]);