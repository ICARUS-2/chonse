{"version":3,"file":"static/chunks/pages/index-0f253258d92f331c.js","mappings":"qaACA,4CACA,IACA,WACA,OAAe,EAAQ,KAA8B,CACrD,EACA,SAFsB,kJCGP,SAASA,IACtB,IAAMC,EAAaC,CAAAA,EAAAA,EAAAA,CAAAA,CAAaA,GAC1BC,EAAmBC,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACC,EAAAA,EAAoBA,EACpDC,EAAoBF,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACG,EAAAA,EAAqBA,EACtD,OACJC,CAAK,OACLC,CAAK,CACN,CAAGC,CAAAA,EAAAA,EAAAA,CAAAA,CAAcA,CAACC,EAAAA,EAAQA,EACrBC,EAAYC,CAAAA,EAAAA,EAAAA,OAAAA,CAAOA,CAAC,SAKpBC,EAJJ,IAAMC,EAAQd,EAAWc,KAAK,CACxBC,EAASf,EAAWe,MAAM,OAG5BF,CAAAA,QAAAA,EAAAA,MAAAA,GAAAA,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,EAAQG,UAAAA,EAAa,KAChBC,CADsB,IACjBC,GAAG,CAACJ,EAAOC,EAAS,KAE3BE,KAAKC,GAAG,CAACJ,EAAQ,IAAc,IAATC,EAC/B,EAAG,CAACf,EAAW,EACf,MAAO,UAACmB,EAAAA,CAAKA,CAAAA,CAACC,GAAG,gBAAgBT,UAAWA,EAAWU,SAAS,EAAMX,SAAUY,EAAAA,EAASA,CAAEC,YAAahB,EAAOiB,YAAahB,EAAON,iBAAkBA,EAAmBuB,EAAAA,EAAKA,CAACC,KAAK,CAAGD,EAAAA,EAAKA,CAACE,KAAK,CAAEC,oBAAqBA,EAAAA,EAAmBA,CAAEvB,kBAAmBA,EAAmBwB,uBAAwBA,EAAAA,EAAsBA,CAAEC,mBAAmB,EAAMC,sBAAoB,QAAQC,wBAAsB,iBAAiBC,0BAAwB,aACzb,iDCtBe,SAASC,IACtB,GAAM,aACJC,CAAW,CACZ,CAAGC,CAAAA,EAAAA,EAAAA,CAAAA,CAAeA,GAEbC,EAAcC,CADPnC,EAAAA,EAAAA,EAAAA,CAAYA,CAACO,EAAAA,EAAQA,EACT6B,UAAU,GAEnC,GAAI,CAACC,CADeL,KAAgBM,OAAa,CAAC,CAAaf,KAAK,EAA0B,MAAtBW,EAAYX,KAAK,EACvE,OAAO,KACzB,IAAMgB,EAAcP,OAAAA,EAAAA,KAAAA,EAAAA,EAAaO,WAAAA,EAAbP,CAA4BE,EAAYM,WAAW,EAAI,IACrEC,EAASF,EAAYG,KAAK,CAAC,KAAKC,MAAM,CAAG,EAAIJ,EAAcP,OAAAA,EAAAA,KAAAA,EAAAA,EAAaS,MAAAA,GAAUP,EAAYU,EAAnCZ,IAAyC,EAAI,IAC9G,MAAO,WAACa,EAAAA,CAAIA,CAAAA,CAACC,SAAS,IAACC,eAAe,eAAeC,WAAW,SAASC,OAAQ,EAAGC,UAAW,EAAGC,KAAM,GAAIvB,sBAAoB,OAAOC,wBAAsB,YAAYC,0BAAwB,0BAC7L,UAACe,EAAAA,CAAIA,CAAAA,CAACC,SAAS,IAACC,eAAe,SAASC,WAAW,SAASG,KAAK,OAAOvB,sBAAoB,OAAOE,0BAAwB,yBACzH,WAACsB,EAAAA,CAAUA,CAAAA,CAACC,MAAM,IAACC,SAAS,SAAS1B,sBAAoB,aAAaE,0BAAwB,0BAAgB,UACpGE,OAAAA,EAAAA,KAAAA,EAAAA,EAAauB,IAAAA,GAAQrB,EAAYsB,IAAI,EAAI,SAIrD,UAACX,EAAAA,CAAIA,CAAAA,CAACC,SAAS,IAACC,eAAe,SAASC,WAAW,SAASG,KAAK,OAAOvB,sBAAoB,OAAOE,0BAAwB,yBACzH,WAACsB,EAAAA,CAAUA,CAAAA,CAACC,MAAM,IAACC,SAAS,SAAS1B,sBAAoB,aAAaE,0BAAwB,0BAAgB,UACpGE,CAAAA,QAAAA,KAAAA,EAAAA,EAAayB,IAAAA,GAAbzB,EAAiC0B,IAAI,EAAI,SAIrD,UAACb,EAAAA,CAAIA,CAAAA,CAACC,SAAS,IAACC,eAAe,SAASC,WAAW,SAASG,KAAK,OAAOvB,sBAAoB,OAAOE,0BAAwB,yBACzH,WAACsB,EAAAA,CAAUA,CAAAA,CAACC,MAAM,IAACC,SAAS,SAAS1B,sBAAoB,aAAaE,0BAAwB,0BAAgB,YAClGW,SAIpB,4DCvBe,SAASkB,IACtB,IAAMC,EAASC,CAAAA,EAAAA,EAAAA,SAAAA,CAASA,GAClB1B,EAAOnC,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACO,EAAAA,EAAQA,EAC5B,CACJuD,OAAQC,CAAU,CACnB,CAAGC,CAAAA,EAAAA,EAAAA,CAAAA,CAAeA,CAACzD,EAAAA,EAAQA,EACtB,CACJ0D,wBAAyBC,CAAU,CACpC,CAAGF,CAAAA,EAAAA,EAAAA,CAAAA,CAAeA,CAAC7C,EAAAA,EAASA,EACvB,aACJa,CAAW,CACZ,CAAGC,CAAAA,EAAAA,EAAAA,CAAAA,CAAeA,GACbkC,EAAUC,CAAAA,EAAAA,EAAAA,EAAAA,CAAUA,CAACC,EAAAA,EAAYA,EACjCC,EAAsBF,CAAAA,EAAAA,EAAAA,EAAAA,CAAUA,CAACnE,EAAAA,EAAoBA,EACrDsE,EAAqBvE,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACwE,EAAAA,EAAsBA,EACxDC,EAAoBhE,CAAAA,EAAAA,EAAAA,OAAAA,CAAOA,CAAC,IAAM0B,EAAKuC,OAAO,GAAGC,IAAI,GAAI,CAACxC,EAAK,EAC/DyC,EAAqBC,CAAAA,EAAAA,EAAAA,WAAAA,CAAWA,CAAC,CAACC,EAAaC,EAAuBC,KAC1E,IAAMC,EAAc,IAAIC,EAAAA,EAAKA,CAC7BD,EAAYE,OAAO,CAACL,GAChBL,IAAsBQ,EAAYP,OAAO,GAAGC,IAAI,IAAI,CACxDT,EAAWY,GACXX,EAAQa,GACRjB,EAAWe,GACXR,QAAoBS,GAAAA,GACtB,EAAG,CAACN,EAAmBP,EAAYH,EAAYI,EAASG,EAAoB,EACtE,GAFgBS,YAGpBK,CAAa,CACbL,YAAaM,CAAgB,CAC9B,CAAGzB,EAAO0B,KAAK,CAChBC,CAAAA,EAAAA,EAAAA,SAAAA,CAASA,CAAC,KACR,IAAMC,EAAgB,MAAOvE,IAC3B,IAAMwE,EAAM,MAAMC,CAAAA,EAAAA,EAAAA,EAAAA,CAAgBA,CAACzE,GAChB,UAAf,OAAOwE,GACTb,EAAmBa,EAA0B,UAArBJ,EAE5B,EACA,GAAIrD,EAAa,CACf,IAAM+C,EAAqC,YAAvB,CAAE/C,IAAAA,EAAYuB,IAAI,EAAkD,KAAI,GAA/BvB,EAAY3B,KAAK,CAACsF,IAAI,CACnFf,EAAmB5C,EAAY8C,GAAG,CAAEC,EAAa/C,EAAY4D,IAAI,CACnE,KAAoC,EAA7B,QAAI,EAAqC,CAAC,IAA/BR,GAAgCA,GAChDI,EAAcJ,EAElB,EAAG,CAACpD,EAAaoD,EAAeC,CAHmC,CAGjBT,EAAmB,EACrEW,CAAAA,EAAAA,EAAAA,SAAAA,CAASA,CAAC,KACR,IAAMM,EAAe,IACnB,GAAI,KACGC,EAAL,GAAI,QAACA,EAAAA,KAAAA,EAAAA,QAAAA,CAAAA,CAAAA,EAAOC,IAAAA,GAAPD,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,EAAahB,GAAAA,EAAK,OACvB,GAAM,KACJA,CAAG,aACHC,CAAW,CACZ,CAAGe,EAAMC,IAAI,CAIdnB,EAAmBE,EAAqB,UAAhBC,EAC1B,CAAE,MAAOiB,EAAO,CACdC,QAAQD,KAAK,CAAC,kCAAmCA,EACnD,CACF,EAEA,OADAtF,OAAOwF,gBAAgB,CAAC,UAAWL,GAC5B,KACLnF,OAAOyF,mBAAmB,CAAC,UAAWN,EACxC,CACF,EAAG,CAACjB,EAAmB,EACvB,IAAMwB,EAAepE,KAAgBM,OAAa,CAAC,CAACH,EAAKC,UAAU,GAAGb,KAAK,EAAgC,MAA5BY,EAAKC,UAAU,GAAGb,KAAK,EAAYY,EAAKuC,OAAO,GAAG/B,MAAM,CAAG,SAC1I,EAA+B,KACxB,UAAC0D,EAAAA,CAAcA,CAAAA,CAACC,MAAOF,EAAe,oBAAsB,YAAajD,KAAK,SAASoD,QAAS,MAAMpE,IAC3G,MAAMyB,EAAO4C,OAAO,CAAC,CACnBlB,MAAO,CAAC,EACRmB,SAAU7C,EAAO6C,QACnB,OAAGnE,EAAW,CACZoE,SAAS,EACTC,QAAQ,CACV,GACA/B,EAAmBzC,EAAK2C,GAAG,GAC7B,EAAGlD,sBAAoB,iBAAiBC,wBAAsB,WAAWC,0BAAwB,gBACnG,sECrEO,IAAM8E,EAAsBC,IACjC,GAAM,CAACC,EAAiBC,EAAmB,CAAGC,CAAAA,EAAAA,EAAAA,EAAAA,CAAOA,CAACvF,EAAAA,EAAmBA,EACnEuD,EAAWhF,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACqE,EAAAA,EAAYA,EACpClC,EAAOnC,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACO,EAAAA,EAAQA,EAC5B0G,EAAQjH,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACmB,EAAAA,EAASA,EAC9B+F,EAAQlH,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACmH,EAAAA,EAAeA,EACpCC,EAAUpH,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACqH,EAAAA,EAAiBA,EACxC,CAACC,EAAYC,EAAc,CAAGP,CAAAA,EAAAA,EAAAA,EAAAA,CAAOA,CAACQ,EAAAA,EAAcA,EAqJ1D,MAnJAjC,CAAAA,EAAAA,EAAAA,SAAAA,CAASA,CAAC,SAmCHkC,EAlCL,IAAMC,EAAeT,EAAMvC,OAAO,CAAC,CAAEiD,SAAS,CAAK,GAC7CF,EAA4B,CAChCG,SAAUF,EAAaG,EAAE,CAAC,CAAC,EAC7B,EAEMC,EAAc3F,EAAKuC,OAAO,GAEhC,GACEgD,EAAa/E,MAAM,EAAImF,EAAYnF,MAAM,EACzCmF,EAAYC,KAAK,CAAC,EAAGL,EAAa/E,MAAM,EAAEgC,IAAI,KAC5C+C,EAAaM,GAAG,CAAC,GAAOC,EAAEC,GAAG,EAAEvD,IAAI,IACrC,CACA8C,EAASU,cAAc,CAAGT,EAAa/E,MAAM,CAEzCqC,GAAU,CACZ,IAAMoD,EAAYV,EAAa/E,MAAM,CAErC8E,EAAS7B,IAAI,CAAG,CACd,GAAGZ,EAASqD,SAAS,CAACD,EAAU,CAChCE,MAAOtD,EAASqD,SAAS,CAACD,EAAU,CAACE,KAAK,CAACP,KAAK,CAAC,EAAGX,EACtD,EACAK,EAASc,QAAQ,CACfH,EAAY,EACR,CACE,GAAGpD,EAASqD,SAAS,CAACD,EAAY,EAAE,CACpCE,MAAOtD,EAASqD,SAAS,CAACD,EAAY,EAAE,CAACE,KAAK,CAACP,KAAK,CAClD,EACAX,EAEJ,EACA9E,MACR,CAGF,GAAI,EAAc,QAAbmF,EAAAA,EAAS7B,IAAI,GAAb6B,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,EAAee,OAAAA,EAClB,CAD2B,GACtB,IAAMC,KAAQf,EAAaK,KAAK,GAAGW,OAAO,GAAI,CACjD,IAAMC,EAAUF,EAAKG,KAAK,CAAClG,KAAK,CAAC,IAAI,CAAC,EAAE,CAClC8F,EAAUK,EAAAA,CAAQA,CAACC,IAAI,CAAC,GAAaN,EAAQO,GAAG,GAAKJ,GAC3D,GAAIH,EAAS,CACXf,EAASe,OAAO,CAAGA,EAAQ7C,IAAI,CAC/B,KACF,CACF,CAKF,GAFAoB,EAAmBU,GAGjB,CAACA,EAAS7B,IAAI,SACdiB,EAAAA,KAAAA,EAAAA,EAAQmC,QAARnC,EAAkB,KAClBA,EAAOlB,IAAI,EACX,CAACsB,EAAMgC,WAAW,IAClB,CAAChC,EAAMiC,WAAW,GAClB,CACA,IAAMC,EAAmB,MACvBJ,EACAK,SASGC,EAAAA,EACAA,EARH,GAAI,CAACxC,EAAOmC,UAAU,GACpB,CADwB,KAClB,MAAU,oBAElB,IAAMK,EAAY/B,CAAU,CAACyB,EAAI,CACjC,GACEM,GACAA,EAAUxC,MAAM,GAAKA,EAAOlB,IAAI,EAChC,CAAwB,QAAvB0D,EAAe,QAAfA,EAAAA,EAAUf,KAAK,GAAfe,KAAAA,MAAAA,KAAAA,EAAAA,EAAiB1G,MAAAA,GAAjB0G,KAAAA,IAAAA,EAAAA,GAA2B,GAAMjC,GAClC,CAACiC,QAAAA,EAAAA,EAAUf,KAAK,CAAC,EAAE,CAACpB,KAAAA,GAAnBmC,KAAAA,MAAAA,GAA4B,GAAMnC,EACnC,CACA,IAAMoC,EAA6B,CACjC,GAAGD,CAAS,CACZf,MAAOe,EAAUf,KAAK,CAACP,KAAK,CAAC,EAAGX,EAClC,EAEA,aADAgC,GAAAA,EAAiBE,GACVA,CACT,CAEA,IAAMC,EAAkB,MAAM1C,EAAO2C,GAJnCJ,uBAI6D,CAAC,KAC9DL,QACA7B,UACAE,iBACAgC,CACF,GAOA,OALA7B,EAAc,GAAW,EACvB,EADuB,CACpBkC,CAAI,CACP,CAACV,EAAI,CAAE,CAAE,GAAGQ,CAAe,CAAE1C,OAAQA,EAAOlB,IAAI,EAClD,GAEO4D,CACT,EA8CAG,CA5CwB,UAItB,IAAMH,EAAkB,MAAMJ,EAC5BlC,EAAM8B,GAAG,GAJY,CAKrBK,GAJArC,EAAmB,CAAE,GAAGU,CAAQ,CAAE7B,KAAM0D,CAAa,EACvD,GAMA,GAAI5B,MAAa/E,MAAM,CAAQ,OAE/B,IAAMgH,EAASC,CAAAA,EAAAA,EAAAA,EAAAA,CAAqBA,CAAC3C,GAC/B4C,EAAOF,EAAOE,IAAI,CAAC9B,KAAK,CAAkB,MAAjBd,EAAM6C,IAAI,GAAa,CAAC,EAAI,CAAC,GACtDC,EAAWJ,EAAOI,QAAQ,CAAChC,KAAK,CAAkB,MAAjBd,EAAM6C,IAAI,GAAa,CAAC,EAAI,CAAC,GAE9DE,EAAc,MAAMb,EAAiBU,EAAK9B,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,EACtDkC,EAA+BJ,EAAK7B,GAAG,CAAC,CAACkC,EAAGC,IAChD,IAAYN,EAAKlH,MAAM,CAAG,EAAUqH,CAAP,CACzBG,IAAQN,EAAKlH,MAAM,CAAG,EAAU4G,CAAP,CACtB,CACLjB,MAAO,CACL,CACE8B,GAAI,EAAE,CACNlD,MAAO,EACPE,QAAS,EACTiD,GAAI,CACN,EACD,GAICC,EAAkCC,CAAAA,EAAAA,EAAAA,CAAAA,CAAsBA,CAC5DN,EACAF,EACAF,GAGF9C,EAAmB,CACjB,GAAGU,CAAQ,CACX7B,KAAM0E,EAAgCvC,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,CAClDQ,SAAU+B,EAAgCvC,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,GAE1D,GAGF,CAEA,MAAO,YACDlB,EAAAA,KAAAA,EAAAA,EAAQmC,QAARnC,EAAkB,KAAI,OACxBA,GAAAA,EAAQ2D,cAAR3D,IAA0B,GAE9B,CAEF,EAAG,CAAC7B,EAAUiC,EAAO9E,EAAM0E,EAAQK,EAAOE,EAAQ,EAE3CN,CACT,EAAE,SCjKsB2D,IACtB,IAAMC,EAAa1K,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAAC2K,EAAAA,EAAcA,EACxC9D,EAAS+D,CAAAA,EAAAA,EAAAA,CAAAA,CAASA,CAACF,GACzB9D,EAAmBC,GACnB,IAAMgE,EAAkB7K,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAAC8K,EAAAA,EAAmBA,EAClD,CAACvG,EAAoBwG,EAAsB,CAAG/D,CAAAA,EAAAA,EAAAA,EAAAA,CAAOA,CAACxC,EAAAA,EAAsBA,EAC5EwG,EAAchL,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACmH,EAAAA,EAAeA,EAC1C8D,EAAgBjL,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACqH,EAAAA,EAAiBA,EAC9C,aACJ6D,CAAW,aACXlJ,CAAW,CACZ,CAAGC,CAAAA,EAAAA,EAAAA,CAAAA,CAAeA,GACb,CAAC+C,EAAUb,EAAQ,CAAG6C,CAAAA,EAAAA,EAAAA,EAAAA,CAAOA,CAAC3C,EAAAA,EAAYA,EAC1ClC,EAAOnC,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACO,EAAAA,EAAQA,EAC5BgH,EAAgBnD,CAAAA,EAAAA,EAAAA,EAAAA,CAAUA,CAACoD,EAAAA,EAAcA,EACzC,OACJpH,CAAK,CACLC,OAAK,CACN,CAAGC,CAAAA,EAAAA,EAAAA,CAAAA,CAAcA,CAACC,EAAAA,EAAQA,EACrB4K,EAAiBtE,SAAAA,KAAAA,EAAAA,EAAQmC,CAARnC,SAAkB,KAAM1E,EAAKuC,OAAO,GAAG/B,MAAM,CAAG,GAAK,CAAC4B,EACvE6G,EAAgBvG,CAAAA,EAAAA,EAAAA,WAAAA,CAAWA,CAAC,UAChC,IAAM8E,EAASC,CAAAA,EAAAA,EAAAA,EAAAA,CAAqBA,CAACzH,GACrC,GAAI,QAAC0E,EAAAA,KAAAA,EAAAA,EAAQmC,QAARnC,EAAkB,KAA6B,IAAvB8C,EAAOE,IAAI,CAAClH,MAAM,EAAU4B,EACvD,OAEF,IAAM8G,EAAc,KAHyD,CAGnDxE,EAAOyE,YAAY,CAAC,CAC5C,GAAG3B,CAAM,CACTzC,MAAO8D,EACP5D,QAAS6D,wBACTF,EACAQ,eAAgB,CACdnL,KAAK,OAAEA,EAAAA,KAAAA,EAAAA,EAAOoL,MAAM,CACpBnL,KAAK,OAAEA,EAAAA,KAAAA,EAAAA,EAAOmL,MAAM,CAAbnL,CAEToL,UAAWZ,CACb,GACA1G,EAAQkH,GACRN,EAAsB,GAClB/I,GACFkJ,EAAYlJ,EAAYf,EAAE,CAAEoK,GAE9B,IAAMK,EAA6B/B,EAAOE,IAAI,CAAC8B,MAAM,CAAC,CAACC,EAAK7C,EAAKoB,KAC/DyB,CAAG,CAAC7C,EAAI,CAAG,CACT,GAAGsC,EAAYhD,SAAS,CAAC8B,EAAI,CAC7BtD,OAAQ6D,CACV,EACOkB,GACN,CAAC,GACJrE,EAAckC,GAAS,EACrB,EADqB,CAClBA,CAAI,CACP,GAAGiC,CAAc,CACnB,GACAG,CAAAA,EAAAA,EAAAA,CAAAA,CAAiBA,CAAC,eAAgB,CAChChF,OAAQ6D,EACRxD,MAAO8D,EACP5D,QAAS6D,EACTa,YAAanC,EAAOE,IAAI,CAAClH,MAAM,EAEnC,EAAG,CAACkE,EAAQ6D,EAAYG,EAAiB1I,EAAM6I,EAAaC,EAAe1G,EAAoBwG,EAAuB5G,EAASnC,EAAakJ,EAAa3D,EAAenH,EAAMoL,MAAM,CAAEnL,EAAMmL,MAAM,CAAC,QAWnM,CAVAjG,CAAAA,EAAAA,EAAAA,SAAAA,CAASA,CAAC,KACRwF,EAAsB,EACxB,EAAG,CAAClE,EAAQkE,EAAsB,EAGlCxF,CAAAA,EAAAA,EAAAA,SAAAA,CAASA,CAAC,KACJ,CAACP,GAAYmG,GACfC,GAEJ,EAAG,CAACpG,EAAUmG,EAAgBC,EAAc,CAHT,CAI/B7G,GAA2B,KACxB,UAACwH,EAAAA,CAAaA,CAAAA,CAACC,QAAQ,YAAY7I,KAAK,SAAS8I,UAAW,UAACC,EAAAA,EAAIA,CAAAA,CAACC,KAAK,oCAAoCvL,OAAQ,KAAQwL,QAAShB,EAAeiB,SAAU,CAAClB,EAAgBvJ,sBAAoB,gBAAgBC,wBAAsB,gBAAgBC,0BAAwB,6BACnR,UAACsB,EAAAA,CAAUA,CAAAA,CAACE,SAAS,QAAQgJ,WAAW,MAAMC,WAAW,QAAQ3K,sBAAoB,aAAaE,0BAAwB,6BACvHkD,EAAW,gBAAkB,aAGtC,sCCzDA,MA7B0B,GAIxB,GAAuB,CAAnBwH,EAAMC,KAAK,CAAe,KACvB,UAwBMC,CAxBL7J,EAAAA,CAAIA,CAAAA,CAACC,SAAS,IAACE,WAAW,SAASD,eAAe,SAAS4J,KAAK,SAAShM,MAAM,MAAMuC,UAAW,EAAGC,KAAM,GAAIvB,sBAAoB,OAAOC,wBAAsB,oBAAoBC,0BAAwB,kCAC9M,UAACsB,EAAAA,CAAUA,CAAAA,CAAC4I,QAAQ,UAAUY,MAAM,SAAShL,sBAAoB,aAAaE,0BAAwB,iCACnG0K,EAAMlG,KAAK,GAEd,UAACzD,EAAAA,CAAIA,CAAAA,CAACgK,GAAI,CACVlM,MAAO,MACT,EAAGiB,sBAAoB,OAAOE,0BAAwB,iCAClD,UAACgL,EAAAA,CAAcA,CAAAA,CAACd,QAAQ,cAAe,GAAGQ,CAAK,CAAEK,GAAIE,GAAU,EAC/DC,GAD+D,UACjD,MACdpM,OAAQ,MACR,CAAC,KAAwC,OAAnCqM,EAAAA,CAAqBA,CAACC,YAAY,EAAG,CAAE,CAC3CC,gBAAiBJ,EAAMK,OAAO,CAACC,IAAI,CAAwB,UAAvBN,EAAMK,OAAO,CAACE,IAAI,CAAe,IAAM,IAAI,EAEjF,CAAC,MAAgC,OAA1BL,EAAAA,CAAqBA,CAACM,GAAG,EAAG,CAAE,CACnCP,aAAc,EACdG,gBAAiBK,EAAAA,EAAyBA,EAE9C,EAAI5L,sBAAoB,iBAAiBE,0BAAwB,4BAEjE,UAACe,EAAAA,CAAIA,CAAAA,CAACjB,sBAAoB,OAAOE,0BAAwB,iCACvD,UAACsB,EAAAA,CAAUA,CAAAA,CAAC4I,QAAQ,QAAQyB,MAAM,iBAAiB7L,sBAAoB,aAAaE,0BAAwB,iCAAyB,GAA2B,OAAxBhB,KAAK4M,KAAK,CAAClB,EAAMC,KAAK,EAAE,YCnBzJ,SAASkB,IACtB,IAAMpJ,EAAqBvE,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACwE,EAAAA,EAAsBA,EAC9D,MAAO,WAAC3B,EAAAA,CAAIA,CAAAA,CAACC,SAAS,IAACC,eAAe,SAASC,WAAW,SAASC,OAAQ,EAAGE,KAAM,GAAIvB,sBAAoB,OAAOC,wBAAsB,cAAcC,0BAAwB,sBAC3K,WAACe,EAAAA,CAAIA,CAAAA,CAACC,SAAS,IAACC,eAAe,SAASC,WAAW,SAASE,UAAW,EAAGC,KAAM,GAAIvB,sBAAoB,OAAOE,0BAAwB,sBACrI,UAACoK,EAAAA,EAAIA,CAAAA,CAACC,KAAK,6BAA6BvL,OAAQ,GAAIgB,sBAAoB,OAAOE,0BAAwB,cAEvG,UAACsB,EAAAA,CAAUA,CAAAA,CAAC4I,QAAQ,KAAKY,MAAM,SAAShL,sBAAoB,aAAaE,0BAAwB,qBAAY,qBAK/G,WAACe,EAAAA,CAAIA,CAAAA,CAACC,SAAS,IAACC,eAAe,SAASC,WAAW,SAASC,OAAQ,EAAGC,UAAW,GAAIC,KAAM,GAAIvB,sBAAoB,OAAOE,0BAAwB,sBACjJ,UAACC,EAASA,CAACH,MAADG,gBAAqB,YAAYD,0BAAwB,cACnE,UAAC6B,EAAQA,CAAC/B,KAAD+B,iBAAqB,WAAW7B,0BAAwB,cACjE,UAAC2I,EAAaA,CAAC7I,UAAD6I,YAAqB,gBAAgB3I,0BAAwB,cAC3E,UAAC4K,EAAiBA,CAACD,MAAOlI,EAAoB+B,MAAM,WAAlCoG,IAAiD9K,sBAAoB,oBAAoBE,0BAAwB,mBAG3I,2BCrBe,SAAS8L,IACtB,IAAMtJ,EAAsBF,CAAAA,EAAAA,EAAAA,EAAAA,CAAUA,CAACnE,EAAAA,EAAoBA,EAY3D,MAXAsF,CAAAA,EAAAA,EAAAA,SAAAA,CAASA,CAAC,KACR,IAAMsI,EAAY,IACF,KAAK,CAAfC,EAAEC,GAAG,EACPzJ,EAAoBmF,GAAQ,CAACA,EAEjC,EAEA,OADA/I,OAAOwF,gBAAgB,CAAC,UAAW2H,GAC5B,KACLnN,OAAOyF,mBAAmB,CAAC,UAAW0H,EACxC,CACF,EAAG,CAACvJ,EAAoB,EACjB,UAAC0J,EAAAA,CAAOA,CAAAA,CAACC,MAAM,aAAarM,sBAAoB,UAAUC,wBAAsB,kBAAkBC,0BAAwB,+BAC7H,UAACoM,EAAAA,CAAUA,CAAAA,CAAC9B,QAAS,IAAM9H,EAAoBmF,GAAQ,CAACA,GAAOoD,GAAI,CACnEsB,SAAU,IACVC,SAAU,EACZ,EAAGxM,sBAAoB,aAAaE,0BAAwB,+BACxD,UAACoK,EAAAA,EAAIA,CAAAA,CAACC,KAAK,gBAAgBvK,sBAAoB,OAAOE,0BAAwB,2BAGtF,CCpBe,SAASuM,IACtB,GAAM,CACJC,SAAUC,CAAa,CACxB,CAAGvK,CAAAA,EAAAA,EAAAA,CAAAA,CAAeA,CAAC7C,EAAAA,EAASA,EACvBgB,EAAOnC,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACO,EAAAA,EAAQA,EAC5B0G,EAAQjH,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACmB,EAAAA,EAASA,EAC9B2G,EAAc3F,EAAKuC,OAAO,GAC1BgD,EAAeT,EAAMvC,OAAO,GAC5B8J,EAAkB9G,EAAa/E,MAAM,CAAGmF,EAAYnF,MAAM,EAAImF,EAAYC,KAAK,CAAC,EAAGL,EAAa/E,MAAM,EAAEgC,IAAI,KAAO+C,EAAa/C,IAAI,GACpI8J,EAAyB5J,CAAAA,EAAAA,EAAAA,WAAAA,CAAWA,CAAC,SAMzB1C,EALhB,GAAI,CAACqM,EAAiB,OACtB,IAAME,EAAgBhH,EAAa/E,MAAM,CACnCgM,EAAWxM,EAAKuC,OAAO,CAAC,CAC5BiD,SAAS,CACX,EAAE,CAAC+G,EAAc,CACXE,EAAAA,OAAUzM,GAAAA,EAAK0M,WAAW,GAAG/F,IAAI,CAACgG,GAAKA,EAAE/F,GAAG,GAAK4F,EAAS/F,MAAK,GAArDzG,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,EAAwDyM,OAAO,CAC3ED,GACFJ,EAAc,CACZQ,IAFU,CAEJJ,EAASI,IAAI,CACnBC,GAAIL,EAASK,EAAE,CACfC,UAAWN,EAASM,SAAS,SAC7BL,CACF,EAEJ,EAAG,CAACJ,EAAiB9G,EAAcvF,EAAMoM,EAAc,EAYvD,MAXAhJ,CAAAA,EAAAA,EAAAA,SAAAA,CAASA,CAAC,KACR,IAAMsI,EAAY,IACF,cAAc,CAAxBC,EAAEC,GAAG,EACPU,GAEJ,EAEA,OADA/N,OAAOwF,gBAAgB,CAAC,UAAW2H,GAC5B,KACLnN,OAAOyF,mBAAmB,CAAC,UAAW0H,EACxC,CACF,EAAG,CAACY,EAAuB,EACpB,UAACT,EAAAA,CAAOA,CAAAA,CAACC,MAAM,kBAAkBrM,sBAAoB,UAAUC,wBAAsB,iBAAiBC,0BAAwB,8BACjI,UAACe,EAAAA,CAAIA,CAAAA,CAACjB,sBAAoB,OAAOE,0BAAwB,8BACvD,UAACoM,EAAAA,CAAUA,CAAAA,CAAC9B,QAAS,IAAMqC,IAA0BpC,SAAU,CAACmC,EAAiB3B,GAAI,CACrFsB,SAAU,IACVC,SAAU,EACZ,EAAGxM,sBAAoB,aAAaE,0BAAwB,8BACxD,UAACoK,EAAAA,EAAIA,CAAAA,CAACC,KAAK,wBAAwBvL,OAAQ,GAAIgB,sBAAoB,OAAOE,0BAAwB,4BAI5G,CC9Ce,SAASoN,IACtB,GAAM,CACJpL,OAAQqL,CAAW,CACpB,CAAGnL,CAAAA,EAAAA,EAAAA,CAAAA,CAAeA,CAAC7C,EAAAA,EAASA,EACvBgB,EAAOnC,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACO,EAAAA,EAAQA,EAC5B0G,EAAQjH,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACmB,EAAAA,EAASA,EAC9B2G,EAAc3F,EAAKuC,OAAO,GAE1B0K,EADenI,EAAMvC,OAAO,IACOoD,EAazC,MAZAvC,CAAAA,EAAAA,EAAAA,SAAAA,CAASA,CAAC,KACR,IAAMsI,EAAY,IACF,WAAW,CAArBC,EAAEC,GAAG,EACHqB,GACJD,EAAYhN,EAAK2C,GAAG,GAExB,EAEA,GAL0B,IAI1BpE,OAAOwF,gBAAgB,CAAC,UAAW2H,GAC5B,KACLnN,OAAOyF,mBAAmB,CAAC,UAAW0H,EACxC,CACF,EAAG,CAACuB,EAAkBD,EAAahN,EAAK,EACjC,UAAC6L,EAAAA,CAAOA,CAAAA,CAACC,MAAM,uBAAuBrM,sBAAoB,UAAUC,wBAAsB,yBAAyBC,0BAAwB,sCAC9I,UAACe,EAAAA,CAAIA,CAAAA,CAACjB,sBAAoB,OAAOE,0BAAwB,sCACvD,UAACoM,EAAAA,CAAUA,CAAAA,CAAC9B,QAAS,KACjBgD,GACJD,EAAYhN,EAAK2C,GAAG,GACtB,EAAGuH,GAFqB,MAEX+C,EAAkBvC,GAAI,CACjCsB,SAAU,IACVC,SAAU,EACZ,EAAGxM,sBAAoB,aAAaE,0BAAwB,sCACxD,UAACoK,EAAAA,EAAIA,CAAAA,CAACC,KAAK,uBAAuBvL,OAAQ,GAAIgB,sBAAoB,OAAOE,0BAAwB,oCAI3G,CCjCe,SAASuN,IACtB,IAAMlN,EAAOnC,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACO,EAAAA,EAAQA,EAC5B0G,EAAQjH,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACmB,EAAAA,EAASA,EAC9B6D,EAAWhF,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACqE,EAAAA,EAAYA,EACpC,CACJiL,SAAO,aACPpE,CAAW,aACXlJ,CAAW,CACZ,CAAGC,CAAAA,EAAAA,EAAAA,CAAAA,CAAeA,GACb2B,EAASC,CAAAA,EAAAA,EAAAA,SAAAA,CAASA,GAClB0L,EAAa,CAACvN,IAAgBiF,EAAMvC,OAAO,EAAbuC,CAAgBtE,MAAM,EAAIR,EAAKuC,OAAO,GAAG/B,MAAAA,EACvE6M,EAAa,UACjB,GAAI,CAACD,EAAY,OACjB,IAAME,EAAaC,CAAAA,EAAAA,EAAAA,EAAAA,CAAaA,CAACvN,EAAM8E,GACjC0I,EAAS,MAAML,EAAQG,GACzBzK,GACF,MAAMkG,CADM,CACMyE,EAAQ3K,GAE5BpB,EAAO4C,OAAO,CAAC,CACblB,MAAO,CACLqK,OAAQA,CACV,EACAlJ,SAAU7C,EAAO6C,QAAQ,OACxBnE,EAAW,CACZoE,SAAS,EACTC,QAAQ,CACV,EACF,EACA,MAAO,+BACF3E,EAAc,UAACgM,EAAAA,CAAOA,CAAAA,CAACC,MAAM,kCAC1B,UAACpL,EAAAA,CAAIA,CAAAA,UACH,UAACqL,EAAAA,CAAUA,CAAAA,CAAC7B,UAAU,EAAMQ,GAAI,CAClCsB,SAAU,IACVC,SAAU,EACZ,WACM,UAAClC,EAAAA,EAAIA,CAAAA,CAACC,KAAK,+BAGJ,UAAC6B,EAAAA,CAAOA,CAAAA,CAACC,MAAM,qBAC1B,UAACpL,EAAAA,CAAIA,CAAAA,UACH,UAACqL,EAAAA,CAAUA,CAAAA,CAAC9B,QAASoD,EAAYnD,SAAU,CAACkD,EAAY1C,GAAI,CAC9DsB,SAAU,IACVC,SAAU,EACZ,WACM,UAAClC,EAAAA,EAAIA,CAAAA,CAACC,KAAK,0BAKzB,CC9Ce,SAASyD,IACtB,IAAM3I,EAAQjH,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACmB,EAAAA,EAASA,EAC9B,CACJ8C,wBAAyBC,CAAU,CACnC2L,SAAUC,CAAa,CACxB,CAAG9L,CAAAA,EAAAA,EAAAA,CAAAA,CAAeA,CAAC7C,EAAAA,EAASA,EACvBuG,EAAeT,EAAMvC,OAAO,GAC5BvC,EAAOnC,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACO,EAAAA,EAAQA,EAelC,MAdAgF,CAAAA,EAAAA,EAAAA,SAAAA,CAASA,CAAC,KACR,IAAMsI,EAAY,IACY,GAAG,CAA3BnG,EAAa/E,MAAM,GACT,aAAa,CAAvBmL,EAAEC,GAAG,CACP+B,IACmB,aAAa,CAAvBhC,EAAEC,GAAG,EACd7J,IAEJ,EAEA,OADAxD,OAAOwF,gBAAgB,CAAC,UAAW2H,GAC5B,KACLnN,OAAOyF,mBAAmB,CAAC,UAAW0H,EACxC,CACF,EAAG,CAACiC,EAAepI,EAAcxD,EAAY+C,EAAM,EAC5C,WAACpE,EAAAA,CAAIA,CAAAA,CAACC,SAAS,IAACC,eAAe,SAASC,WAAW,SAASG,KAAM,GAAIvB,sBAAoB,OAAOC,wBAAsB,eAAeC,0BAAwB,sBACjK,UAAC8L,EAAeA,CAAChM,YAADgM,UAAqB,kBAAkB9L,0BAAwB,cAE/E,UAACkM,EAAAA,CAAOA,CAAAA,CAACC,MAAM,cAAcrM,sBAAoB,UAAUE,0BAAwB,qBACjF,UAACe,EAAAA,CAAIA,CAAAA,CAACjB,sBAAoB,OAAOE,0BAAwB,qBACvD,UAACoM,EAAAA,CAAUA,CAAAA,CAAC9B,QAAS,IAAMlI,IAAcmI,SAAkC,IAAxB3E,EAAa/E,MAAM,CAAQkK,GAAI,CAClFsB,SAAU,IACVC,SAAU,EACZ,EAAGxM,sBAAoB,aAAaE,0BAAwB,qBACxD,UAACoK,EAAAA,EAAIA,CAAAA,CAACC,KAAK,oBAAoBvL,OAAQ,GAAIgB,sBAAoB,OAAOE,0BAAwB,oBAKpG,UAACkM,EAAAA,CAAOA,CAAAA,CAACC,MAAM,sBAAsBrM,sBAAoB,UAAUE,0BAAwB,qBACzF,UAACe,EAAAA,CAAIA,CAAAA,CAACjB,sBAAoB,OAAOE,0BAAwB,qBACvD,UAACoM,EAAAA,CAAUA,CAAAA,CAAC9B,QAAS,IAAM0D,IAAiBzD,SAAU3E,MAAa/E,MAAM,CAAQkK,GAAI,CACrFsB,SAAU,IACVC,SAAU,EACZ,EAAGxM,sBAAoB,aAAaE,0BAAwB,qBACxD,UAACoK,EAAAA,EAAIA,CAAAA,CAACC,KAAK,uBAAuBvL,OAAQ,GAAIgB,sBAAoB,OAAOE,0BAAwB,oBAKvG,UAACuM,EAAcA,CAACzM,WAADyM,WAAqB,iBAAiBvM,0BAAwB,cAE7E,UAACoN,EAAsBA,CAACtN,mBAADsN,GAAqB,yBAAyBpN,0BAAwB,cAE7F,UAACkM,EAAAA,CAAOA,CAAAA,CAACC,MAAM,WAAWrM,sBAAoB,UAAUE,0BAAwB,qBAC9E,UAACe,EAAAA,CAAIA,CAAAA,CAACjB,sBAAoB,OAAOE,0BAAwB,qBACvD,UAACoM,EAAAA,CAAUA,CAAAA,CAAC7B,SAAoC,IAA1BlK,EAAKuC,OAAO,GAAG/B,MAAM,CAAQyJ,QAAS,SAC5D2D,EAAAA,CAAmB,SAAnBA,EAAAA,UAAUC,SAAAA,GAAVD,KAAAA,OAAAA,QAAAA,EAAAA,EAAqBE,SAAS,GAA9BF,KAAAA,IAAAA,GAAAA,EAAAA,IAAAA,CAAAA,EAAiC5N,EAAK2C,GAAG,GAC3C,EAAG+H,GAAI,CACLsB,SAAU,IACVC,SAAU,EACZ,EAAGxM,sBAAoB,aAAaE,0BAAwB,qBACxD,UAACoK,EAAAA,EAAIA,CAAAA,CAACC,KAAK,oBAAoBvK,sBAAoB,OAAOE,0BAAwB,oBAKxF,UAACuN,EAAUA,CAACzN,OAADyN,eAAqB,aAAavN,0BAAwB,gBAE3E,gBCtEe,SAASoO,EAAc,CAI9B,KAJ8B,OACpCjC,CAAK,YACLkC,CAAU,YACVC,CAAU,CACJ,CAJ8B,EAKpC,MAAO,WAACC,EAAAA,CAAKA,CAAAA,CAACtN,eAAe,SAASC,WAAW,SAASsN,cAAc,MAAMpN,UAAW,CACvFqN,GAAI,MACJC,GAAI,EACN,EAAG5O,sBAAoB,QAAQC,wBAAsB,gBAAgBC,0BAAwB,8BACzF,UAAC2O,EAAAA,CAAWhE,MAAO0D,EAAY1C,MAAM,QAAQ7L,sBAAoB,aAAaE,0BAAwB,sBAEtG,UAACsB,EAAAA,CAAUA,CAAAA,CAACwJ,MAAM,SAAStJ,SAAS,QAAQD,MAAM,IAACzB,sBAAoB,aAAaE,0BAAwB,6BACzGmM,IAGH,UAACwC,EAAAA,CAAWhE,MAAO2D,EAAY3C,MAAM,QAAQ7L,sBAAoB,aAAaE,0BAAwB,wBAE5G,CACA,IAAM2O,EAAa,OAAC,OAClBhE,CAAK,OACLgB,CAAK,CAIN,GACC,MAAO,UAACrK,EAAAA,CAAUA,CAAAA,CAACwJ,MAAM,SAASC,GAAI,CACpCM,gBAAiBM,EACjBA,MAAiB,UAAVA,EAAoB,QAAU,OACvC,EAAGT,aAAa,MAAMT,WAAW,MAAMjJ,SAAS,QAAQoN,QAAS,GAAKpE,WAAW,MAAMqE,OAAO,oBAAoBtN,MAAM,IAACzB,sBAAoB,aAAaC,wBAAsB,aAAaC,0BAAwB,6BAChN2K,GAEP,+ECxBe,SAASmE,EAAc,CAM9B,KAN8B,KACpC1I,CAAG,OACHuF,CAAK,gBACLoD,CAAc,iBACdC,CAAe,UACfC,CAAQ,CACF,CAN8B,EAQ9BC,EAAoC,SAAvBjE,CADLkE,EAAAA,EAAAA,CAAAA,CAAQA,GACG7D,OAAO,CAACE,IAAI,CAC/B,MACJnB,CAAI,MACJ+E,CAAI,CACL,CAAGzQ,CAAAA,EAAAA,EAAAA,OAAAA,CAAOA,CAAC,KACV,IAAM0Q,EAAYjJ,EAAIkJ,MAAM,CAAC,GAE7B,GAAI,CADY,CAAC,IAAK,IAAK,IAAK,IAAK,IAAI,CAACC,QAAQ,CAACF,GACrC,MAAO,CACnBD,KAAMhJ,CACR,EACA,IAAMoJ,EAAaN,EAAavD,EAAkB,MAAVA,EAAgB,IAAM,IAE9D,MAAO,CACLtB,KAFWoF,EAAU,CAACJ,EAAU,CAACG,EAAW,CAG5CJ,KAAMhJ,EAAIH,KAAK,CAAC,EAClB,CACF,EAAG,CAACG,EAAKuF,EAAOuD,EAAW,EAC3B,MAAO,WAACQ,EAAAA,CAAGA,CAAAA,CAACC,UAAU,OAAQ,GAAGV,CAAQ,CAAEnP,sBAAoB,MAAMC,wBAAsB,gBAAgBC,0BAAwB,sBAC9HqK,GAAQ,UAAC/I,EAAAA,CAAUA,CAAAA,CAACqO,UAAU,OAAOC,WAAYC,IAAAA,KAAe,CAACD,UAAU,CAAG,GAAGZ,CAAe,UAC5F3E,IAGL,WAAC/I,EAAAA,CAAUA,CAAAA,CAACqO,UAAU,OAAOpO,MAAM,IAAE,GAAGyN,CAAe,CAAElP,sBAAoB,aAAaE,0BAAwB,sBAC/GoP,EACAL,OAGT,CACA,IAAMU,GAAwD,CAC5DK,EAAG,CACDC,EAAG,IACHC,EAAG,GACL,EACAC,EAAG,CACDF,EAAG,IACHC,EAAG,GACL,EACAE,EAAG,CACDH,EAAG,IACHC,EAAG,GACL,EACAG,EAAG,CACDJ,EAAG,IACHC,EAAG,GACL,EACAI,EAAG,CACDL,EAAG,IACHC,EAAG,GACL,CACF,iBC7De,SAASK,SAGL1K,EAsBUA,EAWfA,EAAqCA,EAUjBA,EAVpBA,EAAqCA,EAUjBA,EA7ChC,IAAMA,EAAWzH,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACyB,EAAAA,EAAmBA,EAC3CwF,EAAQjH,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACmB,EAAAA,EAASA,EAC9BiR,QAAW3K,EAAAA,KAAAA,EAAAA,QAAAA,EAAAA,EAAUc,QAAAA,GAAVd,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,EAAoB2K,QAAQ,CACvCC,EAAc5R,CAAAA,EAAAA,EAAAA,OAAAA,CAAOA,CAAC,SAELwG,EADrB,GAAI,CAACmL,EAAU,OAAO9P,IAChBgQ,EAAAA,QAAerL,EAAAA,EAAMvC,OAAO,CAAC,CACjCiD,SAAS,CACX,GAAGE,EAAE,CAAC,CAAC,KAFcZ,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,EAEVsL,MAAM,CACjB,GAAKD,CAAD,CACJ,MAAOE,CAAAA,EAAAA,EAAAA,CADY,CACZA,CAAgBA,CAACF,GAAcF,CADZ9P,CAE5B,EAAG,CAAC8P,EAAUnL,EAAM,EACpB,GAA+B,IAA3BA,EAAMvC,OAAO,GAAG/B,MAAM,CAAQ,OAAO,KACzC,GAAI,CAAC0P,EACH,MAAO,UAAChC,EAAAA,CAAKA,CAAAA,CAACoC,UAAU,MAAMzP,WAAW,SAASE,UAAW,EAAGwP,UAAW,YACvE,UAACC,EAAAA,CAAQA,CAAAA,CAAC3G,QAAQ,UAAU4G,UAAU,OAAOjS,MAAO,OAAQkM,GAAI,CAChEY,MAAO,cACPoF,SAAU,KACZ,WACI,UAACzP,EAAAA,CAAUA,CAAAA,CAACwJ,MAAM,SAAStJ,SAAS,kBAAS,oBAMrD,IAAMwP,EAAAA,QAAqBrL,EAAAA,EAAS7B,IAAAA,GAAT6B,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,EAAeqL,kBAAkB,CACtDC,EAAoBD,IAAuBE,EAAAA,EAAkBA,CAACC,IAAI,EAAIH,IAAuBE,EAAAA,EAAkBA,CAACE,OAAO,EAAIJ,IAAuBE,EAAAA,EAAkBA,CAACG,MAAM,EAAIL,IAAuBE,EAAAA,EAAkBA,CAACI,QAAQ,EAAIN,IAAuBE,EAAAA,EAAkBA,CAACK,OAAO,CAC5R,MAAO,WAAChD,EAAAA,CAAKA,CAAAA,CAACoC,UAAU,MAAMzP,WAAW,SAASD,eAAe,SAASG,UAAW,EAAGwP,UAAW,GAAKY,SAAS,OAAO1R,sBAAoB,QAAQC,wBAAsB,WAAWC,0BAAwB,yBACxMgR,GAAsB,WAACzC,EAAAA,CAAKA,CAAAA,CAACoC,UAAU,MAAMzP,WAAW,SAASuQ,QAAS,YACvE,UAACC,IAAKA,CAACC,IAAK,GAAsBX,IAA5BU,EAA4BV,CAAnBY,GAAAA,CAASA,CAAC,WAA4B,OAAnBZ,EAAmB,QAAOa,IAAI,YAAYhT,MAAO,GAAIC,OAAQ,GAAIgT,MAAO,CAC5Gf,SAAU,QACVgB,UAAW,OACb,IAEI,UAACjD,EAAaA,CAACE,UAADF,MAAkB,CAClCtN,SAAU,QACZ,EAAG4E,IAAKT,QAAAA,EAAAA,QAAAA,EAAAA,EAASG,QAAAA,GAATH,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,EAAmBS,GAAAA,GAAnBT,KAAAA,IAAAA,EAAAA,EAA0B,GAAIgG,MAAOhG,QAAAA,EAAAA,QAAAA,EAAAA,EAASG,QAAAA,GAATH,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,EAAmBgG,KAAK,GAAxBhG,KAAAA,IAAAA,EAAAA,EAA4B,IAAKoJ,eAAgB,OAASiD,EAAwB,CAAChB,EAAmB,MAGlJC,GAAqB,WAAC1C,EAAAA,CAAKA,CAAAA,CAACoC,UAAU,MAAMzP,WAAW,SAASuQ,QAAS,YACtE,UAACC,IAAKA,CAACC,IAAK,GAAa,IAAnBD,EAAmB,CAAVE,GAAAA,CAASA,CAAC,mBAAkBC,IAAI,YAAYhT,MAAO,GAAIC,OAAQ,GAAIgT,MAAO,CAC3Ff,SAAU,QACVgB,UAAW,OACb,IACI,UAACjD,EAAaA,CAACE,UAADF,MAAkB,CAClCtN,SAAU,QACZ,EAAG4E,IAAKmK,EAAa5E,MAAOhG,QAAAA,EAAiB,QAAjBA,EAAAA,EAASG,QAAAA,GAATH,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,EAAmBgG,KAAAA,GAAnBhG,KAAAA,IAAAA,EAAAA,EAA4B,IAAKoJ,eAAe,4BAGlF,CACA,IAAMiD,GAA+D,CACnE,CAACd,EAAAA,EAAkBA,CAACE,OAAO,CAAC,CAAE,kBAC9B,CAACF,EAAAA,EAAkBA,CAACG,MAAM,CAAC,CAAE,SAC7B,CAACH,EAAAA,EAAkBA,CAACI,QAAQ,CAAC,CAAE,2BAC/B,CAACJ,EAAAA,EAAkBA,CAACK,OAAO,CAAC,CAAE,uBAC9B,CAACL,EAAAA,EAAkBA,CAACC,IAAI,CAAC,CAAE,gBAC3B,CAACD,EAAAA,EAAkBA,CAACe,SAAS,CAAC,CAAE,YAChC,CAACf,EAAAA,EAAkBA,CAACgB,IAAI,CAAC,CAAE,eAC3B,CAAChB,EAAAA,EAAkBA,CAACiB,UAAU,CAAC,CAAE,gBACjC,CAACjB,EAAAA,EAAkBA,CAACkB,OAAO,CAAC,CAAE,YAC9B,CAAClB,EAAAA,EAAkBA,CAACmB,OAAO,CAAC,CAAE,WAChC,ECnEe,SAASjB,SAINzL,EAHhB,IAAMA,EAAWzH,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACyB,EAAAA,EAAmBA,EAEjD,GAAI,CAACmG,OADYH,EAAAA,KAAAA,EAAAA,EAAUG,QAAAA,EAAVH,OACK,KACtB,IAAMe,EAAUf,OAAAA,EAAAA,KAAAA,EAAAA,OAAAA,GAAAA,EAAAA,IAAU7B,GAAV6B,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,EAAgBe,OAAO,GAAIf,EAASe,OAAO,QAC3D,EAaO,EAbH,CAaG,IAbO,CAaP,EAAC3F,EAAAA,CAAIA,CAAAA,CAACjB,sBAAoB,OAAOC,wBAAsB,UAAUC,0BAAwB,uBAC5F,UAACsB,EAAAA,CAAUA,CAAAA,CAACwJ,MAAM,SAAStJ,SAAS,SAASuP,SAAS,QAAQjR,sBAAoB,aAAaE,0BAAwB,uBACpH0G,MAdE,UAAC3F,EAAAA,CAAIA,CAAAA,CAACuR,aAAa,SAASC,aAAa,kBAC5C,UAAC1B,EAAAA,CAAQA,CAAAA,CAAC3G,QAAQ,UAAU4G,UAAU,OAAOjS,MAAO,OAAQkM,GAAI,CAChEY,MAAO,cACPoF,SAAU,MACVgB,UAAW,OACb,WACI,UAACzQ,EAAAA,CAAUA,CAAAA,CAACwJ,MAAM,SAAStJ,SAAS,kBAAS,mBAWvD,6BChBe,SAASgR,GAAe,CAE/B,KAF+B,MACrCC,CAAI,CACE,CAF+B,EAG/BtN,EAAQjH,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACmB,EAAAA,EAASA,EAC9B,UACJqT,CAAQ,CACT,CAAGxQ,CAAAA,EAAAA,EAAAA,CAAAA,CAAeA,CAAC7C,EAAAA,EAASA,EACvBsT,EAAYC,CAAAA,EAAAA,EAAAA,EAAAA,CAAgBA,CAACH,GAC7BI,OAAwBrS,IAAZiS,EAAKlK,EAAE,EAAkBkK,EAAKlK,EAAE,CAAG,QAAmB/H,IAAdiS,EAAKK,IAAI,EAAkBL,EAAKK,IAAI,CAAG,EAC3FC,EAAeN,EAAKrN,KAAK,CAAG,EAC5B4N,EAAWtC,CAAAA,EAAAA,EAAAA,EAAAA,CAAgBA,CAACvL,EAAM8B,GAAG,IACrCe,EAAO7C,EAAM6C,IAAI,GACjBiL,EAAsB,GACRC,EAAU,GAAM,EAAIlL,EAAgB,MAATA,EAAe,IAAM,IAGpE,MAAO,WAACmL,GAAAA,EAAQA,CAAAA,CAACC,cAAc,IAACtT,sBAAoB,WAAWC,wBAAsB,iBAAiBC,0BAAwB,+BAC1H,UAACsB,EAAAA,CAAUA,CAAAA,CAAC+R,YAAa,IAAKC,QAAS,GAAKhH,SAAU,GAAK/K,MAAM,IAACgS,SAAS,UAAU1U,MAAM,QAAQ2U,SAAS,QAAQC,UAAU,SAASjS,SAAS,SAASuJ,GAAI,CAC7JM,gBAAiBwH,EAAY,QAAU,QACvClH,MAAOkH,EAAY,QAAU,OAC/B,EAAG3H,aAAa,MAAM2D,OAAO,oBAAoBrE,WAAW,MAAM1K,sBAAoB,aAAaE,0BAAwB,8BACtH+S,EAAe,UAAClC,EAAAA,CAAQA,CAAAA,CAAC3G,QAAQ,UAAU4G,UAAU,OAAO/F,GAAI,CACjEY,MAAO,aACT,WAAG,gBAEegH,IAGlB,UAACrR,EAAAA,CAAUA,CAAAA,CAACC,MAAM,IAACC,SAAS,SAAS1B,sBAAoB,aAAaE,0BAAwB,8BAC3F+S,EAAe,UAAClC,EAAAA,CAAQA,CAAAA,CAAC3G,QAAQ,UAAU4G,UAAU,OAAOjS,MAAM,SAAY4T,EAAKnK,EAAE,CAACpC,GAAG,CAAC,CAACwN,EAAKC,KACjG,IAAMvN,EAAM4M,EAASU,GACfE,EAAYX,EAAoBU,GACtC,MAAO,UAAC7E,EAAaA,CAAS1I,IAAKA,EAAKuF,IAAnBmD,EAA0B8E,EAAW7E,eAAgB4E,EAAIlB,EAAKnK,EAAE,CAACzH,MAAM,CAAG,EAAI,IAAM,GAAIoO,SAAU,CACrH3E,QAAS,KACPoI,EAASD,EAAKnK,EAAE,CAACrC,KAAK,CAAC,EAAG0N,EAAI,GAChC,EACA5I,GAAI,CACF8I,OAAQ,UACRC,GAAQ,KAAJH,CAAU,CACdI,WAAY,2BACZ,UAAW,CACTC,QAAS,EACX,CACF,CACF,GAZ2BL,EAa7B,OAGN,CCrDe,SAASM,GAAYvJ,CAAgB,MAW9B/E,EAAAA,EAVpB,IAAMR,EAAQjH,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACmB,EAAAA,EAASA,EAC9B6U,EAAchW,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACqH,EAAAA,EAAiBA,EAC5CI,EAAWzH,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACyB,EAAAA,EAAmBA,EAC3CwU,EAA4BC,MAAMnH,IAAI,CAAC,CAC3CpM,OAAQqT,CACV,GAAGhO,GAAG,CAAC,CAACkC,EAAGuL,IAAO,EAChBrL,GAAI,CAAE,GAAI,OAAFqL,GAAI,CACZvO,MAAO,EACPE,QAASqO,EAAI,EACf,GACMU,EAAc1O,OAAAA,EAAAA,KAAAA,EAAAA,QAAAA,EAAAA,EAAU7B,IAAAA,GAAV6B,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,QAAAA,EAAAA,EAAgBa,KAAAA,GAAhBb,KAAAA,MAAAA,KAAAA,EAAAA,EAAuB9E,MAAAA,EAAS8E,EAAS7B,IAAI,CAAC0C,KAAK,CAAG2N,SAC1E,EAAUhN,WAAW,GAAW,CAAP,IAClB,UAACpG,EAAAA,CAAIA,CAAAA,CAACC,SAAS,IAACC,eAAe,SAASC,WAAW,SAAU,GAAGwJ,CAAK,CAAE5K,sBAAoB,OAAOC,wBAAsB,cAAcC,0BAAwB,qBACjK,UAACsU,GAAAA,CAAIA,CAAAA,CAACvJ,GAAI,CACVlM,MAAO,MACP+P,QAAS,CACX,EAAG9O,sBAAoB,OAAOE,0BAAwB,qBACjDqU,EAAYnO,GAAG,CAACuM,GAAQ,UAACD,GAAcA,CAAoBC,KAAMA,GAApBA,EAAND,OAAkB,MAGlE,CCnBe,SAAS+B,GAAY7J,CAAgB,EAClD,IAAMxH,EAAWhF,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACqE,EAAAA,EAAYA,EACpClC,EAAOnC,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACO,EAAAA,EAAQA,EAC5B0G,EAAQjH,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACmB,EAAAA,EAASA,EAC9BuG,EAAeT,EAAMvC,OAAO,GAC5BoD,EAAc3F,EAAKuC,OAAO,GAC1B4R,EAAa5O,EAAa/E,MAAM,CAAG,IAAMsE,CAAAA,CAAMgC,WAAW,IAAMhC,EAAMsP,MAAM,IAAM7O,EAAa/C,IAAI,KAAOmD,EAAYnD,IAAI,GAAC,CACjI,MAAO,WAAC9B,EAAAA,CAAIA,CAAAA,CAACC,SAAS,IAACK,KAAM,GAAIJ,eAAgB,CAC/CwN,GAAI,SACJiG,GAAIxR,EAAW,QAAU,QAC3B,EAAGhC,WAAW,SAASsQ,SAAU,CAC/BkD,GAAIxR,EAAW,cAAW1C,CAC5B,EAAGmU,IAAK,EAAGrB,QAAS,CAClBoB,GAAIxR,EAAW,OAAI1C,CACrB,EAAG6L,SAAU,CACXoC,GAAI,EACJiG,GAAI,iBACN,EAAI,GAAGhK,CAAK,CAAEK,GAAIL,EAAMkK,MAAM,CAAG,CAC/BC,QAAS,MACX,EAAInK,EAAMK,EAAE,CAAEjL,sBAAoB,OAAOC,wBAAsB,cAAcC,0BAAwB,sBACjG,WAACuO,EAAAA,CAAKA,CAAAA,CAACtN,eAAe,SAASC,WAAW,SAASC,OAAQ,EAAGqS,SAAUtQ,EAAW,wBAAqB1C,EAAWV,sBAAoB,QAAQE,0BAAwB,sBACpKkD,GAAY,UAACkL,EAAaA,CAACjC,MAAM,IAAPiC,OAAkBC,WAAY,GAAsC,OAAnCnL,EAAS4R,QAAQ,CAACxW,KAAK,CAACyW,OAAO,CAAC,GAAG,MAAKzG,WAAY,GAAsC,OAAnCpL,EAAS4R,QAAQ,CAACvW,KAAK,CAACwW,OAAO,CAAC,GAAG,QAErJ7R,OAAAA,EAAAA,KAAAA,EAAAA,EAAU8R,UAAV9R,EAAU8R,GAAgB,UAAC5G,EAAaA,CAACjC,MAAM,IAAPiC,UAAqBC,WAAYrP,KAAK4M,KAAK,CAAC1I,EAAS8R,YAAY,CAAC1W,KAAK,EAAGgQ,WAAYtP,KAAK4M,KAAK,CAAC1I,EAAS8R,YAAY,CAACzW,KAAK,IAErK,UAAC8R,GAAQA,CAACvQ,IAADuQ,kBAAqB,WAAWrQ,0BAAwB,cAEjE,UAACoR,GAAOA,CAACtR,GAADsR,mBAAqB,UAAUpR,0BAAwB,cAE9DwU,GAAc,UAAClT,EAAAA,CAAUA,CAAAA,CAACwJ,MAAM,SAAStJ,SAAS,SAASD,MAAM,aAAC,oBAKrE,UAAC0S,GAAWA,CAAC5S,KAAM,CACnBqT,CADYT,EACR/Q,OAAW1C,EAAY,EAC7B,EAAGV,sBAAoB,cAAcE,0BAAwB,gBAEjE,iBC5Be,SAASiV,GAAS,CAKzB,KALyB,KAC/B7O,CAAG,oBACH4K,CAAkB,SAClBkC,CAAO,WACPU,CAAS,CACH,CALyB,EAMzBvT,EAAOnC,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACO,EAAAA,EAAQA,EAC5B0G,EAAQjH,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACmB,EAAAA,EAASA,EAC9B,CACJ6V,UAAQ,CACT,CAAGhT,CAAAA,EAAAA,EAAAA,CAAAA,CAAeA,CAAC7C,EAAAA,EAASA,EACvBsG,EAAWzH,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACyB,EAAAA,EAAmBA,EAC3CgM,EAAQwJ,GAAanE,GACrBoE,EAAgBzP,SAAAA,KAAAA,EAAAA,EAAUU,GAAVV,WAAUU,IAAmB6M,QACnDzP,CAAAA,EAAAA,EAAAA,SAAAA,CAASA,CAAC,KACR,GAAI,CAAC2R,EAAe,OACpB,IAAMC,EAAWC,SAASC,cAAc,CAAC,QAAgB,OAARrC,IACjD,GAAI,CAACmC,EAAU,OACf,IAAMG,EAAYF,SAASC,cAAc,CAAC,eACrCC,GAAcC,CAAAA,EAAAA,GAAAA,EAAAA,CAAYA,CAAb,IAClBJ,EAASK,MADmC,QACrB,CAAC,CACtBC,SAAU,SACVC,MAAO,QACT,EACF,EAAG,CAACR,EAAelC,EAAQ,EAMpB,WAACnS,EAAAA,CAAIA,CAAAA,CAACC,SAAS,IAACC,eAAe,SAASC,WAAW,SAASyT,IAAK,EAAG9V,MAAM,OAAOgM,KAAK,SAASP,QALlF,CAK2FuL,KAJzGT,GAEJF,EAAShC,EADS7S,EAAKyV,KACLC,CAFC,IACc,GAAK,EAAI1V,EAAO8E,EAEnD,EAC4HmH,SAAU,GAAKvB,GAAIE,GAAU,EACvJ4I,GADuJ,IAC/IuB,OAAgB5U,EAAY,UACpC6K,gBAAiB+J,GAAwC,SAAvBnK,EAAMK,OAAO,CAACE,IAAI,CAAc,eAAYhL,EAC9EqO,OAAQuG,GAAwC,UAAvBnK,EAAMK,OAAO,CAACE,IAAI,CAAe,yBAAsBhL,EAChF0K,aAAc,EAChB,EAAI/L,GAAI,QAAgB,OAAR+T,GAAWpT,sBAAoB,OAAOC,wBAAsB,WAAWC,0BAAwB,yBAC1G2L,GAAS,UAAC+F,IAAKA,CAACC,IAAK,GAAsBX,IAA5BU,EAA4BV,CAAnBY,GAAAA,CAASA,CAAC,WAA4B,OAAnBZ,EAAmB,QAAOa,IAAI,YAAYhT,MAAO,GAAIC,OAAQ,GAAIgT,MAAO,CACpHf,SAAU,QACVgB,UAAW,OACb,IAEE,UAACjD,EAAaA,CAAC1I,IAAKA,EAAKuF,IAAXmD,EAAkB8E,EAAW5E,gBAAiB,CAC5DxN,SAAU,QACZ,EAAG1B,sBAAoB,gBAAgBE,0BAAwB,mBAEnE,CACA,IAAMmV,GAAgBnE,IACpB,KAAI,CAACA,GAAsBgF,GAA4BzG,QAAQ,CAACyB,EAAAA,EAGhE,CAHqF,MAG9EiF,EAAAA,EAAqB,CAACjF,EAAmB,EAE5CgF,GAAoD,CAAC9E,EAAAA,EAAkBA,CAACgB,IAAI,CAAEhB,EAAAA,EAAkBA,CAACe,SAAS,CAAEf,EAAAA,EAAkBA,CAACG,MAAM,CAAC,CC3D7H,SAAS6E,GAAU,CAG1B,KAH0B,CAChCC,OAAK,CACLC,QAAM,CACA,CAH0B,EAIhC,MAAO,WAACrV,EAAAA,CAAIA,CAAAA,CAACC,SAAS,IAACC,eAAe,eAAeC,WAAW,SAAS2J,KAAK,SAASxJ,KAAM,GAAIvB,sBAAoB,OAAOC,wBAAsB,YAAYC,0BAAwB,0BAClL,WAACsB,EAAAA,CAAUA,CAAAA,CAACzC,MAAM,OAAO2C,SAAS,SAAS1B,sBAAoB,aAAaE,0BAAwB,0BACjGoW,EAAO,OAGV,UAACnB,GAAQA,CAAE,GAAGkB,CAALlB,CAAW,EAAE,CAAE/B,QAAS,CAACkD,GAAS,EAAK,EAAI,EAAGxC,UAAU,IAAI9T,sBAAoB,WAAWE,0BAAwB,kBAE3HmW,CAAK,CAAC,EAAE,CAAG,UAAClB,GAAQA,CAAE,GAAGkB,CAALlB,CAAW,EAAE,CAAE/B,QAAS,CAACkD,GAAS,EAAK,EAAI,EAAGxC,UAAU,MAAS,UAAClE,EAAAA,CAAGA,CAAAA,CAAC7Q,MAAM,WAEvG,CCjBe,SAASwX,KACtB,IAAMhW,EAAOnC,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACO,EAAAA,EAAQA,EAC5B0G,EAAQjH,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACmB,EAAAA,EAASA,EAC9B6D,EAAWhF,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACqE,EAAAA,EAAYA,EACpC+T,EAAY3X,CAAAA,EAAAA,EAAAA,OAAAA,CAAOA,CAAC,KACxB,IAAMqH,EAAc3F,EAAKuC,OAAO,GAC1BgD,EAAeT,EAAMvC,OAAO,GAC5BA,EAAUoD,EAAYnF,MAAM,CAAGmF,EAAcJ,EACnD,GAAI,CAAChD,EAAQ/B,MAAM,CAAE,OAAOL,IACtB2V,EAGE,EAAE,CACV,IAAK,IAAIxC,EAAI,EAAGA,EAAI/Q,EAAQ/B,MAAM,CAAE8S,GAAK,EAAG,KAGCzQ,EAKEA,EAP7C,IAAMqT,EAAQ,CAAC,CACbnQ,IAAKxD,CAAO,CAAC+Q,EAAE,CACf3C,mBAAoBhL,EAAYnF,MAAM,OAAGqC,EAAAA,KAAAA,EAAAA,QAAAA,EAAAA,EAAUqD,SAAS,CAACoN,EAAI,KAAxBzQ,KAAAA,MAAAA,KAAAA,EAAAA,EAA4B8N,kBAAkB,MAAGxQ,CAC5F,EAAE,CACEoC,CAAO,CAAC+Q,EAAI,EAAE,EAAE,EACZ6C,IAAI,CAAC,CACTpQ,IAAKxD,CAAO,CAAC+Q,EAAI,EAAE,CACnB3C,mBAAoBhL,EAAYnF,MAAM,CAAGqC,QAAAA,KAAAA,EAAAA,MAAAA,EAAAA,EAAAA,EAAUqD,SAAS,CAACoN,EAAI,KAAxBzQ,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,EAA4B8N,kBAAkB,CAAGxQ,MAC5F,GAEF2V,EAAMK,IAAI,CAACD,EACb,CACA,OAAOJ,CACT,EAAG,CAAC9V,EAAM8E,EAAOjC,EAAS,QAC1B,IAAI,GAACoT,EAAAA,KAAAA,EAAAA,EAAWzV,MAAAA,EACT,CADiB,EAAnByV,EACE,KAACvV,EAAAA,CAAIA,CAAAA,CAACC,SAAS,IAACC,eAAe,SAASC,WAAW,QAAQyT,IAAK,GAAKrI,SAAU,EAAGvB,GAAI,CAC3F0L,eAAgB,OAChBC,UAAW,MACb,EAAG3E,UAAU,OAAO1Q,KAAM,EAAGlC,GAAG,cAAcW,sBAAoB,OAAOC,wBAAsB,aAAaC,0BAAwB,2BAC/HsW,EAAAA,KAAAA,EAAAA,EAAWpQ,GAAG,CAAC,CAACiQ,EAAO9N,IAAQ,UAAC6N,GAASA,CAEhBC,KAFgBD,CAETC,EAAOC,OAAQ/N,EAAM,GAFN,GAE7BA,MAAAA,CAFgC8N,EAAMjQ,GAAG,CAAC,OAAC,KAC9DE,CAAG,CACJ,UAAKA,IAAKvD,IAAI,GAAG,KAAO,OAAJwF,OAPQ,IASjC,CC9Be,SAASsO,GAAkB,CAElC,KAFkC,gBACxCC,CAAc,CACR,CAFkC,EAGlC1T,EAAWhF,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACqE,EAAAA,EAAYA,EACpC4C,EAAQjH,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACmB,EAAAA,EAASA,EAC9BgB,EAAOnC,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACO,EAAAA,EAAQA,EAC5B,UACJyW,CAAQ,CACT,CAAGhT,CAAAA,EAAAA,EAAAA,CAAAA,CAAeA,CAAC7C,EAAAA,EAASA,EACvBwX,EAAUlY,CAAAA,EAAAA,EAAAA,OAAAA,CAAOA,CAAC,IACtB,EACOuE,EADH,MAAW,GACU,CAAC4T,MAAM,CAAC,CAACnR,EAAU0C,IAAQA,EAAM,GAAM,GAAK1C,EAASqL,kBAAkB,GAAK4F,GAAgB/V,MAAM,CADrG,EAErB,CAACqC,EAAU0T,EAAe,EACvBG,EAAUpY,CAAAA,EAAAA,EAAAA,OAAAA,CAAOA,CAAC,IACjBuE,EACEA,EAASqD,MADD,GACU,CAACuQ,MAAM,CAAC,CAACnR,EAAU0C,IAAQA,EAAM,GAAM,GAAK1C,EAASqL,kBAAkB,GAAK4F,GAAgB/V,MAAM,CADrG,EAErB,CAACqC,EAAU0T,EAAe,EACvBf,EAAelK,IACnB,GAAI,CAACzI,GAAYyI,IAAUnM,EAAAA,EAAKA,CAACC,KAAK,EAAI,CAACoX,GAAWlL,IAAUnM,EAAAA,EAAKA,CAACE,KAAK,EAAI,CAACqX,EAC9E,OADuF,IAGnFC,EAAc,GAAiB3O,EAAM,GAAM,GAAKsD,IAAUnM,EAAAA,EAAKA,CAACC,KAAK,EAAI4I,EAAM,GAAM,GAAKsD,IAAUnM,EAAAA,EAAKA,CAACE,KAAK,CAC/GwT,EAAU/N,EAAMvC,OAAO,GAAG/B,MAAM,CAChCoW,EAAkB/T,EAASqD,SAAS,CAAC2Q,SAAS,CAAC,CAACvR,EAAU0C,IAAQ2O,EAAY3O,IAAQ1C,EAASqL,kBAAkB,GAAK4F,GAAkBvO,EAAM6K,GACpJ,GAAI+D,EAAkB,EACpB/B,CADuB,CACd+B,EAAiB5W,OACrB,CACL,IAAM8W,EAAmBjU,EAASqD,SAAS,CAAC2Q,SAAS,CAAC,CAACvR,EAAU0C,IAAQ2O,EAAY3O,IAAQ1C,EAASqL,kBAAkB,GAAK4F,GACzHO,EAAmB,GAAKA,IAAqBjE,GAC/CgC,EAASiC,EAAkB9W,EAD6B,CAI9D,EACA,MAAO,WAACU,EAAAA,CAAIA,CAAAA,CAACC,SAAS,IAACC,eAAe,eAAeC,WAAW,SAAS2J,KAAK,SAASc,MAAOsK,EAAAA,EAAqB,CAACW,EAAe,CAAEvV,KAAM,GAAIvB,sBAAoB,OAAOC,wBAAsB,oBAAoBC,0BAAwB,kCACxO,UAACe,EAAAA,CAAIA,CAAAA,CAACC,SAAS,IAACC,eAAe,SAASC,WAAW,SAASrC,MAAO,OAAQiT,MAAO,CAClF+B,OAAQgD,EAAU,UAAY,SAChC,EAAGvM,QAAS,IAAMuL,EAAYrW,EAAAA,EAAKA,CAACC,KAAK,EAAG+B,SAAS,SAAS1B,sBAAoB,OAAOE,0BAAwB,iCAC5G6W,IAGH,WAAC9V,EAAAA,CAAIA,CAAAA,CAACC,SAAS,IAACC,eAAe,QAAQC,WAAW,SAASrC,MAAO,OAAQ8V,IAAK,EAAG9J,KAAK,SAAS/K,sBAAoB,OAAOE,0BAAwB,kCACjJ,UAAC0R,IAAKA,CAACC,IAAK,GAAsBiF,IAA5BlF,EAA4BkF,CAAnBhF,GAAAA,CAASA,CAAC,WAAwB,OAAfgF,EAAe,QAAO/E,IAAI,YAAYhT,MAAO,GAAIC,OAAQ,GAAIgT,MAAO,CACtGf,SAAU,QACVgB,UAAW,OACb,EAAGjS,sBAAoB,QAAQE,0BAAwB,0BAErD,UAACsB,EAAAA,CAAUA,CAAAA,CAACwJ,MAAM,SAAStJ,SAAS,SAAS1B,sBAAoB,aAAaE,0BAAwB,iCACnGoX,CAAAA,EAAAA,GAAAA,EAAAA,CAAUA,CAACR,QAIhB,UAAC7V,EAAAA,CAAIA,CAAAA,CAACC,SAAS,IAACC,eAAe,SAASC,WAAW,SAASrC,MAAO,OAAQiT,MAAO,CAClF+B,OAAQkD,EAAU,UAAY,SAChC,EAAGzM,QAAS,IAAMuL,EAAYrW,EAAAA,EAAKA,CAACE,KAAK,EAAG8B,SAAS,SAAS1B,sBAAoB,OAAOE,0BAAwB,iCAC5G+W,MAGT,CChEe,SAASM,KACtB,GAAM,OACJ/Y,CAAK,OACLC,CAAK,CACN,CAAGC,CAAAA,EAAAA,EAAAA,CAAAA,CAAcA,CAACC,EAAAA,EAAQA,EACrByE,EAAWhF,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACqE,EAAAA,EAAYA,QAC1C,IAAI,GAACW,EAAAA,KAAAA,EAAAA,EAAUqD,SAAS,CAAnBrD,MAAoBrC,EAClB,CAD0B,EAC1B,QAACE,EAAAA,CAAIA,CAAAA,CAACC,SAAS,IAACC,eAAe,SAASC,WAAW,SAASC,OAAQ,GAAK4J,GAAI,CAClF0L,eAAgB,OAChBC,UAAW,MACb,EAAG5X,OAAO,OAAOiT,UAAU,QAAQ1Q,KAAM,EAAGvB,sBAAoB,OAAOC,wBAAsB,4BAA4BC,0BAAwB,sBAC7I,WAACe,EAAAA,CAAIA,CAAAA,CAACC,SAAS,IAACE,WAAW,SAASD,eAAe,eAAe4J,KAAK,SAASxJ,KAAM,GAAIvB,sBAAoB,OAAOE,0BAAwB,sBAC3I,UAACsB,EAAAA,CAAUA,CAAAA,CAACzC,MAAM,QAAQiM,MAAM,SAASvJ,MAAM,IAACC,SAAS,SAAS1B,sBAAoB,aAAaE,0BAAwB,qBACxH1B,EAAMuF,IAAI,GAGb,UAACvC,EAAAA,CAAUA,CAAAA,CAACzC,MAAM,OAAOiB,sBAAoB,aAAaE,0BAAwB,cAElF,UAACsB,EAAAA,CAAUA,CAAAA,CAACzC,MAAM,QAAQiM,MAAM,SAASvJ,MAAM,IAACC,SAAS,SAAS1B,sBAAoB,aAAaE,0BAAwB,qBACxHzB,EAAMsF,IAAI,MAIdyT,GAAyBpR,GAAG,CAAC0Q,GAAkB,UAACD,GAAiBA,CAAsBC,aAAtBD,EAAsCC,GAAhCA,OAjBpC,IAmB1C,CACO,IAAMU,GAA2B,CAACpG,EAAAA,EAAkBA,CAACI,QAAQ,CAAEJ,EAAAA,EAAkBA,CAACK,OAAO,CAAEL,EAAAA,EAAkBA,CAACC,IAAI,CAAED,EAAAA,EAAkBA,CAACe,SAAS,CAAEf,EAAAA,EAAkBA,CAACgB,IAAI,CAAEhB,EAAAA,EAAkBA,CAACE,OAAO,CAAEF,EAAAA,EAAkBA,CAACiB,UAAU,CAAEjB,EAAAA,EAAkBA,CAACkB,OAAO,CAAElB,EAAAA,EAAkBA,CAACmB,OAAO,CAAC,CAAC,SC7B7QkF,GAAkB7M,CAAgB,EACxD,MAAO,WAAC3J,EAAAA,CAAIA,CAAAA,CAACC,SAAS,IAACC,eAAe,SAASC,WAAW,QAAQG,KAAM,GAAImW,SAAU,EAAI,GAAG9M,CAAK,CAAEK,GAAIL,EAAMkK,MAAM,CAAG,CACrHC,QAAS,MACX,EAAI,CACFtB,SAAU,SACV,GAAG7I,EAAMK,EAAE,EACVjL,sBAAoB,OAAOC,wBAAsB,oBAAoBC,0BAAwB,sBAC5F,UAACqW,GAAUA,CAACvW,MAADuW,gBAAqB,aAAarW,0BAAwB,cAErE,UAACqX,GAAyBA,CAACvX,qBAADuX,CAAqB,4BAA4BrX,0BAAwB,gBAEzG,qOCXe,SAASyX,KACtB,GAAM,CAACC,EAAcC,EAAgB,CAAGC,CAAAA,EAAAA,GAAAA,CAAAA,CAAmBA,CAAC,uBAAwBvZ,EAAAA,EAAqBA,EACnG,CAACwZ,EAAoBC,EAAsB,CAAGF,CAAAA,EAAAA,GAAAA,CAAAA,CAAmBA,CAAC,wBAAyBhY,EAAAA,EAAsBA,EACvH,MAAO,WAACmB,EAAAA,CAAIA,CAAAA,CAACC,SAAS,IAACC,eAAe,eAAeC,WAAW,SAASG,KAAM,GAAIsT,IAAK,EAAG7U,sBAAoB,OAAOC,wBAAsB,eAAeC,0BAAwB,6BAC/K,UAAC+X,GAAAA,CAAgBA,CAAAA,CAACC,QAAS,UAACC,GAAAA,CAAQA,CAAAA,CAACC,QAASR,EAAcS,SAAU,CAAC/P,EAAG8P,IAAYP,EAAgBO,KAAc1T,MAAM,8BAA8BuG,GAAI,CAC5JqN,QAAS,CACX,EAAGtY,sBAAoB,mBAAmBE,0BAAwB,qBAChE,UAAC+X,GAAAA,CAAgBA,CAAAA,CAACC,QAAS,UAACC,GAAAA,CAAQA,CAAAA,CAACC,QAASL,EAAoBM,SAAU,CAAC/P,EAAG8P,IAAYJ,EAAsBI,KAAc1T,MAAM,wBAAwBuG,GAAI,CAClKqN,QAAS,CACX,EAAGtY,sBAAoB,mBAAmBE,0BAAwB,uBAEtE,mDCKe,SAASqY,GAAqB,CAGrC,KAHqC,MAC3CC,CAAI,CACJC,SAAO,CACD,CAHqC,EAIrC,CAACnT,EAAOoT,EAAS,CAAGZ,CAAAA,EAAAA,GAAAA,CAAAA,CAAmBA,CAAC,eAAgBvS,EAAAA,EAAeA,EACvE,CAACC,EAASmT,EAAW,CAAGb,CAAAA,EAAAA,GAAAA,CAAAA,CAAmBA,CAAC,kBAAmBrS,EAAAA,EAAiBA,EAChF,CAACqD,EAAY8P,EAAc,CAAGd,CAAAA,EAAAA,GAAAA,CAAAA,CAAmBA,CAAC,cAAe/O,EAAAA,EAAcA,EAC/E,CAAC8P,EAAUC,EAAY,CAAG1T,CAAAA,EAAAA,EAAAA,EAAAA,CAAOA,CAAC2T,GAAAA,CAAYA,EAC9C,CAACC,EAAUC,EAAY,CAAG7T,CAAAA,EAAAA,EAAAA,EAAAA,CAAOA,CAAC8T,GAAAA,CAAYA,EAC9C,CAACjQ,EAAiBkQ,EAAmB,CAAG/T,CAAAA,EAAAA,EAAAA,EAAAA,CAAOA,CAAC8D,EAAAA,EAAmBA,EAEnEkG,EAAoC,SAD5BC,CAAAA,EAAAA,EAAAA,CAAAA,CAAQA,GACG7D,OAAO,CAACE,IAAI,CAUrC,MATA/H,CAAAA,EAAAA,EAAAA,SAAAA,CAASA,CAAC,KACHyV,CAAAA,EAAAA,GAAAA,EAAAA,CAAiBA,CAACtQ,KACjBuQ,GAAAA,CAAaA,CAACC,GADgB,QACL,GAC3BV,CAD+B,CACjBW,EAAAA,EAAUA,CAACC,iBAAiB,EAE1CZ,EAAcW,EAAAA,EAAUA,CAACE,WAAW,EAG1C,EAAG,CAACb,EAAe9P,EAAW,EACvB,WAAC4Q,GAAAA,CAAMA,CAAAA,CAAClB,KAAMA,EAAMC,QAASA,EAASxH,SAAS,KAAK0I,SAAS,IAAC3Z,sBAAoB,SAASC,wBAAsB,uBAAuBC,0BAAwB,qCACnK,UAAC0Z,GAAAA,CAAWA,CAAAA,CAACxP,QAAQ,KAAKa,GAAI,CAC9B4O,cAAe,CACjB,EAAG7Z,sBAAoB,cAAcE,0BAAwB,oCAA2B,aAGtF,UAAC4Z,GAAAA,CAAaA,CAAAA,CAAC7O,GAAI,CACnB4O,cAAe,CACjB,EAAG7Z,sBAAoB,gBAAgBE,0BAAwB,oCAC3D,WAACe,EAAAA,CAAIA,CAAAA,CAACC,SAAS,IAACC,eAAe,SAASC,WAAW,SAAS2Y,WAAY,EAAGpI,QAAS,EAAGpQ,KAAM,GAAIvB,sBAAoB,OAAOE,0BAAwB,qCAClJ,UAACe,EAAAA,CAAIA,CAAAA,CAACC,SAAS,IAACC,eAAe,SAASI,KAAM,CAC9CoN,GAAI,GACJqL,GAAI,EACJpL,GAAI,CACN,EAAG5O,sBAAoB,OAAOE,0BAAwB,oCAClD,WAACsB,EAAAA,CAAUA,CAAAA,CAAC4I,QAAQ,QAAQpK,sBAAoB,aAAaE,0BAAwB,qCAClF+Z,EAAAA,CAAa,CAACC,EAAAA,EAAcA,CAAC,CAACC,KAAK,CAAC,yHAET,IAC3BF,EAAAA,CAAa,CAACG,EAAAA,EAAgBA,CAAC,CAACD,KAAK,CAAC,mFACiB,IACvDF,EAAAA,CAAa,CAACG,EAAAA,EAAgBA,CAAC,CAACC,MAAM,CAAC,8CAK5C,UAACpZ,EAAAA,CAAIA,CAAAA,CAACC,SAAS,IAACC,eAAe,SAASI,KAAM,CAC9CoN,GAAI,GACJqL,GAAI,EACJpL,GAAI,CACN,EAAG5O,sBAAoB,OAAOE,0BAAwB,oCAClD,WAACoa,GAAAA,CAAWA,CAAAA,CAAClQ,QAAQ,WAAWpK,sBAAoB,cAAcE,0BAAwB,qCACxF,UAACqa,GAAAA,CAAUA,CAAAA,CAAClb,GAAG,sBAAsBW,sBAAoB,aAAaE,0BAAwB,oCAA2B,WACzH,UAACsa,GAAAA,CAAMA,CAAAA,CAACC,QAAQ,sBAAsBpb,GAAG,gBAAgBqb,YAAY,IAACC,MAAO,UAACC,GAAAA,CAAaA,CAAAA,CAAClW,MAAM,WAAamG,MAAO/B,EAAYuP,SAAUnM,GAAK0M,EAAc1M,EAAE2O,MAAM,CAAChQ,KAAK,EAAiBI,GAAI,CAClMlM,MAAO,IACPkS,SAAU,MACZ,EAAGjR,sBAAoB,SAASE,0BAAwB,oCACnD4a,OAAOC,MAAM,CAACxB,EAAAA,EAAUA,EAAEnT,GAAG,CAACnB,GAAU,UAAC+V,GAAAA,CAAQA,CAAAA,CAAcnQ,MAAO5F,EAAQwF,SAAU,CAAC2O,CAAAA,EAAAA,GAAAA,EAAAA,CAAiBA,CAACnU,YACvGgV,EAAAA,CAAa,CAAChV,EAAO,CAACgW,IAAI,EADyBhW,WAO9D,UAACiW,GAAAA,CAAMA,CAAAA,CAACxW,MAAM,gBAAgBmG,MAAOvF,EAAO6V,SAAUzC,EAAUvZ,IAAK,GAAIic,IAAK,GAAIC,YAAa,EAAGrb,sBAAoB,SAASE,0BAAwB,6BAEvJ,UAACgb,GAAAA,CAAMA,CAAAA,CAACxW,MAAM,kBAAkBmG,MAAOrF,EAAS2V,SAAUxC,EAAYxZ,IAAK,EAAGic,IAAK,EAAGC,YAAa,EAAG9Z,KAAM,EAAGvB,sBAAoB,SAASE,0BAAwB,6BAEpK,UAACyX,GAAYA,CAAC3X,QAAD2X,cAAqB,eAAezX,0BAAwB,6BAEzE,UAACe,EAAAA,CAAIA,CAAAA,CAACC,SAAS,IAACC,eAAe,SAASI,KAAM,CAC9CoN,GAAI,GACJqL,GAAI,EACJpL,GAAI,CACN,EAAG5O,sBAAoB,OAAOE,0BAAwB,oCAClD,UAACgb,GAAAA,CAAMA,CAAAA,CAACxW,MAAM,YAAYmG,MAAOgO,EAAUsC,SAAUrC,EAAa3Z,IAAK,EAAGic,IAAK,IAAKpb,sBAAoB,SAASE,0BAAwB,+BAG3I,UAACe,EAAAA,CAAIA,CAAAA,CAACC,SAAS,IAACC,eAAe,SAASC,WAAW,SAASG,KAAM,CAClEoN,GAAI,GACJqL,GAAI,EACJpL,GAAI,CACN,EAAG5O,sBAAoB,OAAOE,0BAAwB,oCAClD,WAACoa,GAAAA,CAAWA,CAAAA,CAAClQ,QAAQ,WAAWpK,sBAAoB,cAAcE,0BAAwB,qCACxF,UAACqa,GAAAA,CAAUA,CAAAA,CAAClb,GAAG,sBAAsBW,sBAAoB,aAAaE,0BAAwB,oCAA2B,cACzH,UAACsa,GAAAA,CAAMA,CAAAA,CAACC,QAAQ,sBAAsBpb,GAAG,gBAAgBqb,YAAY,IAACC,MAAO,UAACC,GAAAA,CAAaA,CAAAA,CAAClW,MAAM,cAAgBmG,MAAOmO,EAAUX,SAAUnM,GAAK+M,EAAY/M,EAAE2O,MAAM,CAAChQ,KAAK,EAAkCI,GAAI,CAClNlM,MAAO,IACPkS,SAAU,MACZ,EAAGjR,sBAAoB,SAASE,0BAAwB,oCACnDob,EAAAA,EAAUA,CAAClV,GAAG,CAACrC,GAAQ,UAACiX,GAAAA,CAAQA,CAAAA,CAAYnQ,MAAO9G,WAChD,WAAC6L,EAAAA,CAAGA,CAAAA,CAAC3E,GAAI,CACX8J,QAAS,OACT3T,WAAY,SACZyT,IAAK,CACP,YACM,UAACjD,IAAKA,CAAC2J,QAAQ,GAAT3J,IAAgBC,IAAK,GAAsB9N,MAAAA,CAAnB+N,GAAAA,CAASA,CAAC,WAAiB1C,MAAAA,CAARrL,EAAK,KAA0B,OAAvBqL,EAAa,IAAM,IAAI,SAAQ2C,IAAK,GAAQ,OAALhO,EAAK,WAAUhF,MAAO,GAAIC,OAAQ,KACjI+E,MAPgCA,WAc7C,UAAC9C,EAAAA,CAAIA,CAAAA,CAACC,SAAS,IAACC,eAAe,SAASC,WAAW,SAASG,KAAM,CAClEoN,GAAI,GACJC,GAAI,EACN,EAAG5O,sBAAoB,OAAOE,0BAAwB,oCAClD,UAACgb,GAAAA,CAAMA,CAAAA,CAACxW,MAAM,oBAAoBmG,MAAO5B,EAAiBkS,SAAUhC,EAAoBha,IAAK,EAAGic,IAAK,GAAIC,YAAa,EAAGG,YAAa,iCAAE,yKAGnF,IAC9CC,CAAAA,EAAAA,GAAAA,EAAAA,CAAuBA,GAAG,sKAIxBzb,sBAAoB,SAASE,0BAAwB,oCAIpE,UAACwb,GAAAA,CAAaA,CAAAA,CAACzQ,GAAI,CACnB5E,EAAG,CACL,EAAGrG,sBAAoB,gBAAgBE,0BAAwB,oCAC3D,UAACyb,GAAAA,CAAMA,CAAAA,CAACvR,QAAQ,YAAYI,QAASiO,EAASzY,sBAAoB,SAASE,0BAAwB,oCAA2B,cAKtI,CC/Ie,SAAS0b,KACtB,GAAM,CAACC,EAAYC,EAAc,CAAGC,CAAAA,EAAAA,EAAAA,QAAAA,CAAQA,EAAC,GAC7C,MAAO,iCACH,UAACC,GAAAA,CAAGA,CAAAA,CAAC3P,MAAM,kBAAkBR,MAAM,YAAYtK,KAAK,QAAQ0J,GAAI,CAChEgR,IAAK,OACLC,MAAO,GACPC,OAAQ,GACRC,KAAM,OACNvW,SAAU,OACZ,EAAG2E,QAAS,IAAMsR,GAAc,GAAO9b,sBAAoB,MAAME,0BAAwB,oCACrF,UAACoK,EAAAA,EAAIA,CAAAA,CAACC,KAAK,eAAevL,OAAQ,GAAIgB,sBAAoB,OAAOE,0BAAwB,+BAG3F,UAACqY,GAAoBA,CAACC,KAAMqD,EAAYpD,QAAS,CAA5BF,GAAkCuD,GAAc,GAAQ9b,sBAAoB,uBAAuBE,0BAAwB,+BAEtJ,wFChBe,SAASmc,GAAc,CAGP,KAHO,QACpCC,CAAM,SACNC,CAAO,CACsB,CAHO,EAIpC,GAAI,CAACD,GAAU,EAACC,QAAAA,KAAAA,EAAAA,EAASxb,GAATwb,GAAe,EAAE,OAAO,KACxC,IAAMpY,EAAOoY,CAAO,CAAC,EAAE,CAACA,OAAO,CAC/B,MAAO,UAACC,MAAAA,CAAIxK,MAAO,CACjBzG,gBAAiB,UACjBuD,QAAS,EACTjD,MAAO,QACPqI,QAAS,GACTnF,OAAQ,kBACR3D,aAAc,CAChB,EAAGnL,wBAAsB,gBAAgBC,0BAAwB,uBAC5D4S,CAAAA,EAAAA,EAAAA,EAAAA,CAAgBA,CAAC3O,IAExB,CChBe,SAASsY,GAAU,CAOjC,KAPiC,IAChCC,CAAE,IACFC,CAAE,GACFC,CAAC,SACDL,CAAO,CAGR,CAPiC,EAQ1BzI,EAAYyI,OAAAA,EAAAA,KAAAA,EAAAA,EAASrL,SAATqL,SAASrL,EAAqBiF,EAAAA,EAAqB,CAACoG,EAAQrL,kBAAkB,CAAC,CAAG,OACpG,MAAO,UAAC2L,SAAAA,CAAOH,GAAIA,EAAIC,GAAIA,EAAIC,EAAGA,EAAGE,OAAQhJ,EAAWiJ,YAAa,EAAGC,KAAMlJ,EAAWmJ,YAAa,EAAGjd,sBAAoB,SAASC,wBAAsB,YAAYC,0BAAwB,WAClM,CCCe,SAASgd,GAAStS,CAAgB,MAkBxB1F,EAjBvB,IAAM9B,EAAWhF,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACqE,EAAAA,EAAYA,EACpCyC,EAAkB9G,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACyB,EAAAA,EAAmBA,EAClD,CACJuV,UAAQ,CACT,CAAGhT,CAAAA,EAAAA,EAAAA,CAAAA,CAAeA,CAAC7C,EAAAA,EAASA,EACvBgB,EAAOnC,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACO,EAAAA,EAAQA,EAC5Bwe,EAA6Bte,CAAAA,EAAAA,EAAAA,OAAAA,CAAOA,CAAC,SAAMuE,SAAAA,OAAAA,SAAAA,EAAAA,KAAAA,EAAAA,EAAUqD,SAAS,CAAnBrD,GAAuB,CAACga,GAAAA,GAAxBha,KAAAA,IAAAA,EAAAA,EAAkD,EAAE,EAAE,CAACA,EAAS,EAC3Gia,EAAiBxe,CAAAA,EAAAA,EAAAA,OAAAA,CAAOA,CAAC,KAC7B,IAAMye,EAAYH,EAAUnG,MAAM,CAACuG,GAAQA,EAAKrM,kBAAkB,GAAKE,EAAAA,EAAkBA,CAACC,IAAI,EACxFmM,EAAQte,KAAKue,IAAI,CAAoB,IAAnBH,EAAUvc,MAAM,EAClC2c,EAAUJ,EAAUlX,GAAG,CAACmX,GAAQA,EAAKjH,MAAM,EACjD,IAAK,IAAIzC,EAAI6J,EAAQ3c,MAAM,CAAG,EAAG8S,EAAI,EAAGA,IAAK,CAC3C,IAAM8J,EAAIze,KAAK0e,KAAK,CAAC1e,KAAK2e,MAAM,IAAMhK,CAAAA,EAAI,EAC1C,EAAC6J,CAAO,CAAC7J,EAAE,CAAE6J,CAAO,CAACC,EAAE,CAAC,CAAG,CAACD,CAAO,CAACC,EAAE,CAAED,CAAO,CAAC7J,EAAE,CAAC,CAErD,OAAO,IAAIiK,IAAIJ,EAAQvX,KAAK,CAAC,EAAGqX,GAClC,EAAG,CAACL,EAAU,EACRY,EAAiB7Y,CAAAA,QAAAA,EAAAA,EAAgBlB,IAAAA,GAAhBkB,KAAAA,MAAAA,KAAAA,EAAAA,EAAsBgM,kBAAAA,EAAqBiF,EAAAA,EAAqB,CAACjR,EAAgBlB,IAAI,CAACkN,kBAAkB,CAAC,CAAG,OAG7H8M,EAAY/a,CAAAA,EAAAA,EAAAA,WAAAA,CAAWA,CAAC,IAG5B,IAAMsZ,EAAU3R,EAAM2R,OAAO,CACvB0B,QAAY1B,EAAAA,KAAAA,EAAAA,EAASrL,SAATqL,SAA2B,QACxC0B,IACD,CAAC7M,EAAAA,EAAkBA,CAACI,CADR,OACgB,CAAEJ,EAAAA,EAAkBA,CAACK,OAAO,CADrC,EACuCL,EAAkBA,CAACmB,OAAO,CAAEnB,EAAAA,EAAkBA,CAACkB,EADrF4L,KAC4F,CAAC,CAACzO,IADrF7E,IAC6F,CAACqT,CADxF9R,GACsG8R,IAAc7M,EAAAA,EAAkBA,CAACC,IAAI,EAAIgM,EAAec,GAAG,CAAC5B,EAAQjG,OAAM,EAC9M,CADiN,EACjN,iBAACmG,GAASA,CAAE,GAAG7R,CAAK,CAAV6R,IAAiB7R,EAAMuB,GAAG,CAAEoQ,QAASA,IAEjD,UAAC2B,MAAAA,CAAAA,EAAStT,EAAMuB,GAAG,CAC5B,EAAG,CAACkR,EAAe,SACnB,EACO,EADH,CACG,KADQ,EACPpc,EAAAA,CAAIA,CAAAA,CAACC,SAAS,IAACC,eAAe,SAASC,WAAW,SAASgd,UAAU,kBAAkBpf,OAAQ,CACrG2P,GAAI,OACJiG,GAAI,MACN,EAAG3C,UAAU,QAAS,GAAGrH,CAAK,CAAEK,GAAIL,EAAMkK,MAAM,CAAG,CACjDC,QAAS,MACX,EAAInK,EAAMK,EAAE,CAAE1J,KAAM,GAAIvB,sBAAoB,OAAOC,wBAAsB,WAAWC,0BAAwB,qBACxG,UAAC0P,EAAAA,CAAGA,CAAAA,CAAC5Q,OAAO,OAAOD,MAAO,CAC1B4P,GAAI,OACJiG,GAAI,KACN,EAAG3J,GAAI,CACLM,gBAAiB,UACjBH,aAAc,OACdqI,SAAU,QACZ,EAAGzT,sBAAoB,MAAME,0BAAwB,qBACjD,UAACme,GAAAA,CAAmBA,CAAAA,CAACtf,MAAM,OAAOC,OAAO,OAAOgB,sBAAoB,sBAAsBE,0BAAwB,qBAChH,WAACoe,GAAAA,CAASA,CAAAA,CAACvf,MAAO,IAAKC,OAAQ,IAAKmF,KAAMgZ,EAAWoB,OAAQ,CAC7DtC,IAAK,EACLG,KAAM,EACNF,MAAO,EACPC,OAAQ,CACV,EAAG3R,QAAS0B,QACMA,EAAAA,EAAhB,IAAMqQ,QAAUrQ,EAAAA,KAAAA,EAAAA,KAAAA,GAAAA,EAAAA,EAAGsS,aAAAA,GAAHtS,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,QAAAA,EAAAA,CAAkB,CAAC,KAAnBA,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,EAAuBqQ,OAAO,CACzCA,GACLnH,EAASmH,EAAQjG,EADH,IACS,CAAE/V,EAC3B,EAAGyR,MAAO,CACR+B,OAAQ,SACV,EAAG/T,sBAAoB,YAAYE,0BAAwB,sBACvD,UAACue,GAAAA,CAAKA,CAAAA,CAACC,QAAQ,SAASC,IAAI,IAAC7B,OAAO,MAAM9c,sBAAoB,QAAQE,0BAAwB,cAC9F,UAAC0e,GAAAA,CAAKA,CAAAA,CAACC,OAAQ,CAAC,EAAG,GAAG,CAAEF,IAAI,IAAC3e,sBAAoB,QAAQE,0BAAwB,cACjF,UAACkM,GAAAA,CAAOA,CAAAA,CAAC0S,QAAS,UAACzC,GAAaA,CAAAA,GAAK0C,MAAL1C,aAAwB,EAAOtI,OAAQ,CACvE+I,OAAQ,OACRC,YAAa,EACbiC,cAAe,EACjB,EAAGhf,sBAAoB,UAAUE,0BAAwB,cACvD,UAAC+e,GAAAA,CAAIA,CAAAA,CAACC,KAAK,WAAWR,QAAQ,QAAQ5B,OAAO,OAAOE,KAAK,UAAUC,YAAa,EAAGkC,IAAKnB,EAAWoB,UAAW,UAAC3C,GAASA,CAAAA,GAAKsC,EAALtC,iBAAwB,EAAOzc,sBAAoB,OAAOE,0BAAwB,cAC1M,UAACmf,GAAAA,CAAaA,CAAAA,CAACC,EAAG,GAAIxC,OAAO,OAAOC,YAAa,EAAGiC,cAAe,GAAKhf,sBAAoB,gBAAgBE,0BAAwB,cACpI,UAACmf,GAAAA,CAAaA,CAAAA,CAACE,EAAGra,EAAgBqB,cAAc,CAAEuW,OAAQiB,EAAgBhB,YAAa,EAAGiC,cAAe,GAAKhf,sBAAoB,gBAAgBE,0BAAwB,uBArC9J,IA0CxB,CACA,IAAMkd,GAAwB,CAACvX,EAAwB2Z,KACrD,IAAM7M,EAAO9M,EAASa,KAAK,CAAC,EAAE,CACxB+Y,EAA2B,CAC/BnJ,OAAQkJ,EACR3U,MAAO,GACPpC,GAAIkK,EAAKlK,EAAE,CACXuK,KAAML,EAAKK,IAAI,CACf9B,mBAAoBrL,EAASqL,kBAAkB,SAEjD,EAAS8B,IAAI,CACJ,CADM,GAERyM,CAAS,CACZ5U,MAAO8H,KAAqB,CAAhBK,IAAI,EAAG,CACrB,EAEEL,EAAKlK,EAAE,CACF,CADI,GAENgX,CAAS,CACZ5U,MAAO3L,KAAKkc,GAAG,CAAClc,KAAKC,GAAG,CAACwT,EAAKlK,EAAE,CAAG,IAAK,IAAK,CAAC,IAAM,EACtD,EAEKgX,CACT,kBClGe,SAASC,KACtB,IAAMvU,EAAQkE,CAAAA,EAAAA,EAAAA,CAAAA,CAAQA,GAChB,CAACsQ,EAAKC,EAAO,CAAG7D,CAAAA,EAAAA,EAAAA,QAAAA,CAAQA,CAAC,GACzB8D,EAAgBC,CAAAA,EAAAA,GAAAA,CAAAA,CAAaA,CAAC3U,EAAM4U,WAAW,CAACC,EAAE,CAAC,OACnD5c,EAAWhF,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACqE,EAAAA,EAAYA,EACpClC,EAAOnC,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACO,EAAAA,EAAQA,EAC5B0G,EAAQjH,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACmB,EAAAA,EAASA,EAC9B0gB,EAAe1f,EAAKuC,OAAO,GAAG/B,MAAM,CAAG,GAAKsE,EAAMvC,OAAO,GAAG/B,MAAM,CAAG,EAK3E,MAJA4C,CAAAA,EAAAA,EAAAA,SAAAA,CAASA,CAAC,KACI,IAARgc,CAAa,EAACM,GAAcL,EAAO,GAC3B,IAARD,CAAa,EAACvc,GAAUwc,EAAO,EACrC,EAAG,CAACK,EAAc7c,EAAUuc,EAAI,EACzB,WAAC1e,EAAAA,CAAIA,CAAAA,CAACC,SAAS,IAAC2T,IAAK,EAAG1T,eAAe,eAAeC,WAAW,QAAQpB,sBAAoB,OAAOC,wBAAsB,eAAeC,0BAAwB,sBACpK,UAACggB,GAAAA,CAASA,CAAAA,CAAC7T,MAAM,SAASrM,sBAAoB,YAAYE,0BAAwB,cAElF,UAACd,EAAKA,CAACY,WAADZ,WAAqB,QAAQc,0BAAwB,cAE3D,WAACe,EAAAA,CAAIA,CAAAA,CAACC,SAAS,IAACC,eAAe,QAAQC,WAAW,SAASgK,aAAc,EAAG2D,OAAQ,EAAGoR,YAAa,iBAAkBlV,GAAI,CAC1HM,gBAAiB,iBACjB4U,YAAa,eACbC,YAAa,EACbC,UAAW,+BACb,EAAGvR,QAAS,EAAGkD,MAAO,CACpBf,SAAU,QACZ,EAAG5P,OAAQ,EAAGrC,OAAQ,CACpB2P,GAAY,IAARgR,EAAY,QAAU,OAC1B/K,GAAI,mBACN,EAAGG,QAAQ,OAAOrG,cAAc,SAASgD,SAAS,SAASnQ,KAAM,CAC/DoN,GAAI,GACJiG,GAAI,MACN,EAAG5U,sBAAoB,OAAOE,0BAAwB,sBACjD2f,EAAgB,WAACjQ,EAAAA,CAAGA,CAAAA,CAAC7Q,MAAM,iBACxB,UAACgN,EAAWA,CAAAA,EAAK,MAALA,mBACZ,UAACuU,GAAAA,CAAOA,CAAAA,CAACrV,GAAI,CACfqN,QAAS,KACTxH,UAAW,GACb,OACW,UAAC9C,EAAYA,CAAAA,EAAK,OAALA,iBAEvB,CAAC6R,GAAiB,CAACzc,GAAY,UAACkd,GAAAA,CAAOA,CAAAA,CAACrV,GAAI,CAC7CqN,QAAS,IACX,IACG,CAACuH,GAAiB,CAACzc,GAAY,UAAC2I,EAAWA,CAAAA,EAAK,MAALA,mBAE3C,CAAC8T,GAAiB,UAACjQ,EAAAA,CAAGA,CAAAA,CAAC7Q,MAAM,MAAMkM,GAAI,CACxCsV,aAAc,EACdJ,YAAa,UACb7H,QAAS,CACP0B,GAAI,KACJrL,QAAIjO,CACN,CACF,WACM,WAAC8f,GAAAA,CAAIA,CAAAA,CAAC3V,MAAO8U,EAAKtH,SAAU,CAAC/P,EAAGmY,IAAab,EAAOa,GAAWC,aAAW,qBAAqBtW,QAAQ,YAAYa,GAAI,CACzHmT,UAAW,CACb,YACM,UAACuC,GAAAA,CAAGA,CAAAA,CAACjc,MAAM,WAAWrF,GAAG,OAAOkL,KAAM,UAACD,EAAAA,EAAIA,CAAAA,CAACC,KAAK,cAAcvL,OAAQ,KAAQ4hB,aAAa,QAAQ3V,GAAI,CAC1G4V,cAAe,OACfzC,UAAW,GACXtP,QAAS,cACX,EAAGgS,kBAAkB,MAEjB,UAACH,GAAAA,CAAGA,CAAAA,CAACjc,MAAM,QAAQrF,GAAG,OAAOkL,KAAM,UAACD,EAAAA,EAAIA,CAAAA,CAACC,KAAK,2BAA2BvL,OAAQ,KAAQ4hB,aAAa,QAAQ3V,GAAI,CACpH4V,cAAe,OACfzC,UAAW,GACXrJ,QAASkL,OAAevf,EAAY,OACpCoO,QAAS,cACX,EAAGgS,kBAAkB,MAEjB,UAACH,GAAAA,CAAGA,CAAAA,CAACjc,MAAM,QAAQrF,GAAG,OAAOkL,KAAM,UAACD,EAAAA,EAAIA,CAAAA,CAACC,KAAK,iBAAiBvL,OAAQ,KAAQ4hB,aAAa,QAAQ3V,GAAI,CAC1G4V,cAAe,OACfzC,UAAW,GACXrJ,QAAS3R,OAAW1C,EAAY,OAChCoO,QAAS,cACX,EAAGgS,kBAAkB,WAIvB,UAAC5D,GAAQA,CAAC6D,IAAD7D,CAAM,WAAWpI,OAAgB,IAAR6K,GAAa,CAACE,EAAexgB,GAAG,cAAcW,sBAAoB,WAAWE,0BAAwB,cAEvI,UAACuU,GAAWA,CAACsM,KAAK,EAANtM,SAAiBK,OAAgB,IAAR6K,GAAa,CAACE,EAAexgB,GAAG,cAAcW,sBAAoB,cAAcE,0BAAwB,cAE7I,UAACuX,GAAiBA,CAACsJ,KAAK,QAANtJ,GAAiB3C,OAAgB,IAAR6K,GAAa,CAACE,EAAexgB,GAAG,cAAcW,sBAAoB,oBAAoBE,0BAAwB,cAExJ2f,GAAiB,WAACjQ,EAAAA,CAAGA,CAAAA,CAAC7Q,MAAM,iBACzB,UAACuhB,GAAAA,CAAOA,CAAAA,CAACrV,GAAI,CACfqN,QAAS,KACT0I,aAAc,GAChB,IACI,UAAChT,EAAYA,CAAAA,EAAK,OAALA,oBAGhB,CAAC6R,GAAiBzc,GAAY,WAACwM,EAAAA,CAAGA,CAAAA,CAAC7Q,MAAM,iBACtC,UAACuhB,GAAAA,CAAOA,CAAAA,CAACrV,GAAI,CACfqN,QAAS,KACT0I,aAAc,GAChB,IACI,UAACjV,EAAWA,CAAAA,EAAK,MAALA,yBAIlB,UAAC6P,GAAoBA,CAAC5b,gBAAD4b,MAAqB,uBAAuB1b,0BAAwB,gBAE/F","sources":["webpack://_N_E/","webpack://_N_E/./src/sections/analysis/board/index.tsx","webpack://_N_E/./src/sections/analysis/panelHeader/gamePanel.tsx","webpack://_N_E/./src/sections/analysis/panelHeader/loadGame.tsx","webpack://_N_E/./src/sections/analysis/hooks/useCurrentPosition.ts","webpack://_N_E/./src/sections/analysis/panelHeader/analyzeButton.tsx","webpack://_N_E/./src/components/LinearProgressBar.tsx","webpack://_N_E/./src/sections/analysis/panelHeader/index.tsx","webpack://_N_E/./src/sections/analysis/panelToolbar/flipBoardButton.tsx","webpack://_N_E/./src/sections/analysis/panelToolbar/nextMoveButton.tsx","webpack://_N_E/./src/sections/analysis/panelToolbar/goToLastPositionButton.tsx","webpack://_N_E/./src/sections/analysis/panelToolbar/saveButton.tsx","webpack://_N_E/./src/sections/analysis/panelToolbar/index.tsx","webpack://_N_E/./src/sections/analysis/panelBody/analysisTab/playersMetric.tsx","webpack://_N_E/./src/components/prettyMoveSan/index.tsx","webpack://_N_E/./src/sections/analysis/panelBody/analysisTab/moveInfo.tsx","webpack://_N_E/./src/sections/analysis/panelBody/analysisTab/opening.tsx","webpack://_N_E/./src/sections/analysis/panelBody/analysisTab/engineLines/lineEvaluation.tsx","webpack://_N_E/./src/sections/analysis/panelBody/analysisTab/engineLines/index.tsx","webpack://_N_E/./src/sections/analysis/panelBody/analysisTab/index.tsx","webpack://_N_E/./src/sections/analysis/panelBody/classificationTab/movesPanel/moveItem.tsx","webpack://_N_E/./src/sections/analysis/panelBody/classificationTab/movesPanel/movesLine.tsx","webpack://_N_E/./src/sections/analysis/panelBody/classificationTab/movesPanel/index.tsx","webpack://_N_E/./src/sections/analysis/panelBody/classificationTab/movesClassificationsRecap/classificationRow.tsx","webpack://_N_E/./src/sections/analysis/panelBody/classificationTab/movesClassificationsRecap/index.tsx","webpack://_N_E/./src/sections/analysis/panelBody/classificationTab/index.tsx","webpack://_N_E/./src/sections/engineSettings/arrowOptions.tsx","webpack://_N_E/./src/sections/engineSettings/engineSettingsDialog.tsx","webpack://_N_E/./src/sections/engineSettings/engineSettingsButton.tsx","webpack://_N_E/./src/sections/analysis/panelBody/graphTab/tooltip.tsx","webpack://_N_E/./src/sections/analysis/panelBody/graphTab/dot.tsx","webpack://_N_E/./src/sections/analysis/panelBody/graphTab/index.tsx","webpack://_N_E/./src/pages/index.tsx"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/\",\n      function () {\n        return require(\"private-next-pages/index.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/\"])\n      });\n    }\n  ","import { useAtomValue } from \"jotai\";\nimport { boardAtom, boardOrientationAtom, currentPositionAtom, gameAtom, showBestMoveArrowAtom, showPlayerMoveIconAtom } from \"../states\";\nimport { useMemo } from \"react\";\nimport { useScreenSize } from \"@/hooks/useScreenSize\";\nimport { Color } from \"@/types/enums\";\nimport Board from \"@/components/board\";\nimport { usePlayersData } from \"@/hooks/usePlayersData\";\nexport default function BoardContainer() {\n  const screenSize = useScreenSize();\n  const boardOrientation = useAtomValue(boardOrientationAtom);\n  const showBestMoveArrow = useAtomValue(showBestMoveArrowAtom);\n  const {\n    white,\n    black\n  } = usePlayersData(gameAtom);\n  const boardSize = useMemo(() => {\n    const width = screenSize.width;\n    const height = screenSize.height;\n\n    // 1200 is the lg layout breakpoint\n    if (window?.innerWidth < 1200) {\n      return Math.min(width, height - 150);\n    }\n    return Math.min(width - 700, height * 0.92);\n  }, [screenSize]);\n  return <Board id=\"AnalysisBoard\" boardSize={boardSize} canPlay={true} gameAtom={boardAtom} whitePlayer={white} blackPlayer={black} boardOrientation={boardOrientation ? Color.White : Color.Black} currentPositionAtom={currentPositionAtom} showBestMoveArrow={showBestMoveArrow} showPlayerMoveIconAtom={showPlayerMoveIconAtom} showEvaluationBar={true} data-sentry-element=\"Board\" data-sentry-component=\"BoardContainer\" data-sentry-source-file=\"index.tsx\" />;\n}","import { Grid2 as Grid, Typography } from \"@mui/material\";\nimport { useGameDatabase } from \"@/hooks/useGameDatabase\";\nimport { useAtomValue } from \"jotai\";\nimport { gameAtom } from \"../states\";\nexport default function GamePanel() {\n  const {\n    gameFromUrl\n  } = useGameDatabase();\n  const game = useAtomValue(gameAtom);\n  const gameHeaders = game.getHeaders();\n  const hasGameInfo = gameFromUrl !== undefined || !!gameHeaders.White && gameHeaders.White !== \"?\";\n  if (!hasGameInfo) return null;\n  const termination = gameFromUrl?.termination || gameHeaders.Termination || \"?\";\n  const result = termination.split(\" \").length > 2 ? termination : gameFromUrl?.result || gameHeaders.Result || \"?\";\n  return <Grid container justifyContent=\"space-evenly\" alignItems=\"center\" rowGap={1} columnGap={3} size={11} data-sentry-element=\"Grid\" data-sentry-component=\"GamePanel\" data-sentry-source-file=\"gamePanel.tsx\">\r\n      <Grid container justifyContent=\"center\" alignItems=\"center\" size=\"grow\" data-sentry-element=\"Grid\" data-sentry-source-file=\"gamePanel.tsx\">\r\n        <Typography noWrap fontSize=\"0.9rem\" data-sentry-element=\"Typography\" data-sentry-source-file=\"gamePanel.tsx\">\r\n          Site : {gameFromUrl?.site || gameHeaders.Site || \"?\"}\r\n        </Typography>\r\n      </Grid>\r\n\r\n      <Grid container justifyContent=\"center\" alignItems=\"center\" size=\"grow\" data-sentry-element=\"Grid\" data-sentry-source-file=\"gamePanel.tsx\">\r\n        <Typography noWrap fontSize=\"0.9rem\" data-sentry-element=\"Typography\" data-sentry-source-file=\"gamePanel.tsx\">\r\n          Date : {gameFromUrl?.date || gameHeaders.Date || \"?\"}\r\n        </Typography>\r\n      </Grid>\r\n\r\n      <Grid container justifyContent=\"center\" alignItems=\"center\" size=\"grow\" data-sentry-element=\"Grid\" data-sentry-source-file=\"gamePanel.tsx\">\r\n        <Typography noWrap fontSize=\"0.9rem\" data-sentry-element=\"Typography\" data-sentry-source-file=\"gamePanel.tsx\">\r\n          Result : {result}\r\n        </Typography>\r\n      </Grid>\r\n    </Grid>;\n}","import LoadGameButton from \"../../loadGame/loadGameButton\";\nimport { useCallback, useEffect, useMemo } from \"react\";\nimport { useChessActions } from \"@/hooks/useChessActions\";\nimport { boardAtom, boardOrientationAtom, evaluationProgressAtom, gameAtom, gameEvalAtom } from \"../states\";\nimport { useGameDatabase } from \"@/hooks/useGameDatabase\";\nimport { useAtomValue, useSetAtom } from \"jotai\";\nimport { Chess } from \"chess.js\";\nimport { useRouter } from \"next/router\";\nimport { GameEval } from \"@/types/eval\";\nimport { fetchLichessGame } from \"@/lib/lichess\";\nexport default function LoadGame() {\n  const router = useRouter();\n  const game = useAtomValue(gameAtom);\n  const {\n    setPgn: setGamePgn\n  } = useChessActions(gameAtom);\n  const {\n    resetToStartingPosition: resetBoard\n  } = useChessActions(boardAtom);\n  const {\n    gameFromUrl\n  } = useGameDatabase();\n  const setEval = useSetAtom(gameEvalAtom);\n  const setBoardOrientation = useSetAtom(boardOrientationAtom);\n  const evaluationProgress = useAtomValue(evaluationProgressAtom);\n  const joinedGameHistory = useMemo(() => game.history().join(), [game]);\n  const resetAndSetGamePgn = useCallback((pgn: string, orientation?: boolean, gameEval?: GameEval) => {\n    const gameFromPgn = new Chess();\n    gameFromPgn.loadPgn(pgn);\n    if (joinedGameHistory === gameFromPgn.history().join()) return;\n    resetBoard(pgn);\n    setEval(gameEval);\n    setGamePgn(pgn);\n    setBoardOrientation(orientation ?? true);\n  }, [joinedGameHistory, resetBoard, setGamePgn, setEval, setBoardOrientation]);\n  const {\n    lichessGameId,\n    orientation: orientationParam\n  } = router.query;\n  useEffect(() => {\n    const handleLichess = async (id: string) => {\n      const res = await fetchLichessGame(id);\n      if (typeof res === \"string\") {\n        resetAndSetGamePgn(res, orientationParam !== \"black\");\n      }\n    };\n    if (gameFromUrl) {\n      const orientation = !(gameFromUrl.site === \"Chesskit.org\" && gameFromUrl.black.name === \"You\");\n      resetAndSetGamePgn(gameFromUrl.pgn, orientation, gameFromUrl.eval);\n    } else if (typeof lichessGameId === \"string\" && !!lichessGameId) {\n      handleLichess(lichessGameId);\n    }\n  }, [gameFromUrl, lichessGameId, orientationParam, resetAndSetGamePgn]);\n  useEffect(() => {\n    const eventHandler = (event: MessageEvent) => {\n      try {\n        if (!event?.data?.pgn) return;\n        const {\n          pgn,\n          orientation\n        } = event.data as {\n          pgn: string;\n          orientation?: \"white\" | \"black\";\n        };\n        resetAndSetGamePgn(pgn, orientation !== \"black\");\n      } catch (error) {\n        console.error(\"Error processing message event:\", error);\n      }\n    };\n    window.addEventListener(\"message\", eventHandler);\n    return () => {\n      window.removeEventListener(\"message\", eventHandler);\n    };\n  }, [resetAndSetGamePgn]);\n  const isGameLoaded = gameFromUrl !== undefined || !!game.getHeaders().White && game.getHeaders().White !== \"?\" || game.history().length > 0;\n  if (evaluationProgress) return null;\n  return <LoadGameButton label={isGameLoaded ? \"Load another game\" : \"Load game\"} size=\"medium\" setGame={async game => {\n    await router.replace({\n      query: {},\n      pathname: router.pathname\n    }, undefined, {\n      shallow: true,\n      scroll: false\n    });\n    resetAndSetGamePgn(game.pgn());\n  }} data-sentry-element=\"LoadGameButton\" data-sentry-component=\"LoadGame\" data-sentry-source-file=\"loadGame.tsx\" />;\n}","import {\r\n  boardAtom,\r\n  currentPositionAtom,\r\n  engineDepthAtom,\r\n  engineMultiPvAtom,\r\n  gameAtom,\r\n  gameEvalAtom,\r\n  savedEvalsAtom,\r\n} from \"@/sections/analysis/states\";\r\nimport { CurrentPosition, PositionEval } from \"@/types/eval\";\r\nimport { useAtom, useAtomValue } from \"jotai\";\r\nimport { useEffect } from \"react\";\r\nimport { getEvaluateGameParams } from \"@/lib/chess\";\r\nimport { getMovesClassification } from \"@/lib/engine/helpers/moveClassification\";\r\nimport { openings } from \"@/data/openings\";\r\nimport { UciEngine } from \"@/lib/engine/uciEngine\";\r\n\r\nexport const useCurrentPosition = (engine: UciEngine | null) => {\r\n  const [currentPosition, setCurrentPosition] = useAtom(currentPositionAtom);\r\n  const gameEval = useAtomValue(gameEvalAtom);\r\n  const game = useAtomValue(gameAtom);\r\n  const board = useAtomValue(boardAtom);\r\n  const depth = useAtomValue(engineDepthAtom);\r\n  const multiPv = useAtomValue(engineMultiPvAtom);\r\n  const [savedEvals, setSavedEvals] = useAtom(savedEvalsAtom);\r\n\r\n  useEffect(() => {\r\n    const boardHistory = board.history({ verbose: true });\r\n    const position: CurrentPosition = {\r\n      lastMove: boardHistory.at(-1),\r\n    };\r\n\r\n    const gameHistory = game.history();\r\n\r\n    if (\r\n      boardHistory.length <= gameHistory.length &&\r\n      gameHistory.slice(0, boardHistory.length).join() ===\r\n        boardHistory.map((m) => m.san).join()\r\n    ) {\r\n      position.currentMoveIdx = boardHistory.length;\r\n\r\n      if (gameEval) {\r\n        const evalIndex = boardHistory.length;\r\n\r\n        position.eval = {\r\n          ...gameEval.positions[evalIndex],\r\n          lines: gameEval.positions[evalIndex].lines.slice(0, multiPv),\r\n        };\r\n        position.lastEval =\r\n          evalIndex > 0\r\n            ? {\r\n                ...gameEval.positions[evalIndex - 1],\r\n                lines: gameEval.positions[evalIndex - 1].lines.slice(\r\n                  0,\r\n                  multiPv\r\n                ),\r\n              }\r\n            : undefined;\r\n      }\r\n    }\r\n\r\n    if (!position.eval?.opening) {\r\n      for (const move of boardHistory.slice().reverse()) {\r\n        const moveFen = move.after.split(\" \")[0];\r\n        const opening = openings.find((opening) => opening.fen === moveFen);\r\n        if (opening) {\r\n          position.opening = opening.name;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    setCurrentPosition(position);\r\n\r\n    if (\r\n      !position.eval &&\r\n      engine?.getIsReady() &&\r\n      engine.name &&\r\n      !board.isCheckmate() &&\r\n      !board.isStalemate()\r\n    ) {\r\n      const getFenEngineEval = async (\r\n        fen: string,\r\n        setPartialEval?: (positionEval: PositionEval) => void\r\n      ) => {\r\n        if (!engine.getIsReady()) {\r\n          throw new Error(\"Engine not ready\");\r\n        }\r\n        const savedEval = savedEvals[fen];\r\n        if (\r\n          savedEval &&\r\n          savedEval.engine === engine.name &&\r\n          (savedEval.lines?.length ?? 0) >= multiPv &&\r\n          (savedEval.lines[0].depth ?? 0) >= depth\r\n        ) {\r\n          const positionEval: PositionEval = {\r\n            ...savedEval,\r\n            lines: savedEval.lines.slice(0, multiPv),\r\n          };\r\n          setPartialEval?.(positionEval);\r\n          return positionEval;\r\n        }\r\n\r\n        const rawPositionEval = await engine.evaluatePositionWithUpdate({\r\n          fen,\r\n          depth,\r\n          multiPv,\r\n          setPartialEval,\r\n        });\r\n\r\n        setSavedEvals((prev) => ({\r\n          ...prev,\r\n          [fen]: { ...rawPositionEval, engine: engine.name },\r\n        }));\r\n\r\n        return rawPositionEval;\r\n      };\r\n\r\n      const getPositionEval = async () => {\r\n        const setPartialEval = (positionEval: PositionEval) => {\r\n          setCurrentPosition({ ...position, eval: positionEval });\r\n        };\r\n        const rawPositionEval = await getFenEngineEval(\r\n          board.fen(),\r\n          setPartialEval\r\n        );\r\n\r\n        if (boardHistory.length === 0) return;\r\n\r\n        const params = getEvaluateGameParams(board);\r\n        const fens = params.fens.slice(board.turn() === \"w\" ? -3 : -4);\r\n        const uciMoves = params.uciMoves.slice(board.turn() === \"w\" ? -2 : -3);\r\n\r\n        const lastRawEval = await getFenEngineEval(fens.slice(-2)[0]);\r\n        const rawPositions: PositionEval[] = fens.map((_, idx) => {\r\n          if (idx === fens.length - 2) return lastRawEval;\r\n          if (idx === fens.length - 1) return rawPositionEval;\r\n          return {\r\n            lines: [\r\n              {\r\n                pv: [],\r\n                depth: 0,\r\n                multiPv: 1,\r\n                cp: 1,\r\n              },\r\n            ],\r\n          };\r\n        });\r\n\r\n        const positionsWithMoveClassification = getMovesClassification(\r\n          rawPositions,\r\n          uciMoves,\r\n          fens\r\n        );\r\n\r\n        setCurrentPosition({\r\n          ...position,\r\n          eval: positionsWithMoveClassification.slice(-1)[0],\r\n          lastEval: positionsWithMoveClassification.slice(-2)[0],\r\n        });\r\n      };\r\n\r\n      getPositionEval();\r\n    }\r\n\r\n    return () => {\r\n      if (engine?.getIsReady()) {\r\n        engine?.stopAllCurrentJobs();\r\n      }\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [gameEval, board, game, engine, depth, multiPv]);\r\n\r\n  return currentPosition;\r\n};\r\n","import { Icon } from \"@iconify/react\";\nimport { engineDepthAtom, engineMultiPvAtom, engineNameAtom, engineWorkersNbAtom, evaluationProgressAtom, gameAtom, gameEvalAtom, savedEvalsAtom } from \"../states\";\nimport { useAtom, useAtomValue, useSetAtom } from \"jotai\";\nimport { getEvaluateGameParams } from \"@/lib/chess\";\nimport { useGameDatabase } from \"@/hooks/useGameDatabase\";\nimport { LoadingButton } from \"@mui/lab\";\nimport { useEngine } from \"@/hooks/useEngine\";\nimport { logAnalyticsEvent } from \"@/lib/firebase\";\nimport { SavedEvals } from \"@/types/eval\";\nimport { useEffect, useCallback } from \"react\";\nimport { usePlayersData } from \"@/hooks/usePlayersData\";\nimport { Typography } from \"@mui/material\";\nimport { useCurrentPosition } from \"../hooks/useCurrentPosition\";\nexport default function AnalyzeButton() {\n  const engineName = useAtomValue(engineNameAtom);\n  const engine = useEngine(engineName);\n  useCurrentPosition(engine);\n  const engineWorkersNb = useAtomValue(engineWorkersNbAtom);\n  const [evaluationProgress, setEvaluationProgress] = useAtom(evaluationProgressAtom);\n  const engineDepth = useAtomValue(engineDepthAtom);\n  const engineMultiPv = useAtomValue(engineMultiPvAtom);\n  const {\n    setGameEval,\n    gameFromUrl\n  } = useGameDatabase();\n  const [gameEval, setEval] = useAtom(gameEvalAtom);\n  const game = useAtomValue(gameAtom);\n  const setSavedEvals = useSetAtom(savedEvalsAtom);\n  const {\n    white,\n    black\n  } = usePlayersData(gameAtom);\n  const readyToAnalyse = engine?.getIsReady() && game.history().length > 0 && !evaluationProgress;\n  const handleAnalyze = useCallback(async () => {\n    const params = getEvaluateGameParams(game);\n    if (!engine?.getIsReady() || params.fens.length === 0 || evaluationProgress) {\n      return;\n    }\n    const newGameEval = await engine.evaluateGame({\n      ...params,\n      depth: engineDepth,\n      multiPv: engineMultiPv,\n      setEvaluationProgress,\n      playersRatings: {\n        white: white?.rating,\n        black: black?.rating\n      },\n      workersNb: engineWorkersNb\n    });\n    setEval(newGameEval);\n    setEvaluationProgress(0);\n    if (gameFromUrl) {\n      setGameEval(gameFromUrl.id, newGameEval);\n    }\n    const gameSavedEvals: SavedEvals = params.fens.reduce((acc, fen, idx) => {\n      acc[fen] = {\n        ...newGameEval.positions[idx],\n        engine: engineName\n      };\n      return acc;\n    }, {} as SavedEvals);\n    setSavedEvals(prev => ({\n      ...prev,\n      ...gameSavedEvals\n    }));\n    logAnalyticsEvent(\"analyze_game\", {\n      engine: engineName,\n      depth: engineDepth,\n      multiPv: engineMultiPv,\n      nbPositions: params.fens.length\n    });\n  }, [engine, engineName, engineWorkersNb, game, engineDepth, engineMultiPv, evaluationProgress, setEvaluationProgress, setEval, gameFromUrl, setGameEval, setSavedEvals, white.rating, black.rating]);\n  useEffect(() => {\n    setEvaluationProgress(0);\n  }, [engine, setEvaluationProgress]);\n\n  // Automatically analyze when a new game is loaded and ready to analyze\n  useEffect(() => {\n    if (!gameEval && readyToAnalyse) {\n      handleAnalyze();\n    }\n  }, [gameEval, readyToAnalyse, handleAnalyze]);\n  if (evaluationProgress) return null;\n  return <LoadingButton variant=\"contained\" size=\"medium\" startIcon={<Icon icon=\"streamline:magnifying-glass-solid\" height={12} />} onClick={handleAnalyze} disabled={!readyToAnalyse} data-sentry-element=\"LoadingButton\" data-sentry-component=\"AnalyzeButton\" data-sentry-source-file=\"analyzeButton.tsx\">\r\n      <Typography fontSize=\"0.9em\" fontWeight=\"500\" lineHeight=\"1.4em\" data-sentry-element=\"Typography\" data-sentry-source-file=\"analyzeButton.tsx\">\r\n        {gameEval ? \"Analyze again\" : \"Analyze\"}\r\n      </Typography>\r\n    </LoadingButton>;\n}","import { LINEAR_PROGRESS_BAR_COLOR } from \"@/constants\";\nimport { Grid2 as Grid, LinearProgress, LinearProgressProps, Typography, linearProgressClasses } from \"@mui/material\";\nconst LinearProgressBar = (props: LinearProgressProps & {\n  value: number;\n  label: string;\n}) => {\n  if (props.value === 0) return null;\n  return <Grid container alignItems=\"center\" justifyContent=\"center\" wrap=\"nowrap\" width=\"90%\" columnGap={2} size={12} data-sentry-element=\"Grid\" data-sentry-component=\"LinearProgressBar\" data-sentry-source-file=\"LinearProgressBar.tsx\">\r\n      <Typography variant=\"caption\" align=\"center\" data-sentry-element=\"Typography\" data-sentry-source-file=\"LinearProgressBar.tsx\">\r\n        {props.label}\r\n      </Typography>\r\n      <Grid sx={{\n      width: \"100%\"\n    }} data-sentry-element=\"Grid\" data-sentry-source-file=\"LinearProgressBar.tsx\">\r\n        <LinearProgress variant=\"determinate\" {...props} sx={theme => ({\n        borderRadius: \"5px\",\n        height: \"5px\",\n        [`&.${linearProgressClasses.colorPrimary}`]: {\n          backgroundColor: theme.palette.grey[theme.palette.mode === \"light\" ? 200 : 700]\n        },\n        [`& .${linearProgressClasses.bar}`]: {\n          borderRadius: 5,\n          backgroundColor: LINEAR_PROGRESS_BAR_COLOR\n        }\n      })} data-sentry-element=\"LinearProgress\" data-sentry-source-file=\"LinearProgressBar.tsx\" />\r\n      </Grid>\r\n      <Grid data-sentry-element=\"Grid\" data-sentry-source-file=\"LinearProgressBar.tsx\">\r\n        <Typography variant=\"body2\" color=\"text.secondary\" data-sentry-element=\"Typography\" data-sentry-source-file=\"LinearProgressBar.tsx\">{`${Math.round(props.value)}%`}</Typography>\r\n      </Grid>\r\n    </Grid>;\n};\nexport default LinearProgressBar;","import { Icon } from \"@iconify/react\";\nimport { Grid2 as Grid, Typography } from \"@mui/material\";\nimport GamePanel from \"./gamePanel\";\nimport LoadGame from \"./loadGame\";\nimport AnalyzeButton from \"./analyzeButton\";\nimport LinearProgressBar from \"@/components/LinearProgressBar\";\nimport { useAtomValue } from \"jotai\";\nimport { evaluationProgressAtom } from \"../states\";\nexport default function PanelHeader() {\n  const evaluationProgress = useAtomValue(evaluationProgressAtom);\n  return <Grid container justifyContent=\"center\" alignItems=\"center\" rowGap={2} size={12} data-sentry-element=\"Grid\" data-sentry-component=\"PanelHeader\" data-sentry-source-file=\"index.tsx\">\r\n      <Grid container justifyContent=\"center\" alignItems=\"center\" columnGap={1} size={12} data-sentry-element=\"Grid\" data-sentry-source-file=\"index.tsx\">\r\n        <Icon icon=\"streamline:clipboard-check\" height={24} data-sentry-element=\"Icon\" data-sentry-source-file=\"index.tsx\" />\r\n\r\n        <Typography variant=\"h5\" align=\"center\" data-sentry-element=\"Typography\" data-sentry-source-file=\"index.tsx\">\r\n          Game Analysis\r\n        </Typography>\r\n      </Grid>\r\n\r\n      <Grid container justifyContent=\"center\" alignItems=\"center\" rowGap={2} columnGap={12} size={12} data-sentry-element=\"Grid\" data-sentry-source-file=\"index.tsx\">\r\n        <GamePanel data-sentry-element=\"GamePanel\" data-sentry-source-file=\"index.tsx\" />\r\n        <LoadGame data-sentry-element=\"LoadGame\" data-sentry-source-file=\"index.tsx\" />\r\n        <AnalyzeButton data-sentry-element=\"AnalyzeButton\" data-sentry-source-file=\"index.tsx\" />\r\n        <LinearProgressBar value={evaluationProgress} label=\"Analyzing...\" data-sentry-element=\"LinearProgressBar\" data-sentry-source-file=\"index.tsx\" />\r\n      </Grid>\r\n    </Grid>;\n}","import { useSetAtom } from \"jotai\";\nimport { boardOrientationAtom } from \"../states\";\nimport { IconButton, Tooltip } from \"@mui/material\";\nimport { Icon } from \"@iconify/react\";\nimport { useEffect } from \"react\";\nexport default function FlipBoardButton() {\n  const setBoardOrientation = useSetAtom(boardOrientationAtom);\n  useEffect(() => {\n    const onKeyDown = (e: KeyboardEvent) => {\n      if (e.key === \"f\") {\n        setBoardOrientation(prev => !prev);\n      }\n    };\n    window.addEventListener(\"keydown\", onKeyDown);\n    return () => {\n      window.removeEventListener(\"keydown\", onKeyDown);\n    };\n  }, [setBoardOrientation]);\n  return <Tooltip title=\"Flip board\" data-sentry-element=\"Tooltip\" data-sentry-component=\"FlipBoardButton\" data-sentry-source-file=\"flipBoardButton.tsx\">\r\n      <IconButton onClick={() => setBoardOrientation(prev => !prev)} sx={{\n      paddingX: 1.2,\n      paddingY: 0.5\n    }} data-sentry-element=\"IconButton\" data-sentry-source-file=\"flipBoardButton.tsx\">\r\n        <Icon icon=\"eva:flip-fill\" data-sentry-element=\"Icon\" data-sentry-source-file=\"flipBoardButton.tsx\" />\r\n      </IconButton>\r\n    </Tooltip>;\n}","import { Icon } from \"@iconify/react\";\nimport { Grid2 as Grid, IconButton, Tooltip } from \"@mui/material\";\nimport { useAtomValue } from \"jotai\";\nimport { boardAtom, gameAtom } from \"../states\";\nimport { useChessActions } from \"@/hooks/useChessActions\";\nimport { useCallback, useEffect } from \"react\";\nexport default function NextMoveButton() {\n  const {\n    playMove: playBoardMove\n  } = useChessActions(boardAtom);\n  const game = useAtomValue(gameAtom);\n  const board = useAtomValue(boardAtom);\n  const gameHistory = game.history();\n  const boardHistory = board.history();\n  const isButtonEnabled = boardHistory.length < gameHistory.length && gameHistory.slice(0, boardHistory.length).join() === boardHistory.join();\n  const addNextGameMoveToBoard = useCallback(() => {\n    if (!isButtonEnabled) return;\n    const nextMoveIndex = boardHistory.length;\n    const nextMove = game.history({\n      verbose: true\n    })[nextMoveIndex];\n    const comment = game.getComments().find(c => c.fen === nextMove.after)?.comment;\n    if (nextMove) {\n      playBoardMove({\n        from: nextMove.from,\n        to: nextMove.to,\n        promotion: nextMove.promotion,\n        comment\n      });\n    }\n  }, [isButtonEnabled, boardHistory, game, playBoardMove]);\n  useEffect(() => {\n    const onKeyDown = (e: KeyboardEvent) => {\n      if (e.key === \"ArrowRight\") {\n        addNextGameMoveToBoard();\n      }\n    };\n    window.addEventListener(\"keydown\", onKeyDown);\n    return () => {\n      window.removeEventListener(\"keydown\", onKeyDown);\n    };\n  }, [addNextGameMoveToBoard]);\n  return <Tooltip title=\"Go to next move\" data-sentry-element=\"Tooltip\" data-sentry-component=\"NextMoveButton\" data-sentry-source-file=\"nextMoveButton.tsx\">\r\n      <Grid data-sentry-element=\"Grid\" data-sentry-source-file=\"nextMoveButton.tsx\">\r\n        <IconButton onClick={() => addNextGameMoveToBoard()} disabled={!isButtonEnabled} sx={{\n        paddingX: 2.5,\n        paddingY: 0.5\n      }} data-sentry-element=\"IconButton\" data-sentry-source-file=\"nextMoveButton.tsx\">\r\n          <Icon icon=\"ri:arrow-right-s-line\" height={50} data-sentry-element=\"Icon\" data-sentry-source-file=\"nextMoveButton.tsx\" />\r\n        </IconButton>\r\n      </Grid>\r\n    </Tooltip>;\n}","import { Icon } from \"@iconify/react\";\nimport { Grid2 as Grid, IconButton, Tooltip } from \"@mui/material\";\nimport { useAtomValue } from \"jotai\";\nimport { boardAtom, gameAtom } from \"../states\";\nimport { useChessActions } from \"@/hooks/useChessActions\";\nimport { useEffect } from \"react\";\nexport default function GoToLastPositionButton() {\n  const {\n    setPgn: setBoardPgn\n  } = useChessActions(boardAtom);\n  const game = useAtomValue(gameAtom);\n  const board = useAtomValue(boardAtom);\n  const gameHistory = game.history();\n  const boardHistory = board.history();\n  const isButtonDisabled = boardHistory >= gameHistory;\n  useEffect(() => {\n    const onKeyDown = (e: KeyboardEvent) => {\n      if (e.key === \"ArrowUp\") {\n        if (isButtonDisabled) return;\n        setBoardPgn(game.pgn());\n      }\n    };\n    window.addEventListener(\"keydown\", onKeyDown);\n    return () => {\n      window.removeEventListener(\"keydown\", onKeyDown);\n    };\n  }, [isButtonDisabled, setBoardPgn, game]);\n  return <Tooltip title=\"Go to final position\" data-sentry-element=\"Tooltip\" data-sentry-component=\"GoToLastPositionButton\" data-sentry-source-file=\"goToLastPositionButton.tsx\">\r\n      <Grid data-sentry-element=\"Grid\" data-sentry-source-file=\"goToLastPositionButton.tsx\">\r\n        <IconButton onClick={() => {\n        if (isButtonDisabled) return;\n        setBoardPgn(game.pgn());\n      }} disabled={isButtonDisabled} sx={{\n        paddingX: 2.5,\n        paddingY: 0.5\n      }} data-sentry-element=\"IconButton\" data-sentry-source-file=\"goToLastPositionButton.tsx\">\r\n          <Icon icon=\"ri:skip-forward-line\" height={50} data-sentry-element=\"Icon\" data-sentry-source-file=\"goToLastPositionButton.tsx\" />\r\n        </IconButton>\r\n      </Grid>\r\n    </Tooltip>;\n}","import { useGameDatabase } from \"@/hooks/useGameDatabase\";\nimport { Icon } from \"@iconify/react\";\nimport { Grid2 as Grid, IconButton, Tooltip } from \"@mui/material\";\nimport { useAtomValue } from \"jotai\";\nimport { useRouter } from \"next/router\";\nimport { boardAtom, gameAtom, gameEvalAtom } from \"../states\";\nimport { getGameToSave } from \"@/lib/chess\";\nexport default function SaveButton() {\n  const game = useAtomValue(gameAtom);\n  const board = useAtomValue(boardAtom);\n  const gameEval = useAtomValue(gameEvalAtom);\n  const {\n    addGame,\n    setGameEval,\n    gameFromUrl\n  } = useGameDatabase();\n  const router = useRouter();\n  const enableSave = !gameFromUrl && (board.history().length || game.history().length);\n  const handleSave = async () => {\n    if (!enableSave) return;\n    const gameToSave = getGameToSave(game, board);\n    const gameId = await addGame(gameToSave);\n    if (gameEval) {\n      await setGameEval(gameId, gameEval);\n    }\n    router.replace({\n      query: {\n        gameId: gameId\n      },\n      pathname: router.pathname\n    }, undefined, {\n      shallow: true,\n      scroll: false\n    });\n  };\n  return <>\r\n      {gameFromUrl ? <Tooltip title=\"Game saved in database\">\r\n          <Grid>\r\n            <IconButton disabled={true} sx={{\n          paddingX: 1.2,\n          paddingY: 0.5\n        }}>\r\n              <Icon icon=\"ri:folder-check-line\" />\r\n            </IconButton>\r\n          </Grid>\r\n        </Tooltip> : <Tooltip title=\"Save game\">\r\n          <Grid>\r\n            <IconButton onClick={handleSave} disabled={!enableSave} sx={{\n          paddingX: 1.2,\n          paddingY: 0.5\n        }}>\r\n              <Icon icon=\"ri:save-3-line\" />\r\n            </IconButton>\r\n          </Grid>\r\n        </Tooltip>}\r\n    </>;\n}","import { Grid2 as Grid, IconButton, Tooltip } from \"@mui/material\";\nimport { Icon } from \"@iconify/react\";\nimport { useAtomValue } from \"jotai\";\nimport { boardAtom, gameAtom } from \"../states\";\nimport { useChessActions } from \"@/hooks/useChessActions\";\nimport FlipBoardButton from \"./flipBoardButton\";\nimport NextMoveButton from \"./nextMoveButton\";\nimport GoToLastPositionButton from \"./goToLastPositionButton\";\nimport SaveButton from \"./saveButton\";\nimport { useEffect } from \"react\";\nexport default function PanelToolBar() {\n  const board = useAtomValue(boardAtom);\n  const {\n    resetToStartingPosition: resetBoard,\n    undoMove: undoBoardMove\n  } = useChessActions(boardAtom);\n  const boardHistory = board.history();\n  const game = useAtomValue(gameAtom);\n  useEffect(() => {\n    const onKeyDown = (e: KeyboardEvent) => {\n      if (boardHistory.length === 0) return;\n      if (e.key === \"ArrowLeft\") {\n        undoBoardMove();\n      } else if (e.key === \"ArrowDown\") {\n        resetBoard();\n      }\n    };\n    window.addEventListener(\"keydown\", onKeyDown);\n    return () => {\n      window.removeEventListener(\"keydown\", onKeyDown);\n    };\n  }, [undoBoardMove, boardHistory, resetBoard, board]);\n  return <Grid container justifyContent=\"center\" alignItems=\"center\" size={12} data-sentry-element=\"Grid\" data-sentry-component=\"PanelToolBar\" data-sentry-source-file=\"index.tsx\">\r\n      <FlipBoardButton data-sentry-element=\"FlipBoardButton\" data-sentry-source-file=\"index.tsx\" />\r\n\r\n      <Tooltip title=\"Reset board\" data-sentry-element=\"Tooltip\" data-sentry-source-file=\"index.tsx\">\r\n        <Grid data-sentry-element=\"Grid\" data-sentry-source-file=\"index.tsx\">\r\n          <IconButton onClick={() => resetBoard()} disabled={boardHistory.length === 0} sx={{\n          paddingX: 2.5,\n          paddingY: 0.5\n        }} data-sentry-element=\"IconButton\" data-sentry-source-file=\"index.tsx\">\r\n            <Icon icon=\"ri:skip-back-line\" height={50} data-sentry-element=\"Icon\" data-sentry-source-file=\"index.tsx\" />\r\n          </IconButton>\r\n        </Grid>\r\n      </Tooltip>\r\n\r\n      <Tooltip title=\"Go to previous move\" data-sentry-element=\"Tooltip\" data-sentry-source-file=\"index.tsx\">\r\n        <Grid data-sentry-element=\"Grid\" data-sentry-source-file=\"index.tsx\">\r\n          <IconButton onClick={() => undoBoardMove()} disabled={boardHistory.length === 0} sx={{\n          paddingX: 2.5,\n          paddingY: 0.5\n        }} data-sentry-element=\"IconButton\" data-sentry-source-file=\"index.tsx\">\r\n            <Icon icon=\"ri:arrow-left-s-line\" height={50} data-sentry-element=\"Icon\" data-sentry-source-file=\"index.tsx\" />\r\n          </IconButton>\r\n        </Grid>\r\n      </Tooltip>\r\n\r\n      <NextMoveButton data-sentry-element=\"NextMoveButton\" data-sentry-source-file=\"index.tsx\" />\r\n\r\n      <GoToLastPositionButton data-sentry-element=\"GoToLastPositionButton\" data-sentry-source-file=\"index.tsx\" />\r\n\r\n      <Tooltip title=\"Copy pgn\" data-sentry-element=\"Tooltip\" data-sentry-source-file=\"index.tsx\">\r\n        <Grid data-sentry-element=\"Grid\" data-sentry-source-file=\"index.tsx\">\r\n          <IconButton disabled={game.history().length === 0} onClick={() => {\n          navigator.clipboard?.writeText?.(game.pgn());\n        }} sx={{\n          paddingX: 2.5,\n          paddingY: 0.5\n        }} data-sentry-element=\"IconButton\" data-sentry-source-file=\"index.tsx\">\r\n            <Icon icon=\"ri:clipboard-line\" data-sentry-element=\"Icon\" data-sentry-source-file=\"index.tsx\" />\r\n          </IconButton>\r\n        </Grid>\r\n      </Tooltip>\r\n\r\n      <SaveButton data-sentry-element=\"SaveButton\" data-sentry-source-file=\"index.tsx\" />\r\n    </Grid>;\n}","import { Stack, Typography } from \"@mui/material\";\ninterface Props {\n  title: string;\n  whiteValue: string | number;\n  blackValue: string | number;\n}\nexport default function PlayersMetric({\n  title,\n  whiteValue,\n  blackValue\n}: Props) {\n  return <Stack justifyContent=\"center\" alignItems=\"center\" flexDirection=\"row\" columnGap={{\n    xs: \"8vw\",\n    md: 10\n  }} data-sentry-element=\"Stack\" data-sentry-component=\"PlayersMetric\" data-sentry-source-file=\"playersMetric.tsx\">\r\n      <ValueBlock value={whiteValue} color=\"white\" data-sentry-element=\"ValueBlock\" data-sentry-source-file=\"playersMetric.tsx\" />\r\n\r\n      <Typography align=\"center\" fontSize=\"0.8em\" noWrap data-sentry-element=\"Typography\" data-sentry-source-file=\"playersMetric.tsx\">\r\n        {title}\r\n      </Typography>\r\n\r\n      <ValueBlock value={blackValue} color=\"black\" data-sentry-element=\"ValueBlock\" data-sentry-source-file=\"playersMetric.tsx\" />\r\n    </Stack>;\n}\nconst ValueBlock = ({\n  value,\n  color\n}: {\n  value: string | number;\n  color: \"white\" | \"black\";\n}) => {\n  return <Typography align=\"center\" sx={{\n    backgroundColor: color,\n    color: color === \"white\" ? \"black\" : \"white\"\n  }} borderRadius=\"5px\" lineHeight=\"1em\" fontSize=\"0.9em\" padding={0.8} fontWeight=\"500\" border=\"1px solid #424242\" noWrap data-sentry-element=\"Typography\" data-sentry-component=\"ValueBlock\" data-sentry-source-file=\"playersMetric.tsx\">\r\n      {value}\r\n    </Typography>;\n};","import { Box, BoxProps, Typography, TypographyProps, useTheme } from \"@mui/material\";\nimport localFont from \"next/font/local\";\nimport { useMemo } from \"react\";\nconst chessFont = localFont({\n  src: \"./chess_merida_unicode.ttf\"\n});\ninterface Props {\n  san: string;\n  color: \"w\" | \"b\";\n  additionalText?: string;\n  typographyProps?: TypographyProps;\n  boxProps?: BoxProps;\n}\nexport default function PrettyMoveSan({\n  san,\n  color,\n  additionalText,\n  typographyProps,\n  boxProps\n}: Props) {\n  const theme = useTheme();\n  const isDarkMode = theme.palette.mode === \"dark\";\n  const {\n    icon,\n    text\n  } = useMemo(() => {\n    const firstChar = san.charAt(0);\n    const isPiece = [\"K\", \"Q\", \"R\", \"B\", \"N\"].includes(firstChar);\n    if (!isPiece) return {\n      text: san\n    };\n    const pieceColor = isDarkMode ? color : color === \"w\" ? \"b\" : \"w\";\n    const icon = unicodeMap[firstChar][pieceColor];\n    return {\n      icon,\n      text: san.slice(1)\n    };\n  }, [san, color, isDarkMode]);\n  return <Box component=\"span\" {...boxProps} data-sentry-element=\"Box\" data-sentry-component=\"PrettyMoveSan\" data-sentry-source-file=\"index.tsx\">\r\n      {icon && <Typography component=\"span\" fontFamily={chessFont.style.fontFamily} {...typographyProps}>\r\n          {icon}\r\n        </Typography>}\r\n\r\n      <Typography component=\"span\" noWrap {...typographyProps} data-sentry-element=\"Typography\" data-sentry-source-file=\"index.tsx\">\r\n        {text}\r\n        {additionalText}\r\n      </Typography>\r\n    </Box>;\n}\nconst unicodeMap: Record<string, Record<\"w\" | \"b\", string>> = {\n  K: {\n    w: \"\",\n    b: \"\"\n  },\n  Q: {\n    w: \"\",\n    b: \"\"\n  },\n  R: {\n    w: \"\",\n    b: \"\"\n  },\n  B: {\n    w: \"\",\n    b: \"\"\n  },\n  N: {\n    w: \"\",\n    b: \"\"\n  }\n};","import { Skeleton, Stack, Typography } from \"@mui/material\";\nimport { useAtomValue } from \"jotai\";\nimport { boardAtom, currentPositionAtom } from \"../../states\";\nimport { useMemo } from \"react\";\nimport { moveLineUciToSan } from \"@/lib/chess\";\nimport { MoveClassification } from \"@/types/enums\";\nimport Image from \"next/image\";\nimport PrettyMoveSan from \"@/components/prettyMoveSan\";\nimport { BASE_PATH } from \"@/globals\";\nexport default function MoveInfo() {\n  const position = useAtomValue(currentPositionAtom);\n  const board = useAtomValue(boardAtom);\n  const bestMove = position?.lastEval?.bestMove;\n  const bestMoveSan = useMemo(() => {\n    if (!bestMove) return undefined;\n    const lastPosition = board.history({\n      verbose: true\n    }).at(-1)?.before;\n    if (!lastPosition) return undefined;\n    return moveLineUciToSan(lastPosition)(bestMove);\n  }, [bestMove, board]);\n  if (board.history().length === 0) return null;\n  if (!bestMoveSan) {\n    return <Stack direction=\"row\" alignItems=\"center\" columnGap={5} marginTop={0.8}>\r\n        <Skeleton variant=\"rounded\" animation=\"wave\" width={\"12em\"} sx={{\n        color: \"transparent\",\n        maxWidth: \"7vw\"\n      }}>\r\n          <Typography align=\"center\" fontSize=\"0.9rem\">\r\n            placeholder\r\n          </Typography>\r\n        </Skeleton>\r\n      </Stack>;\n  }\n  const moveClassification = position.eval?.moveClassification;\n  const showBestMoveLabel = moveClassification !== MoveClassification.Best && moveClassification !== MoveClassification.Opening && moveClassification !== MoveClassification.Forced && moveClassification !== MoveClassification.Splendid && moveClassification !== MoveClassification.Perfect;\n  return <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"center\" columnGap={4} marginTop={0.5} flexWrap=\"wrap\" data-sentry-element=\"Stack\" data-sentry-component=\"MoveInfo\" data-sentry-source-file=\"moveInfo.tsx\">\r\n      {moveClassification && <Stack direction=\"row\" alignItems=\"center\" spacing={1}>\r\n          <Image src={`${BASE_PATH}/icons/${moveClassification}.png`} alt=\"move-icon\" width={16} height={16} style={{\n        maxWidth: \"3.5vw\",\n        maxHeight: \"3.5vw\"\n      }} />\r\n\r\n          <PrettyMoveSan typographyProps={{\n        fontSize: \"0.9rem\"\n      }} san={position.lastMove?.san ?? \"\"} color={position.lastMove?.color ?? \"w\"} additionalText={\" is \" + moveClassificationLabels[moveClassification]} />\r\n        </Stack>}\r\n\r\n      {showBestMoveLabel && <Stack direction=\"row\" alignItems=\"center\" spacing={1}>\r\n          <Image src={`${BASE_PATH}/icons/best.png`} alt=\"move-icon\" width={16} height={16} style={{\n        maxWidth: \"3.5vw\",\n        maxHeight: \"3.5vw\"\n      }} />\r\n          <PrettyMoveSan typographyProps={{\n        fontSize: \"0.9rem\"\n      }} san={bestMoveSan} color={position.lastMove?.color ?? \"w\"} additionalText=\" was the best move\" />\r\n        </Stack>}\r\n    </Stack>;\n}\nconst moveClassificationLabels: Record<MoveClassification, string> = {\n  [MoveClassification.Opening]: \"an opening move\",\n  [MoveClassification.Forced]: \"forced\",\n  [MoveClassification.Splendid]: \"LUMINOUS !!!\",\n  [MoveClassification.Perfect]: \"the only good move !\",\n  [MoveClassification.Best]: \"the best move\",\n  [MoveClassification.Excellent]: \"excellent\",\n  [MoveClassification.Okay]: \"an okay move\",\n  [MoveClassification.Inaccuracy]: \"an inaccuracy\",\n  [MoveClassification.Mistake]: \"a mistake\",\n  [MoveClassification.Blunder]: \"a blunder\"\n};","import { useAtomValue } from \"jotai\";\nimport { Grid2 as Grid, Skeleton, Typography } from \"@mui/material\";\nimport { currentPositionAtom } from \"../../states\";\nexport default function Opening() {\n  const position = useAtomValue(currentPositionAtom);\n  const lastMove = position?.lastMove;\n  if (!lastMove) return null;\n  const opening = position?.eval?.opening || position.opening;\n  if (!opening) {\n    return <Grid justifyItems=\"center\" alignContent=\"center\">\r\n        <Skeleton variant=\"rounded\" animation=\"wave\" width={\"12em\"} sx={{\n        color: \"transparent\",\n        maxWidth: \"7vw\",\n        maxHeight: \"3.5vw\"\n      }}>\r\n          <Typography align=\"center\" fontSize=\"0.9rem\">\r\n            placeholder\r\n          </Typography>\r\n        </Skeleton>\r\n      </Grid>;\n  }\n  return <Grid data-sentry-element=\"Grid\" data-sentry-component=\"Opening\" data-sentry-source-file=\"opening.tsx\">\r\n      <Typography align=\"center\" fontSize=\"0.9rem\" maxWidth=\"20rem\" data-sentry-element=\"Typography\" data-sentry-source-file=\"opening.tsx\">\r\n        {opening}\r\n      </Typography>\r\n    </Grid>;\n}","import { LineEval } from \"@/types/eval\";\nimport { ListItem, Skeleton, Typography } from \"@mui/material\";\nimport { useAtomValue } from \"jotai\";\nimport { boardAtom } from \"../../../states\";\nimport { getLineEvalLabel, moveLineUciToSan } from \"@/lib/chess\";\nimport { useChessActions } from \"@/hooks/useChessActions\";\nimport PrettyMoveSan from \"@/components/prettyMoveSan\";\ninterface Props {\n  line: LineEval;\n}\nexport default function LineEvaluation({\n  line\n}: Props) {\n  const board = useAtomValue(boardAtom);\n  const {\n    addMoves\n  } = useChessActions(boardAtom);\n  const lineLabel = getLineEvalLabel(line);\n  const isBlackCp = line.cp !== undefined && line.cp < 0 || line.mate !== undefined && line.mate < 0;\n  const showSkeleton = line.depth < 6;\n  const uciToSan = moveLineUciToSan(board.fen());\n  const turn = board.turn();\n  const getColorFromMoveIdx = (moveIdx: number): \"w\" | \"b\" => {\n    const moveColor = moveIdx % 2 === 0 ? turn : turn === \"w\" ? \"b\" : \"w\";\n    return moveColor;\n  };\n  return <ListItem disablePadding data-sentry-element=\"ListItem\" data-sentry-component=\"LineEvaluation\" data-sentry-source-file=\"lineEvaluation.tsx\">\r\n      <Typography marginRight={1.5} marginY={0.3} paddingY={0.2} noWrap overflow=\"visible\" width=\"3.5em\" minWidth=\"3.5em\" textAlign=\"center\" fontSize=\"0.8rem\" sx={{\n      backgroundColor: isBlackCp ? \"black\" : \"white\",\n      color: isBlackCp ? \"white\" : \"black\"\n    }} borderRadius=\"5px\" border=\"1px solid #424242\" fontWeight=\"500\" data-sentry-element=\"Typography\" data-sentry-source-file=\"lineEvaluation.tsx\">\r\n        {showSkeleton ? <Skeleton variant=\"rounded\" animation=\"wave\" sx={{\n        color: \"transparent\"\n      }}>\r\n            placeholder\r\n          </Skeleton> : lineLabel}\r\n      </Typography>\r\n\r\n      <Typography noWrap fontSize=\"0.9rem\" data-sentry-element=\"Typography\" data-sentry-source-file=\"lineEvaluation.tsx\">\r\n        {showSkeleton ? <Skeleton variant=\"rounded\" animation=\"wave\" width=\"20em\" /> : line.pv.map((uci, i) => {\n        const san = uciToSan(uci);\n        const moveColor = getColorFromMoveIdx(i);\n        return <PrettyMoveSan key={i} san={san} color={moveColor} additionalText={i < line.pv.length - 1 ? \",\" : \"\"} boxProps={{\n          onClick: () => {\n            addMoves(line.pv.slice(0, i + 1));\n          },\n          sx: {\n            cursor: \"pointer\",\n            ml: i ? 0.5 : 0,\n            transition: \"opacity 0.2s ease-in-out\",\n            \"&:hover\": {\n              opacity: 0.5\n            }\n          }\n        }} />;\n      })}\r\n      </Typography>\r\n    </ListItem>;\n}","import { Grid2 as Grid, Grid2Props as GridProps, List } from \"@mui/material\";\nimport LineEvaluation from \"./lineEvaluation\";\nimport { boardAtom, currentPositionAtom, engineMultiPvAtom } from \"../../../states\";\nimport { useAtomValue } from \"jotai\";\nimport { LineEval } from \"@/types/eval\";\nexport default function EngineLines(props: GridProps) {\n  const board = useAtomValue(boardAtom);\n  const linesNumber = useAtomValue(engineMultiPvAtom);\n  const position = useAtomValue(currentPositionAtom);\n  const linesSkeleton: LineEval[] = Array.from({\n    length: linesNumber\n  }).map((_, i) => ({\n    pv: [`${i}`],\n    depth: 0,\n    multiPv: i + 1\n  }));\n  const engineLines = position?.eval?.lines?.length ? position.eval.lines : linesSkeleton;\n  if (board.isCheckmate()) return null;\n  return <Grid container justifyContent=\"center\" alignItems=\"center\" {...props} data-sentry-element=\"Grid\" data-sentry-component=\"EngineLines\" data-sentry-source-file=\"index.tsx\">\r\n      <List sx={{\n      width: \"95%\",\n      padding: 0\n    }} data-sentry-element=\"List\" data-sentry-source-file=\"index.tsx\">\r\n        {engineLines.map(line => <LineEvaluation key={line.multiPv} line={line} />)}\r\n      </List>\r\n    </Grid>;\n}","import { Grid2 as Grid, Grid2Props as GridProps, Stack, Typography } from \"@mui/material\";\nimport { useAtomValue } from \"jotai\";\nimport { boardAtom, gameAtom, gameEvalAtom } from \"../../states\";\nimport PlayersMetric from \"./playersMetric\";\nimport MoveInfo from \"./moveInfo\";\nimport Opening from \"./opening\";\nimport EngineLines from \"./engineLines\";\nexport default function AnalysisTab(props: GridProps) {\n  const gameEval = useAtomValue(gameEvalAtom);\n  const game = useAtomValue(gameAtom);\n  const board = useAtomValue(boardAtom);\n  const boardHistory = board.history();\n  const gameHistory = game.history();\n  const isGameOver = boardHistory.length > 0 && (board.isCheckmate() || board.isDraw() || boardHistory.join() === gameHistory.join());\n  return <Grid container size={12} justifyContent={{\n    xs: \"center\",\n    lg: gameEval ? \"start\" : \"center\"\n  }} alignItems=\"center\" flexWrap={{\n    lg: gameEval ? \"nowrap\" : undefined\n  }} gap={2} marginY={{\n    lg: gameEval ? 1 : undefined\n  }} paddingX={{\n    xs: 0,\n    lg: \"calc(4% - 2rem)\"\n  }} {...props} sx={props.hidden ? {\n    display: \"none\"\n  } : props.sx} data-sentry-element=\"Grid\" data-sentry-component=\"AnalysisTab\" data-sentry-source-file=\"index.tsx\">\r\n      <Stack justifyContent=\"center\" alignItems=\"center\" rowGap={1} minWidth={gameEval ? \"min(25rem, 95vw)\" : undefined} data-sentry-element=\"Stack\" data-sentry-source-file=\"index.tsx\">\r\n        {gameEval && <PlayersMetric title=\"Accuracy\" whiteValue={`${gameEval.accuracy.white.toFixed(1)} %`} blackValue={`${gameEval.accuracy.black.toFixed(1)} %`} />}\r\n\r\n        {gameEval?.estimatedElo && <PlayersMetric title=\"Game Rating\" whiteValue={Math.round(gameEval.estimatedElo.white)} blackValue={Math.round(gameEval.estimatedElo.black)} />}\r\n\r\n        <MoveInfo data-sentry-element=\"MoveInfo\" data-sentry-source-file=\"index.tsx\" />\r\n\r\n        <Opening data-sentry-element=\"Opening\" data-sentry-source-file=\"index.tsx\" />\r\n\r\n        {isGameOver && <Typography align=\"center\" fontSize=\"0.9rem\" noWrap>\r\n            Game is over\r\n          </Typography>}\r\n      </Stack>\r\n\r\n      <EngineLines size={{\n      lg: gameEval ? undefined : 12\n    }} data-sentry-element=\"EngineLines\" data-sentry-source-file=\"index.tsx\" />\r\n    </Grid>;\n}","import { MoveClassification } from \"@/types/enums\";\nimport { Grid2 as Grid } from \"@mui/material\";\nimport Image from \"next/image\";\nimport { useAtomValue } from \"jotai\";\nimport { boardAtom, currentPositionAtom, gameAtom } from \"../../../states\";\nimport { useChessActions } from \"@/hooks/useChessActions\";\nimport { useEffect } from \"react\";\nimport { isInViewport } from \"@/lib/helpers\";\nimport { CLASSIFICATION_COLORS } from \"@/constants\";\nimport PrettyMoveSan from \"@/components/prettyMoveSan\";\nimport { BASE_PATH } from \"@/globals\";\ninterface Props {\n  san: string;\n  moveClassification?: MoveClassification;\n  moveIdx: number;\n  moveColor: \"w\" | \"b\";\n}\nexport default function MoveItem({\n  san,\n  moveClassification,\n  moveIdx,\n  moveColor\n}: Props) {\n  const game = useAtomValue(gameAtom);\n  const board = useAtomValue(boardAtom);\n  const {\n    goToMove\n  } = useChessActions(boardAtom);\n  const position = useAtomValue(currentPositionAtom);\n  const color = getMoveColor(moveClassification);\n  const isCurrentMove = position?.currentMoveIdx === moveIdx;\n  useEffect(() => {\n    if (!isCurrentMove) return;\n    const moveItem = document.getElementById(`move-${moveIdx}`);\n    if (!moveItem) return;\n    const movePanel = document.getElementById(\"moves-panel\");\n    if (!movePanel || !isInViewport(movePanel)) return;\n    moveItem.scrollIntoView({\n      behavior: \"smooth\",\n      block: \"center\"\n    });\n  }, [isCurrentMove, moveIdx]);\n  const handleClick = () => {\n    if (isCurrentMove) return;\n    const gameToUse = game.moveNumber() > 1 ? game : board;\n    goToMove(moveIdx, gameToUse);\n  };\n  return <Grid container justifyContent=\"center\" alignItems=\"center\" gap={1} width=\"5rem\" wrap=\"nowrap\" onClick={handleClick} paddingY={0.5} sx={theme => ({\n    cursor: isCurrentMove ? undefined : \"pointer\",\n    backgroundColor: isCurrentMove && theme.palette.mode === \"dark\" ? \"#4f4f4f\" : undefined,\n    border: isCurrentMove && theme.palette.mode === \"light\" ? \"1px solid #424242\" : undefined,\n    borderRadius: 1\n  })} id={`move-${moveIdx}`} data-sentry-element=\"Grid\" data-sentry-component=\"MoveItem\" data-sentry-source-file=\"moveItem.tsx\">\r\n      {color && <Image src={`${BASE_PATH}/icons/${moveClassification}.png`} alt=\"move-icon\" width={14} height={14} style={{\n      maxWidth: \"3.5vw\",\n      maxHeight: \"3.5vw\"\n    }} />}\r\n\r\n      <PrettyMoveSan san={san} color={moveColor} typographyProps={{\n      fontSize: \"0.9rem\"\n    }} data-sentry-element=\"PrettyMoveSan\" data-sentry-source-file=\"moveItem.tsx\" />\r\n    </Grid>;\n}\nconst getMoveColor = (moveClassification?: MoveClassification) => {\n  if (!moveClassification || moveClassificationsToIgnore.includes(moveClassification)) {\n    return undefined;\n  }\n  return CLASSIFICATION_COLORS[moveClassification];\n};\nconst moveClassificationsToIgnore: MoveClassification[] = [MoveClassification.Okay, MoveClassification.Excellent, MoveClassification.Forced];","import { MoveClassification } from \"@/types/enums\";\nimport { Box, Grid2 as Grid, Typography } from \"@mui/material\";\nimport MoveItem from \"./moveItem\";\ninterface Props {\n  moves: {\n    san: string;\n    moveClassification?: MoveClassification;\n  }[];\n  moveNb: number;\n}\nexport default function MovesLine({\n  moves,\n  moveNb\n}: Props) {\n  return <Grid container justifyContent=\"space-evenly\" alignItems=\"center\" wrap=\"nowrap\" size={12} data-sentry-element=\"Grid\" data-sentry-component=\"MovesLine\" data-sentry-source-file=\"movesLine.tsx\">\r\n      <Typography width=\"2rem\" fontSize=\"0.9rem\" data-sentry-element=\"Typography\" data-sentry-source-file=\"movesLine.tsx\">\r\n        {moveNb}.\r\n      </Typography>\r\n\r\n      <MoveItem {...moves[0]} moveIdx={(moveNb - 1) * 2 + 1} moveColor=\"w\" data-sentry-element=\"MoveItem\" data-sentry-source-file=\"movesLine.tsx\" />\r\n\r\n      {moves[1] ? <MoveItem {...moves[1]} moveIdx={(moveNb - 1) * 2 + 2} moveColor=\"b\" /> : <Box width=\"5rem\" />}\r\n    </Grid>;\n}","import { Grid2 as Grid } from \"@mui/material\";\nimport MovesLine from \"./movesLine\";\nimport { useMemo } from \"react\";\nimport { useAtomValue } from \"jotai\";\nimport { boardAtom, gameAtom, gameEvalAtom } from \"../../../states\";\nimport { MoveClassification } from \"@/types/enums\";\nexport default function MovesPanel() {\n  const game = useAtomValue(gameAtom);\n  const board = useAtomValue(boardAtom);\n  const gameEval = useAtomValue(gameEvalAtom);\n  const gameMoves = useMemo(() => {\n    const gameHistory = game.history();\n    const boardHistory = board.history();\n    const history = gameHistory.length ? gameHistory : boardHistory;\n    if (!history.length) return undefined;\n    const moves: {\n      san: string;\n      moveClassification?: MoveClassification;\n    }[][] = [];\n    for (let i = 0; i < history.length; i += 2) {\n      const items = [{\n        san: history[i],\n        moveClassification: gameHistory.length ? gameEval?.positions[i + 1]?.moveClassification : undefined\n      }];\n      if (history[i + 1]) {\n        items.push({\n          san: history[i + 1],\n          moveClassification: gameHistory.length ? gameEval?.positions[i + 2]?.moveClassification : undefined\n        });\n      }\n      moves.push(items);\n    }\n    return moves;\n  }, [game, board, gameEval]);\n  if (!gameMoves?.length) return null;\n  return <Grid container justifyContent=\"center\" alignItems=\"start\" gap={0.5} paddingY={1} sx={{\n    scrollbarWidth: \"thin\",\n    overflowY: \"auto\"\n  }} maxHeight=\"100%\" size={6} id=\"moves-panel\" data-sentry-element=\"Grid\" data-sentry-component=\"MovesPanel\" data-sentry-source-file=\"index.tsx\">\r\n      {gameMoves?.map((moves, idx) => <MovesLine key={`${moves.map(({\n      san\n    }) => san).join()}-${idx}`} moves={moves} moveNb={idx + 1} />)}\r\n    </Grid>;\n}","import { Color, MoveClassification } from \"@/types/enums\";\nimport { Grid2 as Grid, Typography } from \"@mui/material\";\nimport { useAtomValue } from \"jotai\";\nimport { boardAtom, gameAtom, gameEvalAtom } from \"../../../states\";\nimport { useMemo } from \"react\";\nimport Image from \"next/image\";\nimport { capitalize } from \"@/lib/helpers\";\nimport { useChessActions } from \"@/hooks/useChessActions\";\nimport { CLASSIFICATION_COLORS } from \"@/constants\";\nimport { BASE_PATH } from \"@/globals\";\ninterface Props {\n  classification: MoveClassification;\n}\nexport default function ClassificationRow({\n  classification\n}: Props) {\n  const gameEval = useAtomValue(gameEvalAtom);\n  const board = useAtomValue(boardAtom);\n  const game = useAtomValue(gameAtom);\n  const {\n    goToMove\n  } = useChessActions(boardAtom);\n  const whiteNb = useMemo(() => {\n    if (!gameEval) return 0;\n    return gameEval.positions.filter((position, idx) => idx % 2 !== 0 && position.moveClassification === classification).length;\n  }, [gameEval, classification]);\n  const blackNb = useMemo(() => {\n    if (!gameEval) return 0;\n    return gameEval.positions.filter((position, idx) => idx % 2 === 0 && position.moveClassification === classification).length;\n  }, [gameEval, classification]);\n  const handleClick = (color: Color) => {\n    if (!gameEval || color === Color.White && !whiteNb || color === Color.Black && !blackNb) {\n      return;\n    }\n    const filterColor = (idx: number) => idx % 2 !== 0 && color === Color.White || idx % 2 === 0 && color === Color.Black;\n    const moveIdx = board.history().length;\n    const nextPositionIdx = gameEval.positions.findIndex((position, idx) => filterColor(idx) && position.moveClassification === classification && idx > moveIdx);\n    if (nextPositionIdx > 0) {\n      goToMove(nextPositionIdx, game);\n    } else {\n      const firstPositionIdx = gameEval.positions.findIndex((position, idx) => filterColor(idx) && position.moveClassification === classification);\n      if (firstPositionIdx > 0 && firstPositionIdx !== moveIdx) {\n        goToMove(firstPositionIdx, game);\n      }\n    }\n  };\n  return <Grid container justifyContent=\"space-evenly\" alignItems=\"center\" wrap=\"nowrap\" color={CLASSIFICATION_COLORS[classification]} size={12} data-sentry-element=\"Grid\" data-sentry-component=\"ClassificationRow\" data-sentry-source-file=\"classificationRow.tsx\">\r\n      <Grid container justifyContent=\"center\" alignItems=\"center\" width={\"3rem\"} style={{\n      cursor: whiteNb ? \"pointer\" : \"default\"\n    }} onClick={() => handleClick(Color.White)} fontSize=\"0.9rem\" data-sentry-element=\"Grid\" data-sentry-source-file=\"classificationRow.tsx\">\r\n        {whiteNb}\r\n      </Grid>\r\n\r\n      <Grid container justifyContent=\"start\" alignItems=\"center\" width={\"7rem\"} gap={1} wrap=\"nowrap\" data-sentry-element=\"Grid\" data-sentry-source-file=\"classificationRow.tsx\">\r\n        <Image src={`${BASE_PATH}/icons/${classification}.png`} alt=\"move-icon\" width={18} height={18} style={{\n        maxWidth: \"3.5vw\",\n        maxHeight: \"3.5vw\"\n      }} data-sentry-element=\"Image\" data-sentry-source-file=\"classificationRow.tsx\" />\r\n\r\n        <Typography align=\"center\" fontSize=\"0.9rem\" data-sentry-element=\"Typography\" data-sentry-source-file=\"classificationRow.tsx\">\r\n          {capitalize(classification)}\r\n        </Typography>\r\n      </Grid>\r\n\r\n      <Grid container justifyContent=\"center\" alignItems=\"center\" width={\"3rem\"} style={{\n      cursor: blackNb ? \"pointer\" : \"default\"\n    }} onClick={() => handleClick(Color.Black)} fontSize=\"0.9rem\" data-sentry-element=\"Grid\" data-sentry-source-file=\"classificationRow.tsx\">\r\n        {blackNb}\r\n      </Grid>\r\n    </Grid>;\n}","import { usePlayersData } from \"@/hooks/usePlayersData\";\nimport { Grid2 as Grid, Typography } from \"@mui/material\";\nimport { gameAtom, gameEvalAtom } from \"../../../states\";\nimport { MoveClassification } from \"@/types/enums\";\nimport ClassificationRow from \"./classificationRow\";\nimport { useAtomValue } from \"jotai\";\nexport default function MovesClassificationsRecap() {\n  const {\n    white,\n    black\n  } = usePlayersData(gameAtom);\n  const gameEval = useAtomValue(gameEvalAtom);\n  if (!gameEval?.positions.length) return null;\n  return <Grid container justifyContent=\"center\" alignItems=\"center\" rowGap={0.7} sx={{\n    scrollbarWidth: \"thin\",\n    overflowY: \"auto\"\n  }} height=\"100%\" maxHeight=\"22rem\" size={6} data-sentry-element=\"Grid\" data-sentry-component=\"MovesClassificationsRecap\" data-sentry-source-file=\"index.tsx\">\r\n      <Grid container alignItems=\"center\" justifyContent=\"space-evenly\" wrap=\"nowrap\" size={12} data-sentry-element=\"Grid\" data-sentry-source-file=\"index.tsx\">\r\n        <Typography width=\"12rem\" align=\"center\" noWrap fontSize=\"0.9rem\" data-sentry-element=\"Typography\" data-sentry-source-file=\"index.tsx\">\r\n          {white.name}\r\n        </Typography>\r\n\r\n        <Typography width=\"7rem\" data-sentry-element=\"Typography\" data-sentry-source-file=\"index.tsx\" />\r\n\r\n        <Typography width=\"12rem\" align=\"center\" noWrap fontSize=\"0.9rem\" data-sentry-element=\"Typography\" data-sentry-source-file=\"index.tsx\">\r\n          {black.name}\r\n        </Typography>\r\n      </Grid>\r\n\r\n      {sortedMoveClassfications.map(classification => <ClassificationRow key={classification} classification={classification} />)}\r\n    </Grid>;\n}\nexport const sortedMoveClassfications = [MoveClassification.Splendid, MoveClassification.Perfect, MoveClassification.Best, MoveClassification.Excellent, MoveClassification.Okay, MoveClassification.Opening, MoveClassification.Inaccuracy, MoveClassification.Mistake, MoveClassification.Blunder];","import { Grid2 as Grid, Grid2Props as GridProps } from \"@mui/material\";\nimport MovesPanel from \"./movesPanel\";\nimport MovesClassificationsRecap from \"./movesClassificationsRecap\";\nexport default function ClassificationTab(props: GridProps) {\n  return <Grid container justifyContent=\"center\" alignItems=\"start\" size={12} flexGrow={1} {...props} sx={props.hidden ? {\n    display: \"none\"\n  } : {\n    overflow: \"hidden\",\n    ...props.sx\n  }} data-sentry-element=\"Grid\" data-sentry-component=\"ClassificationTab\" data-sentry-source-file=\"index.tsx\">\r\n      <MovesPanel data-sentry-element=\"MovesPanel\" data-sentry-source-file=\"index.tsx\" />\r\n\r\n      <MovesClassificationsRecap data-sentry-element=\"MovesClassificationsRecap\" data-sentry-source-file=\"index.tsx\" />\r\n    </Grid>;\n}","import { Checkbox, FormControlLabel, Grid2 as Grid } from \"@mui/material\";\nimport { showBestMoveArrowAtom, showPlayerMoveIconAtom } from \"../analysis/states\";\nimport { useAtomLocalStorage } from \"@/hooks/useAtomLocalStorage\";\nexport default function ArrowOptions() {\n  const [showBestMove, setShowBestMove] = useAtomLocalStorage(\"show-arrow-best-move\", showBestMoveArrowAtom);\n  const [showPlayerMoveIcon, setShowPlayerMoveIcon] = useAtomLocalStorage(\"show-icon-player-move\", showPlayerMoveIconAtom);\n  return <Grid container justifyContent=\"space-evenly\" alignItems=\"center\" size={12} gap={3} data-sentry-element=\"Grid\" data-sentry-component=\"ArrowOptions\" data-sentry-source-file=\"arrowOptions.tsx\">\r\n      <FormControlLabel control={<Checkbox checked={showBestMove} onChange={(_, checked) => setShowBestMove(checked)} />} label=\"Show engine best move arrow\" sx={{\n      marginX: 0\n    }} data-sentry-element=\"FormControlLabel\" data-sentry-source-file=\"arrowOptions.tsx\" />\r\n      <FormControlLabel control={<Checkbox checked={showPlayerMoveIcon} onChange={(_, checked) => setShowPlayerMoveIcon(checked)} />} label=\"Show played move icon\" sx={{\n      marginX: 0\n    }} data-sentry-element=\"FormControlLabel\" data-sentry-source-file=\"arrowOptions.tsx\" />\r\n    </Grid>;\n}","import Slider from \"@/components/slider\";\nimport { EngineName } from \"@/types/enums\";\nimport { MenuItem, Select, Button, Dialog, DialogTitle, DialogContent, FormControl, InputLabel, OutlinedInput, DialogActions, Typography, Grid2 as Grid, Box, useTheme } from \"@mui/material\";\nimport { engineNameAtom, engineDepthAtom, engineMultiPvAtom, engineWorkersNbAtom } from \"../analysis/states\";\nimport ArrowOptions from \"./arrowOptions\";\nimport { useAtomLocalStorage } from \"@/hooks/useAtomLocalStorage\";\nimport { useEffect } from \"react\";\nimport { isEngineSupported } from \"@/lib/engine/shared\";\nimport { Stockfish16_1 } from \"@/lib/engine/stockfish16_1\";\nimport { useAtom } from \"jotai\";\nimport { boardHueAtom, pieceSetAtom } from \"@/components/board/states\";\nimport Image from \"next/image\";\nimport { DEFAULT_ENGINE, ENGINE_LABELS, PIECE_SETS, STRONGEST_ENGINE } from \"@/constants\";\nimport { getRecommendedWorkersNb } from \"@/lib/engine/worker\";\nimport { BASE_PATH } from \"@/globals\";\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n}\nexport default function EngineSettingsDialog({\n  open,\n  onClose\n}: Props) {\n  const [depth, setDepth] = useAtomLocalStorage(\"engine-depth\", engineDepthAtom);\n  const [multiPv, setMultiPv] = useAtomLocalStorage(\"engine-multi-pv\", engineMultiPvAtom);\n  const [engineName, setEngineName] = useAtomLocalStorage(\"engine-name\", engineNameAtom);\n  const [boardHue, setBoardHue] = useAtom(boardHueAtom);\n  const [pieceSet, setPieceSet] = useAtom(pieceSetAtom);\n  const [engineWorkersNb, setEngineWorkersNb] = useAtom(engineWorkersNbAtom);\n  const theme = useTheme();\n  const isDarkMode = theme.palette.mode === \"dark\";\n  useEffect(() => {\n    if (!isEngineSupported(engineName)) {\n      if (Stockfish16_1.isSupported()) {\n        setEngineName(EngineName.Stockfish16_1Lite);\n      } else {\n        setEngineName(EngineName.Stockfish11);\n      }\n    }\n  }, [setEngineName, engineName]);\n  return <Dialog open={open} onClose={onClose} maxWidth=\"md\" fullWidth data-sentry-element=\"Dialog\" data-sentry-component=\"EngineSettingsDialog\" data-sentry-source-file=\"engineSettingsDialog.tsx\">\r\n      <DialogTitle variant=\"h5\" sx={{\n      paddingBottom: 1\n    }} data-sentry-element=\"DialogTitle\" data-sentry-source-file=\"engineSettingsDialog.tsx\">\r\n        Settings\r\n      </DialogTitle>\r\n      <DialogContent sx={{\n      paddingBottom: 0\n    }} data-sentry-element=\"DialogContent\" data-sentry-source-file=\"engineSettingsDialog.tsx\">\r\n        <Grid container justifyContent=\"center\" alignItems=\"center\" paddingTop={1} spacing={3} size={12} data-sentry-element=\"Grid\" data-sentry-source-file=\"engineSettingsDialog.tsx\">\r\n          <Grid container justifyContent=\"center\" size={{\n          xs: 12,\n          sm: 7,\n          md: 8\n        }} data-sentry-element=\"Grid\" data-sentry-source-file=\"engineSettingsDialog.tsx\">\r\n            <Typography variant=\"body2\" data-sentry-element=\"Typography\" data-sentry-source-file=\"engineSettingsDialog.tsx\">\r\n              {ENGINE_LABELS[DEFAULT_ENGINE].small} is the default engine if\r\n              your device support its requirements. It offers the best balance\r\n              between speed and strength.{\" \"}\r\n              {ENGINE_LABELS[STRONGEST_ENGINE].small} is the strongest engine\r\n              available, note that it requires a one time download of{\" \"}\r\n              {ENGINE_LABELS[STRONGEST_ENGINE].sizeMb}MB and is much more\r\n              compute intensive.\r\n            </Typography>\r\n          </Grid>\r\n\r\n          <Grid container justifyContent=\"center\" size={{\n          xs: 12,\n          sm: 5,\n          md: 4\n        }} data-sentry-element=\"Grid\" data-sentry-source-file=\"engineSettingsDialog.tsx\">\r\n            <FormControl variant=\"outlined\" data-sentry-element=\"FormControl\" data-sentry-source-file=\"engineSettingsDialog.tsx\">\r\n              <InputLabel id=\"dialog-select-label\" data-sentry-element=\"InputLabel\" data-sentry-source-file=\"engineSettingsDialog.tsx\">Engine</InputLabel>\r\n              <Select labelId=\"dialog-select-label\" id=\"dialog-select\" displayEmpty input={<OutlinedInput label=\"Engine\" />} value={engineName} onChange={e => setEngineName(e.target.value as EngineName)} sx={{\n              width: 280,\n              maxWidth: \"100%\"\n            }} data-sentry-element=\"Select\" data-sentry-source-file=\"engineSettingsDialog.tsx\">\r\n                {Object.values(EngineName).map(engine => <MenuItem key={engine} value={engine} disabled={!isEngineSupported(engine)}>\r\n                    {ENGINE_LABELS[engine].full}\r\n                  </MenuItem>)}\r\n              </Select>\r\n            </FormControl>\r\n          </Grid>\r\n\r\n          <Slider label=\"Maximum depth\" value={depth} setValue={setDepth} min={10} max={30} marksFilter={2} data-sentry-element=\"Slider\" data-sentry-source-file=\"engineSettingsDialog.tsx\" />\r\n\r\n          <Slider label=\"Number of lines\" value={multiPv} setValue={setMultiPv} min={2} max={6} marksFilter={1} size={6} data-sentry-element=\"Slider\" data-sentry-source-file=\"engineSettingsDialog.tsx\" />\r\n\r\n          <ArrowOptions data-sentry-element=\"ArrowOptions\" data-sentry-source-file=\"engineSettingsDialog.tsx\" />\r\n\r\n          <Grid container justifyContent=\"center\" size={{\n          xs: 12,\n          sm: 8,\n          md: 9\n        }} data-sentry-element=\"Grid\" data-sentry-source-file=\"engineSettingsDialog.tsx\">\r\n            <Slider label=\"Board hue\" value={boardHue} setValue={setBoardHue} min={0} max={360} data-sentry-element=\"Slider\" data-sentry-source-file=\"engineSettingsDialog.tsx\" />\r\n          </Grid>\r\n\r\n          <Grid container justifyContent=\"center\" alignItems=\"center\" size={{\n          xs: 12,\n          sm: 4,\n          md: 3\n        }} data-sentry-element=\"Grid\" data-sentry-source-file=\"engineSettingsDialog.tsx\">\r\n            <FormControl variant=\"outlined\" data-sentry-element=\"FormControl\" data-sentry-source-file=\"engineSettingsDialog.tsx\">\r\n              <InputLabel id=\"dialog-select-label\" data-sentry-element=\"InputLabel\" data-sentry-source-file=\"engineSettingsDialog.tsx\">Piece set</InputLabel>\r\n              <Select labelId=\"dialog-select-label\" id=\"dialog-select\" displayEmpty input={<OutlinedInput label=\"Piece set\" />} value={pieceSet} onChange={e => setPieceSet(e.target.value as (typeof PIECE_SETS)[number])} sx={{\n              width: 200,\n              maxWidth: \"100%\"\n            }} data-sentry-element=\"Select\" data-sentry-source-file=\"engineSettingsDialog.tsx\">\r\n                {PIECE_SETS.map(name => <MenuItem key={name} value={name}>\r\n                    <Box sx={{\n                  display: \"flex\",\n                  alignItems: \"center\",\n                  gap: 1\n                }}>\r\n                      <Image loading=\"lazy\" src={`${BASE_PATH}/piece/${name}/${isDarkMode ? \"w\" : \"b\"}N.svg`} alt={`${name} knight`} width={24} height={24} />\r\n                      {name}\r\n                    </Box>\r\n                  </MenuItem>)}\r\n              </Select>\r\n            </FormControl>\r\n          </Grid>\r\n\r\n          <Grid container justifyContent=\"center\" alignItems=\"center\" size={{\n          xs: 12,\n          md: 11\n        }} data-sentry-element=\"Grid\" data-sentry-source-file=\"engineSettingsDialog.tsx\">\r\n            <Slider label=\"Number of threads\" value={engineWorkersNb} setValue={setEngineWorkersNb} min={1} max={12} marksFilter={1} infoContent={<>\r\n                  More threads means faster analysis, but only if your device\r\n                  can handle them, otherwise it may have the opposite effect.\r\n                  The estimated optimal value for your device is{\" \"}\r\n                  {getRecommendedWorkersNb()}. Due to privacy restrictions in\r\n                  some browsers, this value might be underestimated. Don't\r\n                  hesitate to try different values to find the best one for your\r\n                  device.\r\n                </>} data-sentry-element=\"Slider\" data-sentry-source-file=\"engineSettingsDialog.tsx\" />\r\n          </Grid>\r\n        </Grid>\r\n      </DialogContent>\r\n      <DialogActions sx={{\n      m: 1\n    }} data-sentry-element=\"DialogActions\" data-sentry-source-file=\"engineSettingsDialog.tsx\">\r\n        <Button variant=\"contained\" onClick={onClose} data-sentry-element=\"Button\" data-sentry-source-file=\"engineSettingsDialog.tsx\">\r\n          Close\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>;\n}","import { Fab } from \"@mui/material\";\nimport { useState } from \"react\";\nimport EngineSettingsDialog from \"./engineSettingsDialog\";\nimport { Icon } from \"@iconify/react\";\nexport default function EngineSettingsButton() {\n  const [openDialog, setOpenDialog] = useState(false);\n  return <>\r\n      <Fab title=\"Engine settings\" color=\"secondary\" size=\"small\" sx={{\n      top: \"auto\",\n      right: 16,\n      bottom: 16,\n      left: \"auto\",\n      position: \"fixed\"\n    }} onClick={() => setOpenDialog(true)} data-sentry-element=\"Fab\" data-sentry-source-file=\"engineSettingsButton.tsx\">\r\n        <Icon icon=\"mdi:settings\" height={20} data-sentry-element=\"Icon\" data-sentry-source-file=\"engineSettingsButton.tsx\" />\r\n      </Fab>\r\n\r\n      <EngineSettingsDialog open={openDialog} onClose={() => setOpenDialog(false)} data-sentry-element=\"EngineSettingsDialog\" data-sentry-source-file=\"engineSettingsButton.tsx\" />\r\n    </>;\n}","import { TooltipProps } from \"recharts\";\nimport { ChartItemData } from \"./types\";\nimport { getLineEvalLabel } from \"@/lib/chess\";\nexport default function CustomTooltip({\n  active,\n  payload\n}: TooltipProps<number, number>) {\n  if (!active || !payload?.length) return null;\n  const data = payload[0].payload as ChartItemData;\n  return <div style={{\n    backgroundColor: \"#f0f0f0\",\n    padding: 5,\n    color: \"black\",\n    opacity: 0.9,\n    border: \"1px solid black\",\n    borderRadius: 3\n  }} data-sentry-component=\"CustomTooltip\" data-sentry-source-file=\"tooltip.tsx\">\r\n      {getLineEvalLabel(data)}\r\n    </div>;\n}","import { DotProps } from \"recharts\";\nimport { ChartItemData } from \"./types\";\nimport { CLASSIFICATION_COLORS } from \"@/constants\";\nexport default function CustomDot({\n  cx,\n  cy,\n  r,\n  payload\n}: DotProps & {\n  payload?: ChartItemData;\n}) {\n  const moveColor = payload?.moveClassification ? CLASSIFICATION_COLORS[payload.moveClassification] : \"grey\";\n  return <circle cx={cx} cy={cy} r={r} stroke={moveColor} strokeWidth={5} fill={moveColor} fillOpacity={1} data-sentry-element=\"circle\" data-sentry-component=\"CustomDot\" data-sentry-source-file=\"dot.tsx\" />;\n}","import { Box, Grid2 as Grid, Grid2Props as GridProps } from \"@mui/material\";\nimport { useAtomValue } from \"jotai\";\nimport { Area, AreaChart, ReferenceLine, ResponsiveContainer, Tooltip, XAxis, YAxis } from \"recharts\";\nimport type { DotProps } from \"recharts\";\nimport { boardAtom, currentPositionAtom, gameAtom, gameEvalAtom } from \"../../states\";\nimport { useCallback, useMemo } from \"react\";\nimport type { ReactElement } from \"react\";\nimport CustomTooltip from \"./tooltip\";\nimport { ChartItemData } from \"./types\";\nimport { PositionEval } from \"@/types/eval\";\nimport { CLASSIFICATION_COLORS } from \"@/constants\";\nimport CustomDot from \"./dot\";\nimport { MoveClassification } from \"@/types/enums\";\nimport { useChessActions } from \"@/hooks/useChessActions\";\nexport default function GraphTab(props: GridProps) {\n  const gameEval = useAtomValue(gameEvalAtom);\n  const currentPosition = useAtomValue(currentPositionAtom);\n  const {\n    goToMove\n  } = useChessActions(boardAtom);\n  const game = useAtomValue(gameAtom);\n  const chartData: ChartItemData[] = useMemo(() => gameEval?.positions.map(formatEvalToChartData) ?? [], [gameEval]);\n  const bestDotIndices = useMemo(() => {\n    const bestItems = chartData.filter(item => item.moveClassification === MoveClassification.Best);\n    const count = Math.ceil(bestItems.length * 0.15);\n    const indices = bestItems.map(item => item.moveNb);\n    for (let i = indices.length - 1; i > 0; i--) {\n      const j = Math.floor(Math.random() * (i + 1));\n      [indices[i], indices[j]] = [indices[j], indices[i]];\n    }\n    return new Set(indices.slice(0, count));\n  }, [chartData]);\n  const boardMoveColor = currentPosition.eval?.moveClassification ? CLASSIFICATION_COLORS[currentPosition.eval.moveClassification] : \"grey\";\n\n  // Render a dot only on selected classifications (always returns an element)\n  const renderDot = useCallback((props: DotProps & {\n    payload?: ChartItemData;\n  }): ReactElement<SVGElement> => {\n    const payload = props.payload;\n    const moveClass = payload?.moveClassification;\n    if (!moveClass) return <svg key={props.key} />;\n    if ([MoveClassification.Splendid, MoveClassification.Perfect, MoveClassification.Blunder, MoveClassification.Mistake].includes(moveClass) || moveClass === MoveClassification.Best && bestDotIndices.has(payload.moveNb)) {\n      return <CustomDot {...props} key={props.key} payload={payload} />;\n    }\n    return <svg key={props.key} />;\n  }, [bestDotIndices]);\n  if (!gameEval) return null;\n  return <Grid container justifyContent=\"center\" alignItems=\"center\" minHeight=\"min(10rem, 8vh)\" height={{\n    xs: \"8rem\",\n    lg: \"none\"\n  }} maxHeight=\"10rem\" {...props} sx={props.hidden ? {\n    display: \"none\"\n  } : props.sx} size={12} data-sentry-element=\"Grid\" data-sentry-component=\"GraphTab\" data-sentry-source-file=\"index.tsx\">\r\n      <Box height=\"100%\" width={{\n      xs: \"100%\",\n      lg: \"90%\"\n    }} sx={{\n      backgroundColor: \"#2e2e2e\",\n      borderRadius: \"15px\",\n      overflow: \"hidden\"\n    }} data-sentry-element=\"Box\" data-sentry-source-file=\"index.tsx\">\r\n        <ResponsiveContainer width=\"100%\" height=\"100%\" data-sentry-element=\"ResponsiveContainer\" data-sentry-source-file=\"index.tsx\">\r\n          <AreaChart width={500} height={400} data={chartData} margin={{\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0\n        }} onClick={e => {\n          const payload = e?.activePayload?.[0]?.payload as ChartItemData | undefined;\n          if (!payload) return;\n          goToMove(payload.moveNb, game);\n        }} style={{\n          cursor: \"pointer\"\n        }} data-sentry-element=\"AreaChart\" data-sentry-source-file=\"index.tsx\">\r\n            <XAxis dataKey=\"moveNb\" hide stroke=\"red\" data-sentry-element=\"XAxis\" data-sentry-source-file=\"index.tsx\" />\r\n            <YAxis domain={[0, 20]} hide data-sentry-element=\"YAxis\" data-sentry-source-file=\"index.tsx\" />\r\n            <Tooltip content={<CustomTooltip />} isAnimationActive={false} cursor={{\n            stroke: \"grey\",\n            strokeWidth: 2,\n            strokeOpacity: 0.3\n          }} data-sentry-element=\"Tooltip\" data-sentry-source-file=\"index.tsx\" />\r\n            <Area type=\"monotone\" dataKey=\"value\" stroke=\"none\" fill=\"#ffffff\" fillOpacity={1} dot={renderDot} activeDot={<CustomDot />} isAnimationActive={false} data-sentry-element=\"Area\" data-sentry-source-file=\"index.tsx\" />\r\n            <ReferenceLine y={10} stroke=\"grey\" strokeWidth={2} strokeOpacity={0.4} data-sentry-element=\"ReferenceLine\" data-sentry-source-file=\"index.tsx\" />\r\n            <ReferenceLine x={currentPosition.currentMoveIdx} stroke={boardMoveColor} strokeWidth={4} strokeOpacity={0.6} data-sentry-element=\"ReferenceLine\" data-sentry-source-file=\"index.tsx\" />\r\n          </AreaChart>\r\n        </ResponsiveContainer>\r\n      </Box>\r\n    </Grid>;\n}\nconst formatEvalToChartData = (position: PositionEval, index: number): ChartItemData => {\n  const line = position.lines[0];\n  const chartItem: ChartItemData = {\n    moveNb: index,\n    value: 10,\n    cp: line.cp,\n    mate: line.mate,\n    moveClassification: position.moveClassification\n  };\n  if (line.mate) {\n    return {\n      ...chartItem,\n      value: line.mate > 0 ? 20 : 0\n    };\n  }\n  if (line.cp) {\n    return {\n      ...chartItem,\n      value: Math.max(Math.min(line.cp / 100, 10), -10) + 10\n    };\n  }\n  return chartItem;\n};","import Board from \"@/sections/analysis/board\";\nimport PanelHeader from \"@/sections/analysis/panelHeader\";\nimport PanelToolBar from \"@/sections/analysis/panelToolbar\";\nimport AnalysisTab from \"@/sections/analysis/panelBody/analysisTab\";\nimport ClassificationTab from \"@/sections/analysis/panelBody/classificationTab\";\nimport { boardAtom, gameAtom, gameEvalAtom } from \"@/sections/analysis/states\";\nimport { Box, Divider, Grid2 as Grid, Tab, Tabs, useMediaQuery, useTheme } from \"@mui/material\";\nimport { useAtomValue } from \"jotai\";\nimport { useEffect, useState } from \"react\";\nimport { Icon } from \"@iconify/react\";\nimport EngineSettingsButton from \"@/sections/engineSettings/engineSettingsButton\";\nimport GraphTab from \"@/sections/analysis/panelBody/graphTab\";\nimport { PageTitle } from \"@/components/pageTitle\";\nexport default function GameAnalysis() {\n  const theme = useTheme();\n  const [tab, setTab] = useState(0);\n  const isLgOrGreater = useMediaQuery(theme.breakpoints.up(\"lg\"));\n  const gameEval = useAtomValue(gameEvalAtom);\n  const game = useAtomValue(gameAtom);\n  const board = useAtomValue(boardAtom);\n  const showMovesTab = game.history().length > 0 || board.history().length > 0;\n  useEffect(() => {\n    if (tab === 1 && !showMovesTab) setTab(0);\n    if (tab === 2 && !gameEval) setTab(0);\n  }, [showMovesTab, gameEval, tab]);\n  return <Grid container gap={4} justifyContent=\"space-evenly\" alignItems=\"start\" data-sentry-element=\"Grid\" data-sentry-component=\"GameAnalysis\" data-sentry-source-file=\"index.tsx\">\r\n      <PageTitle title=\"CHONSE\" data-sentry-element=\"PageTitle\" data-sentry-source-file=\"index.tsx\" />\r\n\r\n      <Board data-sentry-element=\"Board\" data-sentry-source-file=\"index.tsx\" />\r\n\r\n      <Grid container justifyContent=\"start\" alignItems=\"center\" borderRadius={2} border={1} borderColor={\"secondary.main\"} sx={{\n      backgroundColor: \"secondary.main\",\n      borderColor: \"primary.main\",\n      borderWidth: 2,\n      boxShadow: \"0 2px 10px rgba(0, 0, 0, 0.5)\"\n    }} padding={2} style={{\n      maxWidth: \"1200px\"\n    }} rowGap={2} height={{\n      xs: tab === 1 ? \"40rem\" : \"auto\",\n      lg: \"calc(95vh - 60px)\"\n    }} display=\"flex\" flexDirection=\"column\" flexWrap=\"nowrap\" size={{\n      xs: 12,\n      lg: \"grow\"\n    }} data-sentry-element=\"Grid\" data-sentry-source-file=\"index.tsx\">\r\n        {isLgOrGreater ? <Box width=\"100%\">\r\n            <PanelHeader key=\"analysis-panel-header\" />\r\n            <Divider sx={{\n          marginX: \"5%\",\n          marginTop: 2.5\n        }} />\r\n          </Box> : <PanelToolBar key=\"review-panel-toolbar\" />}\r\n\r\n        {!isLgOrGreater && !gameEval && <Divider sx={{\n        marginX: \"5%\"\n      }} />}\r\n        {!isLgOrGreater && !gameEval && <PanelHeader key=\"analysis-panel-header\" />}\r\n\r\n        {!isLgOrGreater && <Box width=\"95%\" sx={{\n        borderBottom: 1,\n        borderColor: \"divider\",\n        marginX: {\n          sm: \"5%\",\n          xs: undefined\n        }\n      }}>\r\n            <Tabs value={tab} onChange={(_, newValue) => setTab(newValue)} aria-label=\"basic tabs example\" variant=\"fullWidth\" sx={{\n          minHeight: 0\n        }}>\r\n              <Tab label=\"Analysis\" id=\"tab0\" icon={<Icon icon=\"mdi:magnify\" height={15} />} iconPosition=\"start\" sx={{\n            textTransform: \"none\",\n            minHeight: 15,\n            padding: \"5px 0em 12px\"\n          }} disableFocusRipple />\r\n\r\n              <Tab label=\"Moves\" id=\"tab1\" icon={<Icon icon=\"mdi:format-list-bulleted\" height={15} />} iconPosition=\"start\" sx={{\n            textTransform: \"none\",\n            minHeight: 15,\n            display: showMovesTab ? undefined : \"none\",\n            padding: \"5px 0em 12px\"\n          }} disableFocusRipple />\r\n\r\n              <Tab label=\"Graph\" id=\"tab2\" icon={<Icon icon=\"mdi:chart-line\" height={15} />} iconPosition=\"start\" sx={{\n            textTransform: \"none\",\n            minHeight: 15,\n            display: gameEval ? undefined : \"none\",\n            padding: \"5px 0em 12px\"\n          }} disableFocusRipple />\r\n            </Tabs>\r\n          </Box>}\r\n\r\n        <GraphTab role=\"tabpanel\" hidden={tab !== 2 && !isLgOrGreater} id=\"tabContent2\" data-sentry-element=\"GraphTab\" data-sentry-source-file=\"index.tsx\" />\r\n\r\n        <AnalysisTab role=\"tabpanel\" hidden={tab !== 0 && !isLgOrGreater} id=\"tabContent0\" data-sentry-element=\"AnalysisTab\" data-sentry-source-file=\"index.tsx\" />\r\n\r\n        <ClassificationTab role=\"tabpanel\" hidden={tab !== 1 && !isLgOrGreater} id=\"tabContent1\" data-sentry-element=\"ClassificationTab\" data-sentry-source-file=\"index.tsx\" />\r\n\r\n        {isLgOrGreater && <Box width=\"100%\">\r\n            <Divider sx={{\n          marginX: \"5%\",\n          marginBottom: 1.5\n        }} />\r\n            <PanelToolBar key=\"review-panel-toolbar\" />\r\n          </Box>}\r\n\r\n        {!isLgOrGreater && gameEval && <Box width=\"100%\">\r\n            <Divider sx={{\n          marginX: \"5%\",\n          marginBottom: 2.5\n        }} />\r\n            <PanelHeader key=\"analysis-panel-header\" />\r\n          </Box>}\r\n      </Grid>\r\n\r\n      <EngineSettingsButton data-sentry-element=\"EngineSettingsButton\" data-sentry-source-file=\"index.tsx\" />\r\n    </Grid>;\n}"],"names":["BoardContainer","screenSize","useScreenSize","boardOrientation","useAtomValue","boardOrientationAtom","showBestMoveArrow","showBestMoveArrowAtom","white","black","usePlayersData","gameAtom","boardSize","useMemo","window","width","height","innerWidth","Math","min","Board","id","canPlay","boardAtom","whitePlayer","blackPlayer","Color","White","Black","currentPositionAtom","showPlayerMoveIconAtom","showEvaluationBar","data-sentry-element","data-sentry-component","data-sentry-source-file","GamePanel","gameFromUrl","useGameDatabase","gameHeaders","game","getHeaders","hasGameInfo","undefined","termination","Termination","result","split","length","Result","Grid","container","justifyContent","alignItems","rowGap","columnGap","size","Typography","noWrap","fontSize","site","Site","date","Date","LoadGame","router","useRouter","setPgn","setGamePgn","useChessActions","resetToStartingPosition","resetBoard","setEval","useSetAtom","gameEvalAtom","setBoardOrientation","evaluationProgress","evaluationProgressAtom","joinedGameHistory","history","join","resetAndSetGamePgn","useCallback","pgn","orientation","gameEval","gameFromPgn","Chess","loadPgn","lichessGameId","orientationParam","query","useEffect","handleLichess","res","fetchLichessGame","name","eval","eventHandler","event","data","error","console","addEventListener","removeEventListener","isGameLoaded","LoadGameButton","label","setGame","replace","pathname","shallow","scroll","useCurrentPosition","engine","currentPosition","setCurrentPosition","useAtom","board","depth","engineDepthAtom","multiPv","engineMultiPvAtom","savedEvals","setSavedEvals","savedEvalsAtom","position","boardHistory","verbose","lastMove","at","gameHistory","slice","map","m","san","currentMoveIdx","evalIndex","positions","lines","lastEval","opening","move","reverse","moveFen","after","openings","find","fen","getIsReady","isCheckmate","isStalemate","getFenEngineEval","setPartialEval","savedEval","positionEval","rawPositionEval","evaluatePositionWithUpdate","prev","getPositionEval","params","getEvaluateGameParams","fens","turn","uciMoves","lastRawEval","rawPositions","_","idx","pv","cp","positionsWithMoveClassification","getMovesClassification","stopAllCurrentJobs","AnalyzeButton","engineName","engineNameAtom","useEngine","engineWorkersNb","engineWorkersNbAtom","setEvaluationProgress","engineDepth","engineMultiPv","setGameEval","readyToAnalyse","handleAnalyze","newGameEval","evaluateGame","playersRatings","rating","workersNb","gameSavedEvals","reduce","acc","logAnalyticsEvent","nbPositions","LoadingButton","variant","startIcon","Icon","icon","onClick","disabled","fontWeight","lineHeight","props","value","LinearProgressBar","wrap","align","sx","LinearProgress","theme","borderRadius","linearProgressClasses","colorPrimary","backgroundColor","palette","grey","mode","bar","LINEAR_PROGRESS_BAR_COLOR","color","round","PanelHeader","FlipBoardButton","onKeyDown","e","key","Tooltip","title","IconButton","paddingX","paddingY","NextMoveButton","playMove","playBoardMove","isButtonEnabled","addNextGameMoveToBoard","nextMoveIndex","nextMove","comment","getComments","c","from","to","promotion","GoToLastPositionButton","setBoardPgn","isButtonDisabled","SaveButton","addGame","enableSave","handleSave","gameToSave","getGameToSave","gameId","PanelToolBar","undoMove","undoBoardMove","navigator","clipboard","writeText","PlayersMetric","whiteValue","blackValue","Stack","flexDirection","xs","md","ValueBlock","padding","border","PrettyMoveSan","additionalText","typographyProps","boxProps","isDarkMode","useTheme","text","firstChar","charAt","includes","pieceColor","unicodeMap","Box","component","fontFamily","chessFont","K","w","b","Q","R","B","N","MoveInfo","bestMove","bestMoveSan","lastPosition","before","moveLineUciToSan","direction","marginTop","Skeleton","animation","maxWidth","moveClassification","showBestMoveLabel","MoveClassification","Best","Opening","Forced","Splendid","Perfect","flexWrap","spacing","Image","src","BASE_PATH","alt","style","maxHeight","moveClassificationLabels","Excellent","Okay","Inaccuracy","Mistake","Blunder","justifyItems","alignContent","LineEvaluation","line","addMoves","lineLabel","getLineEvalLabel","isBlackCp","mate","showSkeleton","uciToSan","getColorFromMoveIdx","moveIdx","ListItem","disablePadding","marginRight","marginY","overflow","minWidth","textAlign","uci","i","moveColor","cursor","ml","transition","opacity","EngineLines","linesNumber","linesSkeleton","Array","engineLines","List","AnalysisTab","isGameOver","isDraw","lg","gap","hidden","display","accuracy","toFixed","estimatedElo","MoveItem","goToMove","getMoveColor","isCurrentMove","moveItem","document","getElementById","movePanel","isInViewport","scrollIntoView","behavior","block","handleClick","moveNumber","gameToUse","moveClassificationsToIgnore","CLASSIFICATION_COLORS","MovesLine","moves","moveNb","MovesPanel","gameMoves","items","push","scrollbarWidth","overflowY","ClassificationRow","classification","whiteNb","filter","blackNb","filterColor","nextPositionIdx","findIndex","firstPositionIdx","capitalize","MovesClassificationsRecap","sortedMoveClassfications","ClassificationTab","flexGrow","ArrowOptions","showBestMove","setShowBestMove","useAtomLocalStorage","showPlayerMoveIcon","setShowPlayerMoveIcon","FormControlLabel","control","Checkbox","checked","onChange","marginX","EngineSettingsDialog","open","onClose","setDepth","setMultiPv","setEngineName","boardHue","setBoardHue","boardHueAtom","pieceSet","setPieceSet","pieceSetAtom","setEngineWorkersNb","isEngineSupported","Stockfish16_1","isSupported","EngineName","Stockfish16_1Lite","Stockfish11","Dialog","fullWidth","DialogTitle","paddingBottom","DialogContent","paddingTop","sm","ENGINE_LABELS","DEFAULT_ENGINE","small","STRONGEST_ENGINE","sizeMb","FormControl","InputLabel","Select","labelId","displayEmpty","input","OutlinedInput","target","Object","values","MenuItem","full","Slider","setValue","max","marksFilter","PIECE_SETS","loading","infoContent","getRecommendedWorkersNb","DialogActions","Button","EngineSettingsButton","openDialog","setOpenDialog","useState","Fab","top","right","bottom","left","CustomTooltip","active","payload","div","CustomDot","cx","cy","r","circle","stroke","strokeWidth","fill","fillOpacity","GraphTab","chartData","formatEvalToChartData","bestDotIndices","bestItems","item","count","ceil","indices","j","floor","random","Set","boardMoveColor","renderDot","moveClass","svg","has","minHeight","ResponsiveContainer","AreaChart","margin","activePayload","XAxis","dataKey","hide","YAxis","domain","content","isAnimationActive","strokeOpacity","Area","type","dot","activeDot","ReferenceLine","y","x","index","chartItem","GameAnalysis","tab","setTab","isLgOrGreater","useMediaQuery","breakpoints","up","showMovesTab","PageTitle","borderColor","borderWidth","boxShadow","Divider","borderBottom","Tabs","newValue","aria-label","Tab","iconPosition","textTransform","disableFocusRipple","role","marginBottom"],"sourceRoot":""}