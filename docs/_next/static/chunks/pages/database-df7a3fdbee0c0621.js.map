{"version":3,"file":"static/chunks/pages/database-df7a3fdbee0c0621.js","mappings":"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","sources":["webpack://_N_E/./src/pages/database.tsx","webpack://_N_E/?c2b5"],"sourcesContent":["import { Grid2 as Grid, Typography } from \"@mui/material\";\nimport { Icon } from \"@iconify/react\";\nimport { DataGrid, GridColDef, GridLocaleText, GRID_DEFAULT_LOCALE_TEXT, GridActionsCellItem, GridRowId } from \"@mui/x-data-grid\";\nimport { useCallback, useMemo } from \"react\";\nimport { blue, red } from \"@mui/material/colors\";\nimport LoadGameButton from \"@/sections/loadGame/loadGameButton\";\nimport { useGameDatabase } from \"@/hooks/useGameDatabase\";\nimport { useRouter } from \"next/router\";\nimport { PageTitle } from \"@/components/pageTitle\";\nconst gridLocaleText: GridLocaleText = {\n  ...GRID_DEFAULT_LOCALE_TEXT,\n  noRowsLabel: \"No games found\"\n};\nexport default function GameDatabase() {\n  const {\n    games,\n    deleteGame\n  } = useGameDatabase(true);\n  const router = useRouter();\n  console.log(games);\n  const handleDeleteGameRow = useCallback((id: GridRowId) => async () => {\n    if (typeof id !== \"number\") {\n      throw new Error(\"Unable to remove game\");\n    }\n    await deleteGame(id);\n  }, [deleteGame]);\n  const handleCopyGameRow = useCallback((id: GridRowId) => async () => {\n    if (typeof id !== \"number\") {\n      throw new Error(\"Unable to copy game\");\n    }\n    await navigator.clipboard?.writeText?.(games[id - 1].pgn);\n  }, [games]);\n  const columns: GridColDef[] = useMemo(() => [{\n    field: \"event\",\n    headerName: \"Event\",\n    width: 150\n  }, {\n    field: \"site\",\n    headerName: \"Site\",\n    width: 150\n  }, {\n    field: \"date\",\n    headerName: \"Date\",\n    width: 150\n  }, {\n    field: \"round\",\n    headerName: \"Round\",\n    headerAlign: \"center\",\n    align: \"center\",\n    width: 150\n  }, {\n    field: \"whiteLabel\",\n    headerName: \"White\",\n    width: 200,\n    headerAlign: \"center\",\n    align: \"center\",\n    valueGetter: (_, row) => `${row.white.name ?? \"Unknown\"} (${row.white.rating ?? \"?\"})`\n  }, {\n    field: \"result\",\n    headerName: \"Result\",\n    headerAlign: \"center\",\n    align: \"center\",\n    width: 100\n  }, {\n    field: \"blackLabel\",\n    headerName: \"Black\",\n    width: 200,\n    headerAlign: \"center\",\n    align: \"center\",\n    valueGetter: (_, row) => `${row.black.name ?? \"Unknown\"} (${row.black.rating ?? \"?\"})`\n  }, {\n    field: \"eval\",\n    headerName: \"Evaluation\",\n    type: \"boolean\",\n    headerAlign: \"center\",\n    align: \"center\",\n    width: 100,\n    valueGetter: (_, row) => !!row.eval\n  }, {\n    field: \"openEvaluation\",\n    type: \"actions\",\n    headerName: \"Analyze\",\n    width: 100,\n    cellClassName: \"actions\",\n    getActions: ({\n      id\n    }) => {\n      return [<GridActionsCellItem icon={<Icon icon=\"streamline:magnifying-glass-solid\" width=\"20px\" />} label=\"Open Evaluation\" onClick={() => router.push({\n        pathname: \"/\",\n        query: {\n          gameId: id\n        }\n      })} color=\"inherit\" key={`${id}-open-eval-button`} />];\n    }\n  }, {\n    field: \"delete\",\n    type: \"actions\",\n    headerName: \"Delete\",\n    width: 100,\n    cellClassName: \"actions\",\n    getActions: ({\n      id\n    }) => {\n      return [<GridActionsCellItem icon={<Icon icon=\"mdi:delete-outline\" color={red[400]} width=\"20px\" />} label=\"Delete\" onClick={handleDeleteGameRow(id)} color=\"inherit\" key={`${id}-delete-button`} />];\n    }\n  }, {\n    field: \"copy pgn\",\n    type: \"actions\",\n    headerName: \"Copy pgn\",\n    width: 100,\n    cellClassName: \"actions\",\n    getActions: ({\n      id\n    }) => {\n      return [<GridActionsCellItem icon={<Icon icon=\"ri:clipboard-line\" color={blue[400]} width=\"20px\" />} label=\"Copy pgn\" onClick={handleCopyGameRow(id)} color=\"inherit\" key={`${id}-copy-button`} />];\n    }\n  }], [handleDeleteGameRow, handleCopyGameRow, router]);\n  return <Grid container justifyContent=\"center\" alignItems=\"center\" gap={4} marginTop={6} data-sentry-element=\"Grid\" data-sentry-component=\"GameDatabase\" data-sentry-source-file=\"database.tsx\">\r\n      <PageTitle title=\"Chesskit Game Database\" data-sentry-element=\"PageTitle\" data-sentry-source-file=\"database.tsx\" />\r\n\r\n      <Grid container justifyContent=\"center\" alignItems=\"center\" size={12} data-sentry-element=\"Grid\" data-sentry-source-file=\"database.tsx\">\r\n        <LoadGameButton data-sentry-element=\"LoadGameButton\" data-sentry-source-file=\"database.tsx\" />\r\n      </Grid>\r\n\r\n      <Grid container justifyContent=\"center\" alignItems=\"center\" size={12} data-sentry-element=\"Grid\" data-sentry-source-file=\"database.tsx\">\r\n        <Typography variant=\"subtitle2\" data-sentry-element=\"Typography\" data-sentry-source-file=\"database.tsx\">\r\n          You have {games.length} game{games.length !== 1 && \"s\"} in your\r\n          database\r\n        </Typography>\r\n      </Grid>\r\n\r\n      <Grid maxWidth=\"100%\" minWidth=\"50px\" data-sentry-element=\"Grid\" data-sentry-source-file=\"database.tsx\">\r\n        <DataGrid aria-label=\"Games list\" rows={games} columns={columns} disableColumnMenu hideFooter={true} localeText={gridLocaleText} initialState={{\n        sorting: {\n          sortModel: [{\n            field: \"date\",\n            sort: \"desc\"\n          }]\n        }\n      }} data-sentry-element=\"DataGrid\" data-sentry-source-file=\"database.tsx\" />\r\n      </Grid>\r\n    </Grid>;\n}","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/database\",\n      function () {\n        return require(\"private-next-pages/database.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/database\"])\n      });\n    }\n  "],"names":["gridLocaleText","GRID_DEFAULT_LOCALE_TEXT","noRowsLabel","GameDatabase","games","deleteGame","useGameDatabase","router","useRouter","console","log","handleDeleteGameRow","useCallback","id","handleCopyGameRow","navigator","clipboard","writeText","pgn","columns","useMemo","field","headerName","width","headerAlign","align","valueGetter","_","row","white","name","rating","black","type","eval","cellClassName","getActions","GridActionsCellItem","icon","Icon","label","onClick","push","pathname","query","gameId","color","red","blue","Grid","container","justifyContent","alignItems","gap","marginTop","data-sentry-element","data-sentry-component","data-sentry-source-file","PageTitle","title","size","LoadGameButton","Typography","variant","length","maxWidth","minWidth","DataGrid","aria-label","rows","disableColumnMenu","hideFooter","localeText","initialState","sorting","sortModel","sort"],"sourceRoot":""}